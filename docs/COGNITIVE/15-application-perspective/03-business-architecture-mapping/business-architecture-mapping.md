# 业务应用架构映射关系

**版本**：v1.0 **最后更新**：2025-11-07 **维护者**：项目团队

## 📑 目录

- [📑 目录](#-目录)
- [📖 概述](#-概述)
- [一、技术层 → 架构层映射](#一技术层--架构层映射)
  - [1.1 映射关系说明](#11-映射关系说明)
- [二、领域驱动设计(DDD)适配演进](#二领域驱动设计ddd适配演进)
  - [2.1 传统虚拟化时代](#21-传统虚拟化时代)
  - [2.2 容器化时代](#22-容器化时代)
  - [2.3 WASM 时代](#23-wasm-时代)
- [三、业务架构影响分析](#三业务架构影响分析)
  - [3.1 业务边界演进](#31-业务边界演进)
  - [3.2 业务流程演进](#32-业务流程演进)
- [四、信息架构影响分析](#四信息架构影响分析)
  - [4.1 数据存储演进](#41-数据存储演进)
  - [4.2 数据流动演进](#42-数据流动演进)
- [五、领域模型影响分析](#五领域模型影响分析)
  - [5.1 聚合根粒度演进](#51-聚合根粒度演进)
  - [5.2 领域事件演进](#52-领域事件演进)
- [🔗 相关文档](#-相关文档)

---

## 📖 概述

本文档分析虚拟化、容器化、沙盒化、WASM 等技术层对业务架构、信息架构、领域模型的
影响，揭示技术演进与架构演进的对应关系。

## 一、技术层 → 架构层映射

| 技术层     | 业务架构影响                   | 信息架构影响               | 领域模型影响             |
| ---------- | ------------------------------ | -------------------------- | ------------------------ |
| **虚拟化** | 支持单体应用迁移，业务边界模糊 | 集中式数据管理，烟囱式系统 | 统一领域模型，强耦合     |
| **容器化** | 微服务架构兴起，业务垂直拆分   | 分布式数据架构，服务自治   | 限界上下文明确，领域拆分 |
| **沙盒化** | 安全多租户，业务流程隔离       | 数据隔离与合规性增强       | 子域隔离，防腐层强化     |
| **WASM**   | 函数级服务编排，事件驱动架构   | 超轻量数据流，实时处理     | 聚合根粒度细化，事件溯源 |

### 1.1 映射关系说明

**技术层 → 业务架构**:

- 技术能力决定业务架构的可能性
- 隔离粒度影响业务边界划分
- 启动速度影响业务响应模式

**技术层 → 信息架构**:

- 数据存储方式受技术约束
- 数据流动模式受网络架构影响
- 数据一致性受隔离级别影响

**技术层 → 领域模型**:

- 领域边界受技术边界影响
- 聚合粒度受资源限制影响
- 事件驱动受通信机制影响

## 二、领域驱动设计(DDD)适配演进

### 2.1 传统虚拟化时代

**领域模型特征**:

- **核心域**：单一核心域，边界模糊
- **模型类型**：贫血模型（Anemic Domain Model）
- **架构模式**：经典三层架构（Presentation-Business-Data）

**典型问题**:

- 业务边界模糊，难以扩展
- 领域逻辑分散，难以维护
- 技术耦合度高，难以测试

**架构示例**:

```text
┌─────────────────────────────────┐
│      Presentation Layer          │
│    (Web/API Controllers)        │
└──────────────┬──────────────────┘
               │
┌──────────────▼──────────────────┐
│      Business Layer             │
│    (Service Classes)            │
└──────────────┬──────────────────┘
               │
┌──────────────▼──────────────────┐
│      Data Layer                  │
│    (Repository/ORM)              │
└──────────────────────────────────┘
```

### 2.2 容器化时代

**领域模型特征**:

- **核心域**：微服务化拆分，限界上下文明确
- **模型类型**：充血模型（Rich Domain Model）
- **架构模式**：整洁架构/六边形架构

**典型特征**:

- 应用层+领域层分离
- C4 模型广泛应用
- 服务间通过 API 通信

**架构示例**:

```text
┌─────────────────────────────────┐
│      Application Layer           │
│    (Use Cases, DTOs)             │
└──────────────┬──────────────────┘
               │
┌──────────────▼──────────────────┐
│      Domain Layer                │
│    (Entities, Value Objects)     │
└──────────────┬──────────────────┘
               │
┌──────────────▼──────────────────┐
│      Infrastructure Layer        │
│    (Repository, External APIs)   │
└──────────────────────────────────┘
```

### 2.3 WASM 时代

**领域模型特征**:

- **核心域**：函数级领域服务，事件驱动
- **模型类型**：事件驱动模型（Event-Driven Model）
- **架构模式**：Serverless + 事件源架构

**典型特征**:

- 跨语言运行时，极致弹性
- 聚合根粒度细化
- 事件溯源成为主流

**架构示例**:

```text
┌─────────────────────────────────┐
│      Event Gateway              │
│    (Event Router)               │
└──────────────┬──────────────────┘
               │
    ┌──────────┼──────────┐
    │          │          │
┌───▼───┐ ┌───▼───┐ ┌───▼───┐
│WASM   │ │WASM   │ │WASM   │
│Func 1 │ │Func 2 │ │Func 3 │
└───┬───┘ └───┬───┘ └───┬───┘
    │          │          │
    └──────────┼──────────┘
               │
┌──────────────▼──────────────────┐
│      Event Store                 │
│    (Event Sourcing)              │
└──────────────────────────────────┘
```

## 三、业务架构影响分析

### 3.1 业务边界演进

**虚拟化时代**:

- **边界特征**：物理边界（VM 边界）
- **业务影响**：单体应用，业务边界模糊
- **扩展方式**：垂直扩展（Scale Up）

**容器化时代**:

- **边界特征**：服务边界（Container 边界）
- **业务影响**：微服务架构，业务垂直拆分
- **扩展方式**：水平扩展（Scale Out）

**WASM 时代**:

- **边界特征**：函数边界（Function 边界）
- **业务影响**：函数级服务编排，事件驱动
- **扩展方式**：按需扩展（Scale to Zero）

### 3.2 业务流程演进

**虚拟化 → 容器化**:

- 从"大而全"到"小而专"
- 业务流程拆分，服务自治
- API 网关统一入口

**容器化 → WASM**:

- 从"服务编排"到"事件驱动"
- 业务流程事件化，异步处理
- 函数组合替代服务调用

## 四、信息架构影响分析

### 4.1 数据存储演进

**虚拟化时代**:

- **存储模式**：集中式数据管理
- **数据架构**：数据仓库，ETL 流程
- **数据一致性**：ACID 事务

**容器化时代**:

- **存储模式**：分布式数据架构
- **数据架构**：数据湖/中台，服务自治
- **数据一致性**：最终一致性

**WASM 时代**:

- **存储模式**：超轻量数据流
- **数据架构**：实时数据流，流式处理
- **数据一致性**：事件顺序保证

### 4.2 数据流动演进

**虚拟化时代**:

```text
应用 → 数据库 → 数据仓库 → BI报表
（批处理，T+1）
```

**容器化时代**:

```text
服务A → API → 服务B → 数据库
（实时，同步调用）
```

**WASM 时代**:

```text
事件源 → 事件流 → WASM函数 → 事件存储
（实时，异步处理）
```

## 五、领域模型影响分析

### 5.1 聚合根粒度演进

**虚拟化时代**:

- **聚合根**：大型聚合，包含多个实体
- **粒度**：粗粒度，业务边界模糊
- **问题**：难以扩展，性能瓶颈

**容器化时代**:

- **聚合根**：中等聚合，单一业务实体
- **粒度**：中粒度，限界上下文明确
- **优势**：易于扩展，性能优化

**WASM 时代**:

- **聚合根**：小型聚合，单一领域事件
- **粒度**：细粒度，事件驱动
- **优势**：极致弹性，按需扩展

### 5.2 领域事件演进

**虚拟化时代**:

- **事件模式**：无事件，直接调用
- **事件处理**：同步处理
- **事件存储**：无

**容器化时代**:

- **事件模式**：领域事件，异步消息
- **事件处理**：消息队列处理
- **事件存储**：消息队列存储

**WASM 时代**:

- **事件模式**：事件源，事件流
- **事件处理**：函数触发处理
- **事件存储**：事件存储（Event Store）

---

## 🔗 相关文档

- **[应用视角总览](../README.md)** - 应用视角文档集索引
- **[技术层次体系架构](../01-technical-layers/technical-layers.md)** - 四层演进
  模型
- **[多维技术对比矩阵](../02-comparison-matrix/comparison-matrix.md)** - 详细技
  术对比
- **[应用架构演进分析](../09-application-evolution/application-evolution.md)** -
  应用架构演进详细分析

---

**最后更新**：2025-11-07 **维护者**：项目团队
