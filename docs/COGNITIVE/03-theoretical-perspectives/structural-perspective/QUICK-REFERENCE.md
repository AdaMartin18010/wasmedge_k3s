# QUICK-REFERENCE.md

## 📑 目录

- [📑 目录](#-目录)
- [📑 结构视角快速参考](#-结构视角快速参考)
  - [核心命题](#核心命题)
  - [三类结构](#三类结构)
  - [虚拟化容器化沙盒化](#虚拟化容器化沙盒化)
  - [选型格言](#选型格言)
  - [选型/迁移口诀](#选型迁移口诀)
  - [8 层结构权重（简化）](#8-层结构权重简化)
  - [故障模式](#故障模式)

---

## 📑 结构视角快速参考

### 核心命题

> **计算机科学 = 计算结构 ⊕ 控制结构 ⊕ 信息结构**

### 三类结构

| 结构类型     | 核心问题           | 典型实例                           |
| ------------ | ------------------ | ---------------------------------- |
| **计算结构** | "什么可以被计算？" | λ-演算、Monad、图灵机              |
| **控制结构** | "何时发生？"       | Happens-before、并发模型、事务隔离 |
| **信息结构** | "如何表示与逼近？" | 类型系统、抽象解释、容错计算       |

### 虚拟化容器化沙盒化

| 技术   | 结构重心          | 一句话总结                     |
| ------ | ----------------- | ------------------------------ |
| 虚拟化 | 重计算            | 重计算，全局序，信息全造假     |
| 容器化 | 折中（计算-控制） | syscall 换名字，镜像分层像拓扑 |
| 沙盒化 | 轻信息            | 不动计算，只剪权限，最小邻近集 |

### 选型格言

> **"你要多假的机器？"**
>
> - 想要**完全假的机器**→ 虚拟化（计算结构爆表）
> - 想要**差不多假的机器**→ 容器化（计算-控制折中）
> - 只想**别让程序坏事**→ 沙盒化（信息结构优先）

### 选型/迁移口诀

> **"向下买计算，向上买控制，向边买信息"**

- 需要**指令级兼容**→**往下走**：KVM/TEE
- 需要**毫秒级热迁移**→**控制轴加码**：Firecracker 微 VM
- 需要**镜像秒级分发**→**信息轴优化**：Docker 分层+压缩
- 需要**最小攻击面**→**信息轴剪枝**：seccomp + unveil + 线性内存

### 8 层结构权重（简化）

| 层级           | 计算  | 控制 | 信息 |
| -------------- | ----- | ---- | ---- |
| L8 业务代码    | ★★★☆  | ★★☆  | ★★   |
| L7 语言运行时  | ★★★   | ★★★  | ★★   |
| L6 LibOS       | ★★★   | ★★★☆ | ★★   |
| L5 容器引擎    | ★★    | ★★★★ | ★★★  |
| L4 Host Kernel | ★★    | ★★★  | ★★★  |
| L3 Hypervisor  | ★★★★  | ★★★  | ★★   |
| L2 Firmware    | ★★    | ★★★☆ | ★★★  |
| L1 Silicon     | ★★★★★ | ★★★  | ★    |

### 故障模式

| 故障            | 结构失衡       |
| --------------- | -------------- |
| Meltdown        | 信息结构崩溃   |
| Spectre         | 控制结构被利用 |
| Docker rm -rf / | 计算结构未隔离 |
| Java STW 卡顿   | 控制结构单点   |

---

**更新时间**：2025-11-05 **版本**：v1.0
