# 网络概念与技术名词论证

## 目录

- [目录](#目录)
- [01. 文档定位](#01-文档定位)
- [02. 网络拓扑结构](#02-网络拓扑结构)
  - [02.1 物理拓扑结构](#021-物理拓扑结构)
    - [02.1.1 物理拓扑定义](#0211-物理拓扑定义)
    - [02.1.2 物理拓扑在技术栈中的作用](#0212-物理拓扑在技术栈中的作用)
  - [02.2 逻辑拓扑结构](#022-逻辑拓扑结构)
    - [02.2.1 逻辑拓扑定义](#0221-逻辑拓扑定义)
    - [02.2.2 逻辑拓扑在技术栈中的作用](#0222-逻辑拓扑在技术栈中的作用)
  - [02.3 拓扑结构映射](#023-拓扑结构映射)
    - [02.3.1 物理拓扑与逻辑拓扑映射](#0231-物理拓扑与逻辑拓扑映射)
    - [02.3.2 各范式拓扑结构映射](#0232-各范式拓扑结构映射)
- [03. 通讯链接模式](#03-通讯链接模式)
  - [03.1 单工通讯](#031-单工通讯)
    - [03.1.1 单工通讯定义](#0311-单工通讯定义)
    - [03.1.2 单工通讯在各范式中的应用](#0312-单工通讯在各范式中的应用)
  - [03.2 半双工通讯](#032-半双工通讯)
    - [03.2.1 半双工通讯定义](#0321-半双工通讯定义)
    - [03.2.2 半双工通讯在各范式中的应用](#0322-半双工通讯在各范式中的应用)
  - [03.3 全双工通讯](#033-全双工通讯)
    - [03.3.1 全双工通讯定义](#0331-全双工通讯定义)
    - [03.3.2 全双工通讯在各范式中的应用](#0332-全双工通讯在各范式中的应用)
  - [03.4 通讯链接模式映射](#034-通讯链接模式映射)
    - [03.4.1 通讯链接模式对比矩阵](#0341-通讯链接模式对比矩阵)
    - [03.4.2 各范式通讯链接模式映射](#0342-各范式通讯链接模式映射)
- [04. 信道模型](#04-信道模型)
  - [04.1 物理信道](#041-物理信道)
    - [04.1.1 物理信道定义](#0411-物理信道定义)
    - [04.1.2 物理信道在技术栈中的作用](#0412-物理信道在技术栈中的作用)
  - [04.2 逻辑信道](#042-逻辑信道)
    - [04.2.1 逻辑信道定义](#0421-逻辑信道定义)
    - [04.2.2 逻辑信道在技术栈中的作用](#0422-逻辑信道在技术栈中的作用)
  - [04.3 信道映射](#043-信道映射)
    - [04.3.1 物理信道与逻辑信道映射](#0431-物理信道与逻辑信道映射)
    - [04.3.2 各范式信道模型映射](#0432-各范式信道模型映射)
- [05. 网卡模型](#05-网卡模型)
  - [05.1 物理网卡](#051-物理网卡)
    - [05.1.1 物理网卡定义](#0511-物理网卡定义)
    - [05.1.2 物理网卡在技术栈中的作用](#0512-物理网卡在技术栈中的作用)
  - [05.2 虚拟网卡](#052-虚拟网卡)
    - [05.2.1 虚拟网卡定义](#0521-虚拟网卡定义)
    - [05.2.2 虚拟网卡在技术栈中的作用](#0522-虚拟网卡在技术栈中的作用)
  - [05.3 逻辑网卡](#053-逻辑网卡)
    - [05.3.1 逻辑网卡定义](#0531-逻辑网卡定义)
    - [05.3.2 逻辑网卡在技术栈中的作用](#0532-逻辑网卡在技术栈中的作用)
  - [05.4 网卡模型映射](#054-网卡模型映射)
    - [05.4.1 网卡模型对比矩阵](#0541-网卡模型对比矩阵)
    - [05.4.2 各范式网卡模型映射](#0542-各范式网卡模型映射)
- [06. 网络协议栈](#06-网络协议栈)
  - [06.1 OSI 七层模型](#061-osi-七层模型)
    - [06.1.1 OSI 模型定义](#0611-osi-模型定义)
    - [06.1.2 OSI 模型在各范式中的映射](#0612-osi-模型在各范式中的映射)
  - [06.2 TCP/IP 四层模型](#062-tcpip-四层模型)
    - [06.2.1 TCP/IP 模型定义](#0621-tcpip-模型定义)
    - [06.2.2 TCP/IP 模型在各范式中的映射](#0622-tcpip-模型在各范式中的映射)
  - [06.3 各范式网络栈对比](#063-各范式网络栈对比)
    - [06.3.1 网络栈对比矩阵](#0631-网络栈对比矩阵)
- [07. 虚拟化网络架构](#07-虚拟化网络架构)
  - [07.1 虚拟化网络拓扑](#071-虚拟化网络拓扑)
    - [07.1.1 虚拟化网络拓扑结构](#0711-虚拟化网络拓扑结构)
  - [07.2 虚拟化网卡模型](#072-虚拟化网卡模型)
    - [07.2.1 虚拟化网卡架构](#0721-虚拟化网卡架构)
  - [07.3 虚拟化网络隔离](#073-虚拟化网络隔离)
    - [07.3.1 虚拟化网络隔离机制](#0731-虚拟化网络隔离机制)
- [08. 容器化网络架构](#08-容器化网络架构)
  - [08.1 容器化网络拓扑](#081-容器化网络拓扑)
    - [08.1.1 容器化网络拓扑结构](#0811-容器化网络拓扑结构)
  - [08.2 容器化网卡模型](#082-容器化网卡模型)
    - [08.2.1 容器化网卡架构](#0821-容器化网卡架构)
  - [08.3 容器化网络隔离](#083-容器化网络隔离)
    - [08.3.1 容器化网络隔离机制](#0831-容器化网络隔离机制)
- [09. 沙盒化网络架构](#09-沙盒化网络架构)
  - [09.1 沙盒化网络拓扑](#091-沙盒化网络拓扑)
    - [09.1.1 沙盒化网络拓扑结构](#0911-沙盒化网络拓扑结构)
  - [09.2 沙盒化网卡模型](#092-沙盒化网卡模型)
    - [09.2.1 沙盒化网卡架构](#0921-沙盒化网卡架构)
  - [09.3 沙盒化网络隔离](#093-沙盒化网络隔离)
    - [09.3.1 沙盒化网络隔离机制](#0931-沙盒化网络隔离机制)
- [10. 网络架构对比矩阵](#10-网络架构对比矩阵)
  - [10.1 网络拓扑对比矩阵](#101-网络拓扑对比矩阵)
  - [10.2 通讯链接模式对比矩阵](#102-通讯链接模式对比矩阵)
  - [10.3 信道模型对比矩阵](#103-信道模型对比矩阵)
  - [10.4 网卡模型对比矩阵](#104-网卡模型对比矩阵)
  - [10.5 网络协议栈对比矩阵](#105-网络协议栈对比矩阵)
- [11. 参考](#11-参考)

---

## 01. 文档定位

本文档系统化解释**虚拟化、容器化、沙盒化**的网络概念、拓扑结构、通讯链接、信道模
型、网卡模型，提供详细的网络架构论证和技术名词对应关系。

**核心内容**：

1. **网络拓扑结构**：物理拓扑 vs 逻辑拓扑的映射关系
2. **通讯链接模式**：单工、半双工、全双工的实现机制
3. **信道模型**：物理信道 vs 逻辑信道的抽象关系
4. **网卡模型**：物理网卡、虚拟网卡、逻辑网卡的技术实现
5. **网络协议栈**：各范式在网络协议栈中的位置和作用
6. **网络架构对比**：虚拟化、半虚拟化、容器化、沙盒化的网络架构全面对比

**与其他文档的关系**：

- **理论模型**（01-theory-models/）：提供网络资源模型理论基础
- **技术名词论证**（technical-concepts-explanation.md）：提供网络技术名词定义
- **本文档**：提供网络架构和拓扑结构的详细论证

---

## 02. 网络拓扑结构

### 02.1 物理拓扑结构

#### 02.1.1 物理拓扑定义

**物理拓扑（Physical Topology）定义**：

物理拓扑是指网络节点和通信介质在物理空间中的实际连接方式和布局结构。

**物理拓扑类型**：

1. **总线型拓扑（Bus Topology）**：

   - **结构**：所有设备连接到同一条总线上
   - **特征**：共享介质、广播通信
   - **应用**：早期以太网、局域网

2. **星型拓扑（Star Topology）**：

   - **结构**：所有设备连接到中心节点（交换机、集线器）
   - **特征**：集中式管理、点对点通信
   - **应用**：现代以太网、数据中心网络

3. **环型拓扑（Ring Topology）**：

   - **结构**：设备形成闭合环路
   - **特征**：顺序通信、令牌传递
   - **应用**：Token Ring、FDDI

4. **网状拓扑（Mesh Topology）**：

   - **结构**：设备之间多点连接
   - **特征**：高冗余、高可靠性
   - **应用**：数据中心骨干网、广域网

#### 02.1.2 物理拓扑在技术栈中的作用

**物理拓扑映射**：

```text
物理拓扑结构:

数据中心物理拓扑:
├── 核心层: 核心交换机（Mesh 拓扑）
├── 汇聚层: 汇聚交换机（Star 拓扑）
└── 接入层: 接入交换机（Bus/Star 拓扑）
    ├── 服务器物理网卡
    ├── 存储设备
    └── 网络设备

服务器物理拓扑:
├── 物理网卡（NIC）
│   ├── 以太网接口
│   ├── 光纤接口
│   └── 接口速率: 1Gbps、10Gbps、25Gbps、100Gbps
└── 网络线缆
    ├── 双绞线（Twisted Pair）
    ├── 光纤（Fiber Optic）
    └── 无线（WiFi、5G）
```

### 02.2 逻辑拓扑结构

#### 02.2.1 逻辑拓扑定义

**逻辑拓扑（Logical Topology）定义**：

逻辑拓扑是指网络节点在逻辑层面的连接关系和通信路径，独立于物理连接方式。

**逻辑拓扑类型**：

1. **点对点逻辑拓扑（Point-to-Point）**：

   - **结构**：两个节点之间的直接逻辑连接
   - **特征**：专用链路、全双工通信
   - **应用**：VPN、隧道连接

2. **广播逻辑拓扑（Broadcast）**：

   - **结构**：一个节点向所有节点广播
   - **特征**：共享介质、一对多通信
   - **应用**：以太网广播、ARP 协议

3. **多播逻辑拓扑（Multicast）**：

   - **结构**：一个节点向多个特定节点发送
   - **特征**：组播通信、减少带宽占用
   - **应用**：视频会议、流媒体

4. **覆盖网络拓扑（Overlay Network）**：

   - **结构**：在物理网络之上构建的逻辑网络
   - **特征**：虚拟化网络、独立寻址
   - **应用**：VXLAN、GRE、虚拟网络

#### 02.2.2 逻辑拓扑在技术栈中的作用

**逻辑拓扑映射**：

```text
逻辑拓扑结构:

虚拟化逻辑拓扑:
├── 虚拟交换机（vSwitch）
│   ├── 逻辑拓扑: Star（VM 连接到 vSwitch）
│   ├── 逻辑网卡（vNIC）
│   └── 虚拟网络（Virtual Network）
└── 覆盖网络
    ├── VXLAN: 逻辑二层网络
    └── GRE: 逻辑三层网络

容器化逻辑拓扑:
├── Network Namespace
│   ├── 逻辑拓扑: Point-to-Point（容器间通信）
│   ├── 虚拟以太网对（veth pair）
│   └── 网桥（Bridge）
└── CNI 网络插件
    ├── Flannel: 覆盖网络（VXLAN）
    └── Calico: BGP 网络（点对点）

沙盒化逻辑拓扑:
├── WASI Network
│   ├── 逻辑拓扑: Point-to-Point（Wasm 模块间通信）
│   ├── Socket 抽象
│   └── 函数调用拦截
└── 网络栈
    └── Host OS 网络栈（共享）
```

### 02.3 拓扑结构映射

#### 02.3.1 物理拓扑与逻辑拓扑映射

**拓扑映射矩阵**：

| 物理拓扑     | 逻辑拓扑       | 映射关系                   | 应用场景             |
| ------------ | -------------- | -------------------------- | -------------------- |
| **总线型**   | 广播逻辑拓扑   | 物理总线映射到广播逻辑     | 早期以太网           |
| **星型**     | 点对点逻辑拓扑 | 物理星型映射到点对点逻辑   | 现代交换机网络       |
| **网状**     | 覆盖网络拓扑   | 物理网状映射到覆盖逻辑网络 | VXLAN、容器网络      |
| **任意物理** | 覆盖网络拓扑   | 物理拓扑抽象为覆盖逻辑网络 | 虚拟化网络、容器网络 |

#### 02.3.2 各范式拓扑结构映射

**各范式拓扑映射对比**：

| 范式         | 物理拓扑       | 逻辑拓扑                      | 拓扑结构特征                        |
| ------------ | -------------- | ----------------------------- | ----------------------------------- |
| **虚拟化**   | 星型（交换机） | 星型逻辑拓扑（vSwitch）       | VM 连接到虚拟交换机                 |
| **半虚拟化** | 星型（交换机） | 星型逻辑拓扑（vSwitch，协作） | VM 通过 VirtIO Net 连接到虚拟交换机 |
| **容器化**   | 星型（交换机） | 点对点逻辑拓扑（veth）        | 容器间通过 veth 通信                |
| **沙盒化**   | 星型（交换机） | 点对点逻辑拓扑（Socket）      | Wasm 模块通过 Socket 通信           |

**拓扑结构详细映射**：

```text
拓扑结构映射:

虚拟化拓扑映射:
物理拓扑（星型） → 逻辑拓扑（星型 vSwitch）
├── 物理交换机 → 虚拟交换机（vSwitch）
├── 物理网卡 → 虚拟网卡（vNIC）
└── 物理网络 → 虚拟网络（Virtual Network）

容器化拓扑映射:
物理拓扑（星型） → 逻辑拓扑（点对点 veth）
├── 物理交换机 → 网桥（Bridge）
├── 物理网卡 → 虚拟以太网对（veth pair）
└── 物理网络 → Network Namespace

沙盒化拓扑映射:
物理拓扑（星型） → 逻辑拓扑（点对点 Socket）
├── 物理交换机 → Host OS 网络栈
├── 物理网卡 → Socket 抽象（WASI）
└── 物理网络 → 函数调用拦截（WASI Network）
```

---

## 03. 通讯链接模式

### 03.1 单工通讯

#### 03.1.1 单工通讯定义

**单工通讯（Simplex Communication）定义**：

单工通讯是指数据只能在一个方向上传输，一个节点只能发送，另一个节点只能接收。

**单工通讯特征**：

- **单向传输**：数据只能单向流动
- **固定方向**：发送端和接收端固定
- **无反馈**：接收端无法向发送端发送数据
- **应用场景**：广播、电视信号、传感器数据采集

#### 03.1.2 单工通讯在各范式中的应用

**单工通讯映射**：

```text
单工通讯应用:

虚拟化单工通讯:
├── 虚拟机监控（单向）
│   └── Hypervisor 向 VM 发送控制指令
└── 日志收集（单向）
    └── VM 向 Hypervisor 发送日志

容器化单工通讯:
├── 容器日志（单向）
│   └── Container 向 Host 发送日志
└── 监控数据（单向）
    └── Container 向监控系统发送指标

沙盒化单工通讯:
├── 事件通知（单向）
│   └── Wasm Module 向 Runtime 发送事件
└── 数据采集（单向）
    └── Wasm Module 向 Host 发送数据
```

### 03.2 半双工通讯

#### 03.2.1 半双工通讯定义

**半双工通讯（Half-Duplex Communication）定义**：

半双工通讯是指数据可以在两个方向上传输，但同一时刻只能在一个方向上传送，需要切换
方向。

**半双工通讯特征**：

- **双向传输**：数据可以在两个方向传输
- **分时传输**：同一时刻只能一个方向
- **需要切换**：需要协议来控制方向切换
- **应用场景**：对讲机、CSMA/CD 以太网、无线网络

#### 03.2.2 半双工通讯在各范式中的应用

**半双工通讯映射**：

```text
半双工通讯应用:

虚拟化半双工通讯:
├── VirtIO 通信（半双工）
│   ├── Guest OS → Hypervisor（请求）
│   └── Hypervisor → Guest OS（响应）
└── 虚拟网卡通信（半双工）
    ├── VM → Hypervisor（发送）
    └── Hypervisor → VM（接收）

容器化半双工通讯:
├── veth pair 通信（半双工）
│   ├── Container → Bridge（发送）
│   └── Bridge → Container（接收）
└── 系统调用（半双工）
    ├── Container → Host Kernel（请求）
    └── Host Kernel → Container（响应）

沙盒化半双工通讯:
├── WASI Socket（半双工）
│   ├── Wasm Module → Runtime（发送）
│   └── Runtime → Wasm Module（接收）
└── 函数调用（半双工）
    ├── Wasm Module → Host（调用）
    └── Host → Wasm Module（返回）
```

### 03.3 全双工通讯

#### 03.3.1 全双工通讯定义

**全双工通讯（Full-Duplex Communication）定义**：

全双工通讯是指数据可以同时在两个方向上传输，发送和接收可以同时进行。

**全双工通讯特征**：

- **同时双向传输**：发送和接收可以同时进行
- **独立通道**：每个方向有独立的通道
- **无需切换**：不需要方向切换协议
- **应用场景**：现代以太网、TCP/IP、全双工网卡

#### 03.3.2 全双工通讯在各范式中的应用

**全双工通讯映射**：

```text
全双工通讯应用:

虚拟化全双工通讯:
├── 虚拟网卡（全双工）
│   ├── VM ↔ vNIC（同时发送和接收）
│   └── vNIC ↔ Hypervisor（同时发送和接收）
└── 虚拟网络（全双工）
    └── VM₁ ↔ VM₂（通过 vSwitch，全双工）

容器化全双工通讯:
├── Network Namespace（全双工）
│   ├── Container ↔ veth（同时发送和接收）
│   └── veth ↔ Bridge（同时发送和接收）
└── 容器间通信（全双工）
    └── Container₁ ↔ Container₂（通过 CNI，全双工）

沙盒化全双工通讯:
├── WASI Network（全双工）
│   ├── Wasm Module ↔ Socket（同时发送和接收）
│   └── Socket ↔ Host OS（同时发送和接收）
└── Wasm 模块间通信（全双工）
    └── Wasm Module₁ ↔ Wasm Module₂（通过 Host OS，全双工）
```

### 03.4 通讯链接模式映射

#### 03.4.1 通讯链接模式对比矩阵

**通讯链接模式对比**：

| 链接模式   | 传输方向 | 同时性   | 应用场景           | 在各范式中的应用                          |
| ---------- | -------- | -------- | ------------------ | ----------------------------------------- |
| **单工**   | 单向     | 固定方向 | 广播、监控         | 日志收集、监控数据上报                    |
| **半双工** | 双向     | 分时传输 | 对讲机、无线网络   | VirtIO、veth pair、WASI Socket            |
| **全双工** | 双向     | 同时传输 | 现代以太网、TCP/IP | 虚拟网卡、Network Namespace、WASI Network |

#### 03.4.2 各范式通讯链接模式映射

**各范式通讯链接模式**：

| 范式       | 主要通讯模式 | 实现机制                 | 性能特征     |
| ---------- | ------------ | ------------------------ | ------------ |
| **虚拟化** | 全双工       | 虚拟网卡（vNIC）         | 10-50μs 延迟 |
| **容器化** | 全双工       | Network Namespace + veth | 1-10μs 延迟  |
| **沙盒化** | 全双工       | WASI Network + Socket    | < 1μs 延迟   |

---

## 04. 信道模型

### 04.1 物理信道

#### 04.1.1 物理信道定义

**物理信道（Physical Channel）定义**：

物理信道是指用于传输数据的实际物理介质，包括有线介质和无线介质。

**物理信道类型**：

1. **有线物理信道**：

   - **双绞线（Twisted Pair）**：

     - **类型**：Cat5、Cat5e、Cat6、Cat6a
     - **速率**：100Mbps - 10Gbps
     - **应用**：局域网、数据中心

   - **光纤（Fiber Optic）**：

     - **类型**：单模光纤、多模光纤
     - **速率**：10Gbps - 400Gbps
     - **应用**：骨干网、数据中心互连

   - **同轴电缆（Coaxial Cable）**：
     - **类型**：RG-6、RG-11
     - **速率**：100Mbps - 1Gbps
     - **应用**：有线电视、宽带接入

2. **无线物理信道**：

   - **WiFi**：

     - **标准**：802.11n/ac/ax
     - **速率**：150Mbps - 10Gbps
     - **应用**：无线局域网

   - **5G/4G**：
     - **标准**：5G NR、LTE
     - **速率**：100Mbps - 10Gbps
     - **应用**：移动网络、边缘计算

#### 04.1.2 物理信道在技术栈中的作用

**物理信道映射**：

```text
物理信道结构:

数据中心物理信道:
├── 服务器网卡
│   ├── 以太网接口（双绞线、光纤）
│   ├── 接口速率: 1Gbps、10Gbps、25Gbps、100Gbps
│   └── 接口类型: RJ-45、SFP+、QSFP28
└── 网络线缆
    ├── 双绞线（Cat6/Cat6a）
    ├── 光纤（单模/多模）
    └── 无线（WiFi、5G）

边缘计算物理信道:
├── WiFi 接口
├── 4G/5G 接口
└── 以太网接口（备用）
```

### 04.2 逻辑信道

#### 04.2.1 逻辑信道定义

**逻辑信道（Logical Channel）定义**：

逻辑信道是指在物理信道之上建立的抽象通信通道，允许多个逻辑通道共享同一物理信道。

**逻辑信道类型**：

1. **虚拟局域网（VLAN）**：

   - **定义**：在物理网络上创建逻辑分隔的虚拟网络
   - **实现**：VLAN Tag（802.1Q）
   - **应用**：网络隔离、广播域分割

2. **虚拟专用网（VPN）**：

   - **定义**：在公共网络上创建专用逻辑网络
   - **实现**：IPSec、SSL VPN、GRE
   - **应用**：远程访问、站点互连

3. **覆盖网络通道**：

   - **VXLAN**：逻辑二层网络通道
   - **GRE**：逻辑三层网络通道
   - **Geneve**：通用网络虚拟化封装

4. **容器网络通道**：

   - **CNI 网络通道**：容器网络接口逻辑通道
   - **Service Mesh 通道**：服务网格逻辑通道
   - **Ingress/Egress 通道**：流量入口/出口逻辑通道

#### 04.2.2 逻辑信道在技术栈中的作用

**逻辑信道映射**：

```text
逻辑信道结构:

虚拟化逻辑信道:
├── VLAN（虚拟局域网）
│   ├── 逻辑信道: VLAN ID（1-4094）
│   └── 物理信道: 共享物理网络
├── VXLAN（虚拟扩展局域网）
│   ├── 逻辑信道: VNI（Virtual Network Identifier）
│   └── 物理信道: 底层 IP 网络
└── VPN 隧道
    ├── 逻辑信道: VPN 连接
    └── 物理信道: 公共网络

容器化逻辑信道:
├── Network Namespace（网络命名空间）
│   ├── 逻辑信道: 独立的网络栈
│   └── 物理信道: 共享物理网卡
├── CNI 网络通道
│   ├── Flannel: VXLAN 逻辑通道
│   ├── Calico: BGP 逻辑通道
│   └── 物理信道: 底层物理网络
└── Service Mesh 通道
    ├── Istio: mTLS 逻辑通道
    └── 物理信道: 容器网络

沙盒化逻辑信道:
├── WASI Network（网络抽象）
│   ├── 逻辑信道: Socket 抽象
│   └── 物理信道: Host OS 网络栈
└── 函数调用通道
    ├── 逻辑信道: WASI Socket 函数
    └── 物理信道: Host OS Socket
```

### 04.3 信道映射

#### 04.3.1 物理信道与逻辑信道映射

**信道映射矩阵**：

| 物理信道     | 逻辑信道          | 映射关系                       | 应用场景           |
| ------------ | ----------------- | ------------------------------ | ------------------ |
| **以太网**   | VLAN              | 物理以太网映射到多个 VLAN      | 网络隔离           |
| **IP 网络**  | VXLAN             | 物理 IP 网络映射到逻辑二层     | 容器网络、虚拟网络 |
| **物理网卡** | Network Namespace | 物理网卡映射到多个逻辑网络空间 | 容器网络隔离       |
| **Host OS**  | WASI Network      | Host OS 网络栈映射到 WASI 接口 | Wasm 网络抽象      |

#### 04.3.2 各范式信道模型映射

**各范式信道映射对比**：

| 范式       | 物理信道         | 逻辑信道               | 信道抽象层级 |
| ---------- | ---------------- | ---------------------- | ------------ |
| **虚拟化** | 物理网卡         | 虚拟网卡（vNIC）       | 硬件级抽象   |
| **容器化** | 物理网卡（共享） | Network Namespace      | 进程级抽象   |
| **沙盒化** | Host OS 网络栈   | WASI Network（Socket） | 应用级抽象   |

---

## 05. 网卡模型

### 05.1 物理网卡

#### 05.1.1 物理网卡定义

**物理网卡（Physical Network Interface Card, Physical NIC）定义**：

物理网卡是安装在计算机主板或扩展槽上的硬件设备，负责将计算机连接到物理网络，实现
数据的发送和接收。

**物理网卡特征**：

1. **硬件实现**：

   - **MAC 地址**：物理地址，全球唯一
   - **接口类型**：RJ-45（以太网）、SFP+（光纤）、WiFi
   - **传输速率**：1Gbps、10Gbps、25Gbps、100Gbps

2. **功能特性**：

   - **数据链路层**：帧的发送和接收
   - **介质访问控制**：CSMA/CD（以太网）
   - **全双工通信**：现代网卡支持全双工

3. **驱动程序**：
   - **网卡驱动**：操作系统与网卡的接口
   - **驱动类型**：开源驱动、厂商驱动

#### 05.1.2 物理网卡在技术栈中的作用

**物理网卡位置**：

```text
物理网卡在技术栈中的位置:

物理硬件层:
├── 物理网卡（NIC）
│   ├── MAC 地址（全球唯一）
│   ├── 接口类型（RJ-45、SFP+、WiFi）
│   ├── 传输速率（1Gbps - 100Gbps）
│   └── 驱动程序（操作系统驱动）
└── 网络线缆
    ├── 双绞线（Cat6/Cat6a）
    ├── 光纤（单模/多模）
    └── 无线（WiFi、5G）

操作系统层:
├── 网卡驱动程序
│   ├── 数据链路层驱动
│   └── 网络协议栈接口
└── 网络协议栈
    ├── 物理层接口
    └── 数据链路层接口
```

### 05.2 虚拟网卡

#### 05.2.1 虚拟网卡定义

**虚拟网卡（Virtual Network Interface Card, vNIC）定义**：

虚拟网卡是通过软件模拟的网卡设备，为虚拟机提供网络连接功能，映射到物理网卡或虚拟
交换机。

**虚拟网卡特征**：

1. **软件实现**：

   - **虚拟 MAC 地址**：软件分配的 MAC 地址
   - **虚拟接口**：软件定义的网络接口
   - **虚拟队列**：发送队列和接收队列

2. **虚拟化技术**：

   - **VirtIO Net**：半虚拟化网卡驱动（性能高）
   - **E1000 模拟**：全虚拟化网卡模拟（兼容性好）
   - **SR-IOV**：硬件虚拟化网卡（性能最高）

3. **网络虚拟化**：
   - **虚拟交换机**：vSwitch（Open vSwitch、Linux Bridge）
   - **虚拟网络**：VLAN、VXLAN

#### 05.2.2 虚拟网卡在技术栈中的作用

**虚拟网卡映射**：

```text
虚拟化网卡模型:

Hypervisor 层:
├── 虚拟交换机（vSwitch）
│   ├── Open vSwitch
│   ├── Linux Bridge
│   └── VMware vSwitch
└── 虚拟网卡（vNIC）
    ├── VirtIO Net（半虚拟化，性能高）
    ├── E1000 模拟（全虚拟化，兼容性好）
    └── SR-IOV（硬件虚拟化，性能最高）

Guest OS 层:
├── 虚拟网卡驱动
│   ├── VirtIO 驱动（Guest OS）
│   └── E1000 驱动（Guest OS）
└── Guest OS 网络栈
    ├── 网络协议栈
    └── 应用程序

物理网卡层:
└── 物理网卡（NIC）
    └── 物理网络
```

**虚拟网卡类型对比**：

| 虚拟网卡类型   | 虚拟化方式 | 性能 | 兼容性 | 应用场景           |
| -------------- | ---------- | ---- | ------ | ------------------ |
| **VirtIO Net** | 半虚拟化   | 高   | 中等   | KVM、Xen           |
| **E1000 模拟** | 全虚拟化   | 中   | 高     | VMware、兼容性要求 |
| **SR-IOV**     | 硬件虚拟化 | 极高 | 低     | 高性能要求         |

### 05.3 逻辑网卡

#### 05.3.1 逻辑网卡定义

**逻辑网卡（Logical Network Interface Card）定义**：

逻辑网卡是在物理网卡或虚拟网卡之上创建的抽象网络接口，用于实现网络隔离和逻辑网络
分割。

**逻辑网卡类型**：

1. **Network Namespace 接口**：

   - **定义**：容器网络命名空间中的逻辑网卡
   - **实现**：veth pair（虚拟以太网对）
   - **应用**：容器网络隔离

2. **VLAN 接口**：

   - **定义**：在物理网卡上创建的 VLAN 逻辑接口
   - **实现**：VLAN Tag（802.1Q）
   - **应用**：网络隔离、广播域分割

3. **桥接接口**：

   - **定义**：网桥上的逻辑接口
   - **实现**：Linux Bridge、Open vSwitch
   - **应用**：网络连接、流量转发

4. **隧道接口**：

   - **定义**：隧道协议的逻辑接口
   - **实现**：VXLAN、GRE、IPSec
   - **应用**：覆盖网络、VPN

#### 05.3.2 逻辑网卡在技术栈中的作用

**逻辑网卡映射**：

```text
逻辑网卡模型:

容器化逻辑网卡:
Host OS 层:
├── 物理网卡（eth0）
└── 网桥（Bridge）
    ├── Bridge 接口（br0）
    └── veth pair
        ├── veth0（Host 端）
        └── veth1（Container 端）

Network Namespace:
├── veth1（逻辑网卡）
│   ├── IP 地址（容器 IP）
│   ├── MAC 地址（逻辑 MAC）
│   └── 网络协议栈（独立）
└── Container 应用

沙盒化逻辑网卡:
Host OS 层:
└── 物理网卡（共享）

WASI Network:
├── Socket 抽象（逻辑网卡）
│   ├── TCP Socket
│   ├── UDP Socket
│   └── Unix Socket
└── Wasm Module
    └── 网络函数调用
```

**逻辑网卡对比**：

| 逻辑网卡类型    | 抽象层级   | 实现方式          | 应用场景             |
| --------------- | ---------- | ----------------- | -------------------- |
| **veth pair**   | 进程级     | Network Namespace | 容器网络隔离         |
| **VLAN 接口**   | 数据链路层 | VLAN Tag          | 网络隔离、广播域分割 |
| **Bridge 接口** | 数据链路层 | Linux Bridge      | 网络连接、流量转发   |
| **Socket 抽象** | 应用级     | WASI Network      | Wasm 网络抽象        |

### 05.4 网卡模型映射

#### 05.4.1 网卡模型对比矩阵

**网卡模型对比**：

| 网卡类型     | 实现方式   | 抽象层级        | 性能 | 隔离强度        |
| ------------ | ---------- | --------------- | ---- | --------------- |
| **物理网卡** | 硬件实现   | 物理层          | 最高 | 物理隔离        |
| **虚拟网卡** | 软件虚拟化 | 硬件级抽象      | 中等 | 硬件级隔离      |
| **逻辑网卡** | 软件抽象   | 进程/应用级抽象 | 较高 | 进程/应用级隔离 |

#### 05.4.2 各范式网卡模型映射

**各范式网卡模型**：

| 范式         | 网卡模型               | 实现方式               | 性能特征     |
| ------------ | ---------------------- | ---------------------- | ------------ |
| **虚拟化**   | 虚拟网卡（模拟网卡）   | E1000 模拟、硬件虚拟化 | 15-40μs 延迟 |
| **半虚拟化** | 半虚拟化网卡（VirtIO） | VirtIO Net、Xen PV Net | 11-28μs 延迟 |
| **容器化**   | 逻辑网卡（veth）       | Network Namespace      | 1-10μs 延迟  |
| **沙盒化**   | Socket 抽象            | WASI Network           | < 1μs 延迟   |

---

## 06. 网络协议栈

### 06.1 OSI 七层模型

#### 06.1.1 OSI 模型定义

**OSI（Open Systems Interconnection）七层模型**：

1. **物理层（Physical Layer）**：

   - **功能**：比特流传输、物理介质
   - **设备**：网卡、集线器、中继器

2. **数据链路层（Data Link Layer）**：

   - **功能**：帧传输、错误检测、MAC 地址
   - **设备**：交换机、网桥

3. **网络层（Network Layer）**：

   - **功能**：路由、IP 地址、数据包转发
   - **设备**：路由器

4. **传输层（Transport Layer）**：

   - **功能**：端到端通信、TCP/UDP
   - **协议**：TCP、UDP

5. **会话层（Session Layer）**：

   - **功能**：会话管理、同步

6. **表示层（Presentation Layer）**：

   - **功能**：数据格式转换、加密

7. **应用层（Application Layer）**：
   - **功能**：应用协议、HTTP、DNS
   - **协议**：HTTP、HTTPS、DNS、FTP

#### 06.1.2 OSI 模型在各范式中的映射

**OSI 模型映射**：

```text
OSI 模型在各范式中的位置:

虚拟化 OSI 模型:
├── 物理层: 物理网卡
├── 数据链路层: 虚拟网卡（vNIC）
├── 网络层: Guest OS 网络协议栈
├── 传输层: Guest OS TCP/UDP
├── 会话层: Guest OS 会话管理
├── 表示层: Guest OS 数据格式
└── 应用层: Guest OS 应用程序

容器化 OSI 模型:
├── 物理层: 物理网卡（共享）
├── 数据链路层: Network Namespace + veth
├── 网络层: Host OS 网络协议栈（共享）
├── 传输层: Host OS TCP/UDP（共享）
├── 会话层: Host OS 会话管理（共享）
├── 表示层: Host OS 数据格式（共享）
└── 应用层: Container 应用程序

沙盒化 OSI 模型:
├── 物理层: 物理网卡（共享）
├── 数据链路层: Host OS 数据链路层（共享）
├── 网络层: Host OS 网络层（共享）
├── 传输层: Host OS TCP/UDP（共享）
├── 会话层: WASI Socket 抽象
├── 表示层: WASI 数据格式
└── 应用层: Wasm Module 应用程序
```

### 06.2 TCP/IP 四层模型

#### 06.2.1 TCP/IP 模型定义

**TCP/IP 四层模型**：

1. **网络接口层（Network Interface Layer）**：

   - **功能**：物理传输、数据链路
   - **对应 OSI**：物理层 + 数据链路层

2. **网络层（Internet Layer）**：

   - **功能**：IP 协议、路由、数据包转发
   - **对应 OSI**：网络层
   - **协议**：IP、ICMP、ARP

3. **传输层（Transport Layer）**：

   - **功能**：端到端通信、可靠传输
   - **对应 OSI**：传输层
   - **协议**：TCP、UDP

4. **应用层（Application Layer）**：
   - **功能**：应用协议
   - **对应 OSI**：会话层 + 表示层 + 应用层
   - **协议**：HTTP、HTTPS、DNS、FTP、SSH

#### 06.2.2 TCP/IP 模型在各范式中的映射

**TCP/IP 模型映射**：

```text
TCP/IP 模型在各范式中的位置:

虚拟化 TCP/IP 模型:
├── 网络接口层: 虚拟网卡（vNIC）→ Hypervisor → 物理网卡
├── 网络层: Guest OS IP 协议栈
├── 传输层: Guest OS TCP/UDP
└── 应用层: Guest OS 应用程序

容器化 TCP/IP 模型:
├── 网络接口层: veth → Bridge → 物理网卡（共享）
├── 网络层: Host OS IP 协议栈（共享）
├── 传输层: Host OS TCP/UDP（共享）
└── 应用层: Container 应用程序

沙盒化 TCP/IP 模型:
├── 网络接口层: Host OS 网络接口层（共享）
├── 网络层: Host OS IP 协议栈（共享）
├── 传输层: Host OS TCP/UDP（共享）
└── 应用层: Wasm Module（WASI Network）
```

### 06.3 各范式网络栈对比

#### 06.3.1 网络栈对比矩阵

**网络栈对比**：

| OSI 层次       | 虚拟化           | 容器化                  | 沙盒化                  |
| -------------- | ---------------- | ----------------------- | ----------------------- |
| **物理层**     | 物理网卡         | 物理网卡（共享）        | 物理网卡（共享）        |
| **数据链路层** | 虚拟网卡（vNIC） | veth + Bridge           | Host OS（共享）         |
| **网络层**     | Guest OS IP 栈   | Host OS IP 栈（共享）   | Host OS IP 栈（共享）   |
| **传输层**     | Guest OS TCP/UDP | Host OS TCP/UDP（共享） | Host OS TCP/UDP（共享） |
| **会话层**     | Guest OS         | Host OS（共享）         | WASI Socket             |
| **表示层**     | Guest OS         | Host OS（共享）         | WASI                    |
| **应用层**     | Guest OS App     | Container App           | Wasm Module             |

---

## 07. 虚拟化网络架构

### 07.1 虚拟化网络拓扑

#### 07.1.1 虚拟化网络拓扑结构

**虚拟化网络拓扑**：

```text
虚拟化网络拓扑:

物理拓扑层:
├── 物理交换机（Star 拓扑）
└── 物理网卡（NIC）
    └── 物理网络接口

Hypervisor 层:
├── 虚拟交换机（vSwitch）
│   ├── Open vSwitch
│   ├── Linux Bridge
│   └── VMware vSwitch
└── 虚拟网络
    ├── 内部网络（VM 间通信）
    ├── 外部网络（VM 对外通信）
    └── 管理网络（Hypervisor 管理）

Guest OS 层:
├── VM₁
│   ├── 虚拟网卡（vNIC₁）
│   ├── Guest OS 网络栈
│   └── 应用程序
├── VM₂
│   ├── 虚拟网卡（vNIC₂）
│   ├── Guest OS 网络栈
│   └── 应用程序
└── VMₙ
    ├── 虚拟网卡（vNICₙ）
    ├── Guest OS 网络栈
    └── 应用程序
```

**虚拟化网络拓扑类型**：

1. **桥接模式（Bridge Mode）**：

   - **拓扑**：VM 通过 vSwitch 桥接到物理网络
   - **特征**：VM 获得物理网络的 IP 地址段
   - **应用**：数据中心、企业网络

2. **NAT 模式（NAT Mode）**：

   - **拓扑**：VM 通过 NAT 连接到物理网络
   - **特征**：VM 使用私有 IP 地址，通过 NAT 转换
   - **应用**：开发环境、测试环境

3. **主机模式（Host-Only Mode）**：

   - **拓扑**：VM 只能与 Host 和其他 VM 通信
   - **特征**：完全隔离，无法访问外部网络
   - **应用**：安全测试、隔离环境

4. **覆盖网络模式（Overlay Mode）**：
   - **拓扑**：VM 通过 VXLAN 等覆盖网络连接
   - **特征**：逻辑二层网络，跨物理网络
   - **应用**：云环境、多租户网络

### 07.2 虚拟化网卡模型

#### 07.2.1 虚拟化网卡架构

**虚拟化网卡架构**：

```text
虚拟化网卡架构:

物理层:
└── 物理网卡（NIC）
    ├── MAC 地址
    ├── 接口类型
    └── 驱动程序

Hypervisor 层:
├── 虚拟交换机（vSwitch）
│   ├── 端口管理
│   ├── 流量转发
│   └── 虚拟网络隔离
└── 虚拟网卡（vNIC）
    ├── 虚拟 MAC 地址
    ├── VirtIO Net 接口
    └── 虚拟队列（发送/接收）

Guest OS 层:
├── VirtIO 驱动（Guest OS）
│   ├── 前端驱动
│   └── 队列管理
└── Guest OS 网络栈
    ├── 网络协议栈
    └── 应用程序接口
```

### 07.3 虚拟化网络隔离

#### 07.3.1 虚拟化网络隔离机制

**虚拟化网络隔离**：

1. **虚拟交换机隔离**：

   - **端口隔离**：不同 VM 连接到不同端口
   - **VLAN 隔离**：通过 VLAN 标签隔离
   - **流量过滤**：ACL（访问控制列表）

2. **虚拟网络隔离**：

   - **内部网络**：VM 间通信的网络
   - **外部网络**：VM 对外通信的网络
   - **管理网络**：Hypervisor 管理网络

3. **网络安全**：
   - **防火墙规则**：在 vSwitch 上配置防火墙
   - **流量监控**：网络流量监控和分析
   - **入侵检测**：网络入侵检测系统

---

## 08. 容器化网络架构

### 08.1 容器化网络拓扑

#### 08.1.1 容器化网络拓扑结构

**容器化网络拓扑**：

```text
容器化网络拓扑:

物理拓扑层:
├── 物理交换机（Star 拓扑）
└── 物理网卡（NIC）
    └── 物理网络接口

Host OS 层:
├── 网桥（Bridge）
│   ├── docker0（Docker）
│   ├── cni0（Kubernetes）
│   └── 其他网桥
├── 路由表
└── iptables（网络策略）

Network Namespace:
├── Container₁ Namespace
│   ├── veth pair（veth0 ↔ veth1）
│   ├── 逻辑网卡（eth0）
│   ├── IP 地址（容器 IP）
│   └── 网络协议栈（独立）
├── Container₂ Namespace
│   ├── veth pair（veth0 ↔ veth2）
│   ├── 逻辑网卡（eth0）
│   ├── IP 地址（容器 IP）
│   └── 网络协议栈（独立）
└── Containerₙ Namespace
    ├── veth pair（veth0 ↔ vethₙ）
    ├── 逻辑网卡（eth0）
    ├── IP 地址（容器 IP）
    └── 网络协议栈（独立）
```

**容器化网络拓扑类型**：

1. **Bridge 网络**：

   - **拓扑**：容器通过 veth 连接到 Bridge
   - **特征**：容器在同一 Bridge 上可以通信
   - **应用**：单机容器网络

2. **CNI 网络**：

   - **拓扑**：通过 CNI 插件创建网络
   - **特征**：支持多主机容器网络
   - **应用**：Kubernetes 集群网络

3. **覆盖网络**：
   - **Flannel**：VXLAN 覆盖网络
   - **Calico**：BGP 网络
   - **Weave**：覆盖网络

### 08.2 容器化网卡模型

#### 08.2.1 容器化网卡架构

**容器化网卡架构**：

```text
容器化网卡架构:

物理层:
└── 物理网卡（NIC，共享）

Host OS 层:
├── 网桥（Bridge）
│   ├── Bridge 接口（br0）
│   └── 端口管理
└── veth pair
    ├── veth0（Host 端，连接到 Bridge）
    └── veth1（Container 端，在 Network Namespace 中）

Network Namespace:
├── 逻辑网卡（eth0 = veth1）
│   ├── IP 地址（容器 IP，如 10.244.1.2）
│   ├── MAC 地址（逻辑 MAC）
│   └── 网络协议栈（独立）
└── Container 应用
    └── 网络接口调用
```

### 08.3 容器化网络隔离

#### 08.3.1 容器化网络隔离机制

**容器化网络隔离**：

1. **Network Namespace 隔离**：

   - **网络栈隔离**：每个容器拥有独立的网络协议栈
   - **IP 地址隔离**：每个容器拥有独立的 IP 地址
   - **路由表隔离**：每个容器拥有独立的路由表

2. **网络策略隔离**：

   - **NetworkPolicy**：Kubernetes 网络策略
   - **iptables 规则**：流量过滤规则
   - **防火墙规则**：容器网络防火墙

3. **CNI 网络隔离**：
   - **网络分段**：通过 CNI 插件实现网络分段
   - **VLAN 隔离**：容器网络 VLAN 隔离
   - **覆盖网络隔离**：VXLAN 网络隔离

---

## 09. 沙盒化网络架构

### 09.1 沙盒化网络拓扑

#### 09.1.1 沙盒化网络拓扑结构

**沙盒化网络拓扑**：

```text
沙盒化网络拓扑:

物理拓扑层:
├── 物理交换机（Star 拓扑）
└── 物理网卡（NIC，共享）

Host OS 层:
├── 网络协议栈（共享）
│   ├── TCP/IP 协议栈
│   ├── Socket 接口
│   └── 网络驱动
└── 网络服务
    ├── DNS 服务
    ├── 路由服务
    └── 防火墙服务

WASI Network 层:
├── WASI Socket 抽象
│   ├── TCP Socket
│   ├── UDP Socket
│   └── Unix Socket
└── Socket 函数拦截
    ├── socket()
    ├── bind()
    ├── connect()
    ├── send()
    └── recv()

Wasm Module 层:
├── Wasm Module₁
│   ├── WASI Network 调用
│   └── 网络应用程序
├── Wasm Module₂
│   ├── WASI Network 调用
│   └── 网络应用程序
└── Wasm Moduleₙ
    ├── WASI Network 调用
    └── 网络应用程序
```

**沙盒化网络拓扑特征**：

1. **共享网络栈**：

   - 所有 Wasm 模块共享 Host OS 网络协议栈
   - 无独立的网络命名空间
   - 轻量级网络抽象

2. **Socket 抽象**：

   - 通过 WASI Socket 抽象提供网络接口
   - Socket 函数调用拦截
   - 最小化网络开销

3. **网络隔离**：
   - 通过 WASI 权限控制实现网络隔离
   - Socket 权限限制
   - 网络访问控制

### 09.2 沙盒化网卡模型

#### 09.2.1 沙盒化网卡架构

**沙盒化网卡架构**：

```text
沙盒化网卡架构:

物理层:
└── 物理网卡（NIC，共享）

Host OS 层:
├── 网络协议栈（共享）
│   ├── TCP/IP 协议栈
│   └── Socket 接口
└── 网络驱动程序

WASI Network 层:
├── Socket 抽象（逻辑网卡）
│   ├── TCP Socket（逻辑网卡接口）
│   ├── UDP Socket（逻辑网卡接口）
│   └── Unix Socket（本地通信）
└── Socket 函数拦截
    ├── 函数调用拦截
    ├── 权限检查
    └── 网络访问控制

Wasm Module 层:
├── Wasm Runtime
│   ├── WASI Network 实现
│   └── Socket 函数绑定
└── Wasm Module
    └── 网络应用程序（通过 WASI Socket 调用）
```

### 09.3 沙盒化网络隔离

#### 09.3.1 沙盒化网络隔离机制

**沙盒化网络隔离**：

1. **WASI 权限隔离**：

   - **Socket 权限**：限制 Wasm 模块的 Socket 权限
   - **网络访问控制**：通过 WASI 权限控制网络访问
   - **最小权限原则**：只授予必要的网络权限

2. **Socket 抽象隔离**：

   - **Socket 隔离**：每个 Wasm 模块拥有独立的 Socket 抽象
   - **地址隔离**：Socket 地址隔离
   - **端口隔离**：端口绑定隔离

3. **函数调用拦截**：
   - **系统调用拦截**：拦截网络相关的系统调用
   - **权限检查**：在系统调用层面进行权限检查
   - **访问控制**：限制网络访问范围

---

## 10. 网络架构对比矩阵

### 10.1 网络拓扑对比矩阵

**网络拓扑对比**：

| 拓扑维度     | 虚拟化          | 半虚拟化                | 容器化            | 沙盒化           |
| ------------ | --------------- | ----------------------- | ----------------- | ---------------- |
| **物理拓扑** | Star（交换机）  | Star（交换机）          | Star（交换机）    | Star（交换机）   |
| **逻辑拓扑** | Star（vSwitch） | Star（vSwitch，协作式） | 点对点（veth）    | 点对点（Socket） |
| **网络抽象** | 硬件级抽象      | 硬件级抽象（协作）      | 进程级抽象        | 应用级抽象       |
| **网络隔离** | 虚拟交换机隔离  | 虚拟交换机隔离（协作）  | Network Namespace | WASI 权限隔离    |

### 10.2 通讯链接模式对比矩阵

**通讯链接模式对比**：

| 通讯模式     | 虚拟化               | 半虚拟化             | 容器化         | 沙盒化           |
| ------------ | -------------------- | -------------------- | -------------- | ---------------- |
| **主要模式** | 全双工（模拟）       | 全双工（VirtIO Net） | 全双工（veth） | 全双工（Socket） |
| **实现方式** | 虚拟网卡队列（模拟） | VirtIO 队列（协作）  | veth pair      | WASI Socket      |
| **延迟开销** | 15-40μs              | 11-28μs              | 1-10μs         | < 1μs            |

### 10.3 信道模型对比矩阵

**信道模型对比**：

| 信道类型     | 虚拟化           | 半虚拟化                   | 容器化            | 沙盒化           |
| ------------ | ---------------- | -------------------------- | ----------------- | ---------------- |
| **物理信道** | 物理网卡         | 物理网卡                   | 物理网卡（共享）  | 物理网卡（共享） |
| **逻辑信道** | 虚拟网卡（模拟） | 半虚拟化网卡（VirtIO Net） | Network Namespace | WASI Socket      |
| **信道抽象** | 硬件级抽象       | 硬件级抽象（协作）         | 进程级抽象        | 应用级抽象       |

### 10.4 网卡模型对比矩阵

**网卡模型对比**：

| 网卡类型     | 虚拟化           | 半虚拟化               | 容器化            | 沙盒化       |
| ------------ | ---------------- | ---------------------- | ----------------- | ------------ |
| **网卡模型** | 虚拟网卡（模拟） | 半虚拟化网卡（VirtIO） | 逻辑网卡（veth）  | Socket 抽象  |
| **实现方式** | E1000 模拟       | VirtIO Net（协作）     | Network Namespace | WASI Network |
| **性能**     | 15-40μs 延迟     | 11-28μs 延迟           | 1-10μs 延迟       | < 1μs 延迟   |
| **隔离强度** | 硬件级隔离       | 内核级隔离（协作）     | 进程级隔离        | 应用级隔离   |

### 10.5 网络协议栈对比矩阵

**网络协议栈对比**：

| 协议栈层次     | 虚拟化           | 半虚拟化                   | 容器化                  | 沙盒化                  |
| -------------- | ---------------- | -------------------------- | ----------------------- | ----------------------- |
| **物理层**     | 物理网卡         | 物理网卡                   | 物理网卡（共享）        | 物理网卡（共享）        |
| **数据链路层** | 虚拟网卡（模拟） | 半虚拟化网卡（VirtIO Net） | veth + Bridge           | Host OS（共享）         |
| **网络层**     | Guest OS IP      | Guest OS IP（修改后）      | Host OS IP（共享）      | Host OS IP（共享）      |
| **传输层**     | Guest OS TCP/UDP | Guest OS TCP/UDP（修改后） | Host OS TCP/UDP（共享） | Host OS TCP/UDP（共享） |
| **应用层**     | Guest OS App     | Guest OS App（修改后）     | Container App           | Wasm Module             |

---

## 11. 参考

**关联文档**：

- **[理论模型](../01-theory-models/)** - 技术范式背后的理论模型
- **[技术名词概念论证](technical-concepts-explanation.md)** - 技术名词概念论证
- **[资源模型](../01-theory-models/01-resource-models.md)** - 网络资源模型

**外部参考**：

- [Network Topology](https://en.wikipedia.org/wiki/Network_topology)
- [Duplex (telecommunications)](<https://en.wikipedia.org/wiki/Duplex_(telecommunications)>)
- [Network Interface Controller](https://en.wikipedia.org/wiki/Network_interface_controller)
- [OSI model](https://en.wikipedia.org/wiki/OSI_model)
- [TCP/IP model](https://en.wikipedia.org/wiki/Internet_protocol_suite)

---

**最后更新**：2025-11-02 **维护者**：项目团队
