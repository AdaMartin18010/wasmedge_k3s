# 分层抽象（Layered Abstraction）

## 📑 目录

- [分层抽象（Layered Abstraction）](#分层抽象layered-abstraction)
  - [📑 目录](#-目录)
  - [1 概述](#1-概述)
    - [1.1 Wikipedia 定义](#11-wikipedia-定义)
    - [1.2 文档定位](#12-文档定位)
  - [2 Wikipedia 定义与解释](#2-wikipedia-定义与解释)
    - [2.1 核心定义](#21-核心定义)
    - [2.2 技术原理](#22-技术原理)
    - [2.3 应用场景](#23-应用场景)
  - [3 OSI 模型](#3-osi-模型)
    - [3.1 OSI 七层模型](#31-osi-七层模型)
    - [3.2 网络分层](#32-网络分层)
    - [3.3 与软件架构的关系](#33-与软件架构的关系)
  - [4 在分层消解律中的位置](#4-在分层消解律中的位置)
    - [4.1 语义层级](#41-语义层级)
    - [4.2 消解率](#42-消解率)
    - [4.3 残留语义](#43-残留语义)
  - [5 2025 年 11 月趋势](#5-2025-年-11-月趋势)
    - [5.1 技术趋势](#51-技术趋势)
    - [5.2 架构演进](#52-架构演进)
  - [6 总结](#6-总结)
  - [7 参考资源](#7-参考资源)
    - [7.1 Wikipedia 资源](#71-wikipedia-资源)
    - [7.2 技术文档](#72-技术文档)
    - [7.3 相关文档](#73-相关文档)

---

## 1 概述

本文档基于**Wikipedia 定义**系统阐述分层抽象（Layered Abstraction）的概念、技术
原理和应用场景，并分析其在分层消解律中的位置。

### 1.1 Wikipedia 定义

**分层抽象（Layered Abstraction）**：在计算机科学中，分层抽象是一种设计模式，通
过将系统分解为多个层次，每个层次提供特定的功能，并隐藏下层实现的细节。

**来
源**：[Wikipedia - Abstraction layer](https://en.wikipedia.org/wiki/Abstraction_layer)

### 1.2 文档定位

- **目标读者**：软件架构师、系统设计师、分层抽象研究者
- **前置知识**：软件架构、网络协议、操作系统
- **关联文档**：
  - [`../02-semantic-model-perspective/01-three-layer-semantic-architecture.md`](../02-semantic-model-perspective/01-three-layer-semantic-architecture.md) -
    三层语义模型架构
  - [`../03-layered-disintegration-law/01-introduction.md`](../03-layered-disintegration-law/01-introduction.md) -
    分层消解律概述

---

## 2 Wikipedia 定义与解释

### 2.1 核心定义

**分层抽象（Layered Abstraction）**：

> **在计算机科学中，分层抽象是一种设计模式，通过将系统分解为多个层次，每个层次提
> 供特定的功能，并隐藏下层实现的细节。**

**核心特征**：

- **层次分解**：将系统分解为多个层次
- **功能封装**：每个层次提供特定的功能
- **细节隐藏**：隐藏下层实现的细节
- **接口定义**：通过接口定义层次间的交互

### 2.2 技术原理

**分层抽象技术原理**：

- **层次分解**：将系统分解为多个层次，每个层次负责特定功能
- **接口定义**：通过接口定义层次间的交互
- **细节隐藏**：隐藏下层实现的细节，上层只需关心接口
- **依赖管理**：上层依赖下层，下层不依赖上层

**典型实现**：

- **OSI 模型**：网络协议的七层模型
- **TCP/IP 模型**：网络协议的四层模型
- **操作系统分层**：操作系统的分层架构

### 2.3 应用场景

**分层抽象应用场景**：

- **网络协议**：OSI 模型、TCP/IP 模型
- **操作系统**：操作系统的分层架构
- **软件架构**：软件的分层架构
- **分布式系统**：分布式系统的分层架构

---

## 3 OSI 模型

### 3.1 OSI 七层模型

**OSI 七层模型**：

```plaintext
┌────────────────────────────────────────────────────────┐
│ 层7：应用层 (Application Layer)                        │
│ 职责：用户接口、应用程序                                │
└────────────────────────────────────────────────────────┘
                         ↓ 依赖
┌────────────────────────────────────────────────────────┐
│ 层6：表示层 (Presentation Layer)                       │
│ 职责：数据格式转换、加密                                │
└────────────────────────────────────────────────────────┘
                         ↓ 依赖
┌────────────────────────────────────────────────────────┐
│ 层5：会话层 (Session Layer)                            │
│ 职责：会话管理、同步                                    │
└────────────────────────────────────────────────────────┘
                         ↓ 依赖
┌────────────────────────────────────────────────────────┐
│ 层4：传输层 (Transport Layer)                           │
│ 职责：端到端通信、可靠性                                │
└────────────────────────────────────────────────────────┘
                         ↓ 依赖
┌────────────────────────────────────────────────────────┐
│ 层3：网络层 (Network Layer)                            │
│ 职责：路由、寻址                                        │
└────────────────────────────────────────────────────────┘
                         ↓ 依赖
┌────────────────────────────────────────────────────────┐
│ 层2：数据链路层 (Data Link Layer)                      │
│ 职责：帧传输、错误检测                                  │
└────────────────────────────────────────────────────────┘
                         ↓ 依赖
┌────────────────────────────────────────────────────────┐
│ 层1：物理层 (Physical Layer)                           │
│ 职责：比特传输、物理介质                                │
└────────────────────────────────────────────────────────┘
```

### 3.2 网络分层

**网络分层**：

- **物理层**：比特传输、物理介质
- **数据链路层**：帧传输、错误检测
- **网络层**：路由、寻址
- **传输层**：端到端通信、可靠性
- **会话层**：会话管理、同步
- **表示层**：数据格式转换、加密
- **应用层**：用户接口、应用程序

### 3.3 与软件架构的关系

**分层抽象与软件架构的关系**：

- **软件分层**：软件架构通常采用分层抽象，将系统分解为多个层次
- **接口定义**：通过接口定义层次间的交互
- **细节隐藏**：隐藏下层实现的细节，上层只需关心接口
- **依赖管理**：上层依赖下层，下层不依赖上层

---

## 4 在分层消解律中的位置

### 4.1 语义层级

**分层抽象在分层消解律中的位置**：

```plaintext
┌────────────────────────────────────────────────────────┐
│ 层3：业务领域语义层 (Domain-Specific Semantic Layer)     │
│ 职责：业务规则、领域模型、有界上下文、聚合根                  │
│ 实现：DSL、事件风暴、领域服务、Saga模式                     │
│ 不可替代性：★★★★★                                          │
└────────────────────────────────────────────────────────┘
                         ↓ 依赖
┌────────────────────────────────────────────────────────┐
│ 层2：分布式系统语义层 (Distributed System Semantic Layer) │
│ 传统职责：服务发现、负载均衡、容错、一致性、扩缩容             │
│ 新形态：被K8s/Istio/Envoy等框架"语义下沉"                  │
│ 实现：声明式配置、CRD、Service Mesh                         │
│ 不可替代性：★★☆☆☆                                          │
└────────────────────────────────────────────────────────┘
                         ↓ 依赖
┌────────────────────────────────────────────────────────┐
│ 层1：通用计算语义层 (General-Purpose Computing Layer)      │
│ 职责：资源调度、进程隔离、网络虚拟化、存储抽象                │
│ 实现：容器运行时、CNI、CSI、gVisor                         │
│ 不可替代性：★☆☆☆☆                                          │
└────────────────────────────────────────────────────────┘
```

**核心特征**：

- **语义层级**：三层语义模型架构
- **消解率**：层 2 消解率 80-95%，层 1 消解率 100%
- **残留语义**：层 3 无法被消解，必须显性设计

### 4.2 消解率

**分层抽象消解率**：

- **层 1 消解率**：100%（完全被基础设施消解）
- **层 2 消解率**：80-95%（大部分被通用框架消解）
- **层 3 消解率**：0%（无法被通用框架消解）

### 4.3 残留语义

**分层抽象残留语义**：

- **层 3 残留语义**：业务领域语义无法被消解，必须显性设计
- **原因**：业务领域语义是领域特定的，无法被通用框架消解
- **结论**：分层抽象的下层可以被消解，但上层领域语义必须显性设计

---

## 5 2025 年 11 月趋势

### 5.1 技术趋势

**2025 年 11 月技术趋势**：

1. **语义下沉**：更多分布式语义下沉至通用计算语义层
2. **领域固化**：业务领域语义层更加显性化和固化
3. **零开销抽象**：通过 WebAssembly 和 eBPF 实现零开销抽象

### 5.2 架构演进

**架构演进方向**：

- **语义下沉**：更多分布式语义下沉至通用计算语义层
- **领域固化**：业务领域语义层更加显性化和固化
- **零开销抽象**：通过 WebAssembly 和 eBPF 实现零开销抽象

---

## 6 总结

**分层抽象（Layered Abstraction）核心结论**：

1. **Wikipedia 定义**：分层抽象是一种设计模式，通过将系统分解为多个层次，每个层
   次提供特定的功能，并隐藏下层实现的细节
2. **技术原理**：通过层次分解、接口定义、细节隐藏、依赖管理实现分层抽象
3. **应用场景**：网络协议、操作系统、软件架构、分布式系统
4. **OSI 模型**：网络协议的七层模型是分层抽象的典型应用
5. **在分层消解律中的位置**：三层语义模型架构，层 2 消解率 80-95%，层 3 消解率
   0%

**核心结论**：分层抽象的下层（通用计算语义层、分布式系统语义层）可以被消解，但上
层（业务领域语义层）必须显性设计。这并非技术债务，而是**语义分工的必然结果**。

---

## 7 参考资源

### 7.1 Wikipedia 资源

- [Abstraction layer](https://en.wikipedia.org/wiki/Abstraction_layer)
- [OSI model](https://en.wikipedia.org/wiki/OSI_model)
- [Layered architecture](https://en.wikipedia.org/wiki/Layered_architecture)

### 7.2 技术文档

- [OSI Model](https://www.iso.org/standard/20269.html)
- [TCP/IP Model](https://www.rfc-editor.org/rfc/rfc1122)
- [Network Architecture](https://www.ietf.org/standards/)

### 7.3 相关文档

- [`../02-semantic-model-perspective/01-three-layer-semantic-architecture.md`](../02-semantic-model-perspective/01-three-layer-semantic-architecture.md) -
  三层语义模型架构
- [`../03-layered-disintegration-law/01-introduction.md`](../03-layered-disintegration-law/01-introduction.md) -
  分层消解律概述
- [`07-domain-driven-design.md`](07-domain-driven-design.md) - 领域驱动设计
  （Domain-Driven Design）

---
