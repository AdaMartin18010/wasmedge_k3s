# 实时推荐领域：图计算的 NP-hard 约束

## 📑 目录

- [📑 目录](#-目录)
- [1. 概述](#1-概述)
  - [1.1 核心思想](#11-核心思想)
  - [1.2 文档定位](#12-文档定位)
- [2. 推荐核心领域模型：不可消解的业务实体](#2-推荐核心领域模型不可消解的业务实体)
  - [2.1 图计算（Graph Computing）](#21-图计算graph-computing)
  - [2.2 协同过滤（Collaborative Filtering）](#22-协同过滤collaborative-filtering)
  - [2.3 实时特征工程（Real-time Feature Engineering）](#23-实时特征工程real-time-feature-engineering)
- [3. 推荐架构的分层映射](#3-推荐架构的分层映射)
- [4. 顽固残留的领域语义](#4-顽固残留的领域语义)
- [5. 云原生推荐架构实践](#5-云原生推荐架构实践)
- [6. 总结](#6-总结)
- [7. 参考资源](#7-参考资源)

---

## 1. 概述

本文档从**领域模型视角**系统分析实时推荐领域中的业务硬核如何穿透基础设施消解，重点
阐述图计算、协同过滤、实时特征工程等核心领域模型。

### 1.1 核心思想

> **基础设施的通用能力（容器/K8s）向上渗透，但推荐领域的核心语义（图计算、协同过
> 滤、实时特征工程）因其 NP-hard 约束和实时性要求，反而成为架构中不可压缩的硬核
> 层。**

### 1.2 文档定位

- **目标读者**：推荐系统架构师、算法工程师、大数据工程师
- **前置知识**：推荐系统、图计算、机器学习
- **关联文档**：
  - [`../02-semantic-model-perspective/02-irreducibility-of-domain-semantics.md`](../02-semantic-model-perspective/02-irreducibility-of-domain-semantics.md) -
    领域语义无法通用化的本质原因
  - [`../03-layered-disintegration-law/01-introduction.md`](../03-layered-disintegration-law/01-introduction.md) -
    分层消解律概述

---

## 2. 推荐核心领域模型：不可消解的业务实体

### 2.1 图计算（Graph Computing）

**图计算核心特征**：

- **本质**：复杂的图算法，NP-hard 约束
- **不变性**：图算法结果必须可解释、可追溯
- **业务规则**：用户相似度计算必须实时，图遍历必须高效

**为何无法消解**：

- **NP-hard 约束**：图算法是 NP-hard 问题，K8s 无法优化
- **算法复杂度**：图算法复杂度是算法特性，K8s 无法改变
- **业务规则**：相似度计算、图遍历是业务规则，K8s 无法理解

### 2.2 协同过滤（Collaborative Filtering）

**协同过滤核心特征**：

- **本质**：基于用户行为的推荐算法
- **不变性**：推荐结果必须基于用户历史行为
- **业务规则**：冷启动用户需要特殊处理，新物品需要特殊推荐

**为何无法消解**：

- **算法逻辑**：协同过滤算法是业务规则，K8s 无法理解
- **业务规则**：冷启动、新物品处理是业务规则，K8s 无法理解
- **实时性**：推荐结果必须实时，K8s 无法保证

### 2.3 实时特征工程（Real-time Feature Engineering）

**实时特征工程核心特征**：

- **本质**：实时特征提取和计算
- **不变性**：特征计算必须实时、准确
- **业务规则**：用户特征必须实时更新，物品特征必须实时计算

**为何无法消解**：

- **实时性**：特征计算必须实时，K8s 无法保证
- **业务规则**：特征提取规则是业务规则，K8s 无法理解
- **计算复杂度**：特征计算复杂度是算法特性，K8s 无法改变

---

## 3. 推荐架构的分层映射

**推荐架构分层映射**：

```plaintext
┌────────────────────────────────────────────────────────┐
│ 层5：推荐业务语义硬核层（不可消解）                      │
│ - 图计算、协同过滤、实时特征工程                         │
│ 消解率：0%                                               │
└────────────────────────────────────────────────────────┘
                         ↓ 依赖
┌────────────────────────────────────────────────────────┐
│ 层4：分布式系统语义层（部分消解）                         │
│ - 服务发现、负载均衡、容错                               │
│ 消解率：70%（K8s原生支持，但实时性要求限制）              │
└────────────────────────────────────────────────────────┘
                         ↓ 依赖
┌────────────────────────────────────────────────────────┐
│ 层3：通用基础设施语义层（完全消解）                       │
│ - 容器隔离、网络、存储                                   │
│ 消解率：100%（K8s基础设施）                               │
└────────────────────────────────────────────────────────┘
```

---

## 4. 顽固残留的领域语义

1. **图计算**：图算法的 NP-hard 约束，无法被通用框架消解
2. **协同过滤**：协同过滤算法的业务规则，无法被通用框架消解
3. **实时特征工程**：实时特征计算的实时性要求，无法被通用框架消解

---

## 5. 云原生推荐架构实践

**云原生推荐架构策略**：

- **图计算**：使用图计算引擎（如 Spark GraphX），K8s 管理图计算服务
- **协同过滤**：使用推荐引擎（如 TensorFlow Serving），K8s 管理推荐服务
- **实时特征工程**：使用流处理引擎（如 Flink），K8s 管理流处理服务

---

## 6. 总结

**推荐领域的核心启示**：

1. **图计算、协同过滤、实时特征工程是推荐领域的核心知识**
2. **这些领域语义无法被通用框架消解**
3. **云原生推荐架构需要领域层"寄生"于通用层，同时满足实时性要求**

---

## 7. 参考资源

### 7.1 Wikipedia 资源

- [Recommender System](https://en.wikipedia.org/wiki/Recommender_system) - 推荐系统
- [Graph Theory](https://en.wikipedia.org/wiki/Graph_theory) - 图论
- [NP-hard](https://en.wikipedia.org/wiki/NP-hardness) - NP-hard 问题

### 7.2 相关文档

- [`../02-semantic-model-perspective/02-irreducibility-of-domain-semantics.md`](../02-semantic-model-perspective/02-irreducibility-of-domain-semantics.md) -
  领域语义无法通用化的本质原因
- [`../03-layered-disintegration-law/01-introduction.md`](../03-layered-disintegration-law/01-introduction.md) -
  分层消解律概述

---

**最后更新**：2025-11-08 **维护者**：项目团队

