# é€‚é…å™¨/æ¡¥æ¥æ¨¡å¼ï¼šè·¨æŠ€æœ¯è¾¹ç•Œ

## ğŸ“‘ ç›®å½•

- [ğŸ“‘ ç›®å½•](#-ç›®å½•)
- [1 æ¦‚è¿°](#1-æ¦‚è¿°)
  - [1.1 æ ¸å¿ƒæ€æƒ³](#11-æ ¸å¿ƒæ€æƒ³)
- [2 é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰](#2-é€‚é…å™¨æ¨¡å¼adapter-pattern)
  - [2.1 å®šä¹‰](#21-å®šä¹‰)
  - [2.2 å…¸å‹åœºæ™¯](#22-å…¸å‹åœºæ™¯)
    - [2.2.1 gRPC â†” REST](#221-grpc--rest)
    - [2.2.2 Docker â†” Kubernetes](#222-docker--kubernetes)
  - [2.3 å½¢å¼åŒ–å®šä¹‰](#23-å½¢å¼åŒ–å®šä¹‰)
- [3 æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰](#3-æ¡¥æ¥æ¨¡å¼bridge-pattern)
  - [3.1 å®šä¹‰](#31-å®šä¹‰)
  - [3.2 å…¸å‹åœºæ™¯](#32-å…¸å‹åœºæ™¯)
    - [3.2.1 ODBC â†” JDBC](#321-odbc--jdbc)
    - [3.2.2 å®¹å™¨è¿è¡Œæ—¶æ¡¥æ¥](#322-å®¹å™¨è¿è¡Œæ—¶æ¡¥æ¥)
  - [3.3 å½¢å¼åŒ–å®šä¹‰](#33-å½¢å¼åŒ–å®šä¹‰)
- [4 Service Mesh ä¸­çš„é€‚é…å™¨](#4-service-mesh-ä¸­çš„é€‚é…å™¨)
  - [4.1 Envoy é€‚é…å™¨](#41-envoy-é€‚é…å™¨)
  - [4.2 Istio é€‚é…å™¨](#42-istio-é€‚é…å™¨)
  - [4.3 ç¤ºä¾‹é…ç½®](#43-ç¤ºä¾‹é…ç½®)
- [5 å®¹å™¨è¿è¡Œæ—¶é€‚é…å™¨](#5-å®¹å™¨è¿è¡Œæ—¶é€‚é…å™¨)
  - [5.1 CRI é€‚é…å™¨](#51-cri-é€‚é…å™¨)
  - [5.2 RuntimeClass](#52-runtimeclass)
- [6 ç½‘ç»œé€‚é…å™¨](#6-ç½‘ç»œé€‚é…å™¨)
  - [6.1 CNI é€‚é…å™¨](#61-cni-é€‚é…å™¨)
  - [6.2 ç½‘ç»œæ¡¥æ¥](#62-ç½‘ç»œæ¡¥æ¥)
- [7 æœ€ä½³å®è·µ](#7-æœ€ä½³å®è·µ)
  - [7.1 é€‚é…å™¨è®¾è®¡åŸåˆ™](#71-é€‚é…å™¨è®¾è®¡åŸåˆ™)
  - [7.2 æ¡¥æ¥è®¾è®¡åŸåˆ™](#72-æ¡¥æ¥è®¾è®¡åŸåˆ™)
- [8 ç›¸å…³æ–‡æ¡£](#8-ç›¸å…³æ–‡æ¡£)
  - [8.1 ç»„åˆæ¨¡å¼æ–‡æ¡£](#81-ç»„åˆæ¨¡å¼æ–‡æ¡£)
  - [8.2 å‚è€ƒèµ„æº](#82-å‚è€ƒèµ„æº)
- [9 æ€»ç»“](#9-æ€»ç»“)

---

## 1 æ¦‚è¿°

**é€‚é…å™¨/æ¡¥æ¥æ¨¡å¼**ç”¨äºè®©**ä¸åŒæŠ€æœ¯æ ˆ**çš„ç»„ä»¶èƒ½å¤Ÿæ— ç¼åä½œï¼Œå®ç°è·¨æŠ€æœ¯è¾¹ç•Œçš„ç»„åˆ
ã€‚

### 1.1 æ ¸å¿ƒæ€æƒ³

> **è®©æ—§ç³»ç»Ÿä¸æ–°æ¨¡å—æ— ç¼è¡”æ¥ï¼Œæˆ–è®©ä¸åŒæŠ€æœ¯æ ˆçš„ç»„ä»¶èƒ½å¤Ÿäº’æ“ä½œ**

## 2 é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰

### 2.1 å®šä¹‰

**é€‚é…å™¨æ¨¡å¼**å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œä½¿åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸
èƒ½ä¸€èµ·å·¥ä½œçš„ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚

### 2.2 å…¸å‹åœºæ™¯

#### 2.2.1 gRPC â†” REST

**åœºæ™¯**ï¼šå‰ç«¯ä½¿ç”¨ RESTï¼Œåç«¯ä½¿ç”¨ gRPC

**è§£å†³æ–¹æ¡ˆ**ï¼š

- **gRPC-Gateway**ï¼šå°† gRPC æœåŠ¡æš´éœ²ä¸º REST API
- **Envoy**ï¼šåœ¨ Service Mesh ä¸­è‡ªåŠ¨è½¬æ¢

**ç¤ºä¾‹**ï¼š

```yaml
# gRPC-Gateway é…ç½®
apiVersion: v1
kind: Service
metadata:
  name: grpc-gateway
spec:
  ports:
    - name: http
      port: 8080
      targetPort: 9090
    - name: grpc
      port: 9090
      targetPort: 9090
```

#### 2.2.2 Docker â†” Kubernetes

**åœºæ™¯**ï¼šä» Docker Compose è¿ç§»åˆ° Kubernetes

**è§£å†³æ–¹æ¡ˆ**ï¼š

- **Kompose**ï¼šå°† Docker Compose è½¬æ¢ä¸º Kubernetes YAML
- **Docker Desktop**ï¼šåœ¨æœ¬åœ°è¿è¡Œ Kubernetes

**ç¤ºä¾‹**ï¼š

```bash
# ä½¿ç”¨ Kompose è½¬æ¢
kompose convert
```

### 2.3 å½¢å¼åŒ–å®šä¹‰

```text
é€‚é…å™¨ A = âŸ¨source, target, transformâŸ©
å…¶ä¸­ï¼š
- source: æºæ¥å£
- target: ç›®æ ‡æ¥å£
- transform: è½¬æ¢å‡½æ•°
```

## 3 æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰

### 3.1 å®šä¹‰

**æ¡¥æ¥æ¨¡å¼**å°†æŠ½è±¡éƒ¨åˆ†ä¸å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚

### 3.2 å…¸å‹åœºæ™¯

#### 3.2.1 ODBC â†” JDBC

**åœºæ™¯**ï¼šè·¨æ•°æ®åº“è®¿é—®

**è§£å†³æ–¹æ¡ˆ**ï¼š

- **ODBC**ï¼šå¼€æ”¾æ•°æ®åº“è¿æ¥æ ‡å‡†
- **JDBC**ï¼šJava æ•°æ®åº“è¿æ¥
- **æ¡¥æ¥å±‚**ï¼šODBC-JDBC Bridge

#### 3.2.2 å®¹å™¨è¿è¡Œæ—¶æ¡¥æ¥

**åœºæ™¯**ï¼šåœ¨ä¸åŒå®¹å™¨è¿è¡Œæ—¶ä¹‹é—´åˆ‡æ¢

**è§£å†³æ–¹æ¡ˆ**ï¼š

- **CRI (Container Runtime Interface)**ï¼šKubernetes å®¹å™¨è¿è¡Œæ—¶æ¥å£
- **containerd**ï¼šå®ç° CRI çš„å®¹å™¨è¿è¡Œæ—¶
- **CRI-O**ï¼šå¦ä¸€ä¸ª CRI å®ç°

**ç¤ºä¾‹**ï¼š

```yaml
# Kubernetes é…ç½®ä¸åŒçš„è¿è¡Œæ—¶
apiVersion: node.k8s.io/v1
kind: RuntimeClass
metadata:
  name: kata
handler: kata
```

### 3.3 å½¢å¼åŒ–å®šä¹‰

```text
æ¡¥æ¥ B = âŸ¨abstraction, implementation, bridgeâŸ©
å…¶ä¸­ï¼š
- abstraction: æŠ½è±¡å±‚
- implementation: å®ç°å±‚
- bridge: æ¡¥æ¥å±‚
```

## 4 Service Mesh ä¸­çš„é€‚é…å™¨

### 4.1 Envoy é€‚é…å™¨

**Envoy** ä½œä¸º Service Mesh çš„æ•°æ®å¹³é¢ï¼Œæä¾›å¤šç§é€‚é…å™¨ï¼š

- **HTTP â†’ gRPC**ï¼šè‡ªåŠ¨è½¬æ¢
- **gRPC â†’ HTTP**ï¼šè‡ªåŠ¨è½¬æ¢
- **WebSocket â†’ HTTP**ï¼šåè®®è½¬æ¢
- **TCP â†’ HTTP**ï¼šåè®®å‡çº§

### 4.2 Istio é€‚é…å™¨

**Istio** æä¾›å¤šç§é€‚é…å™¨ï¼š

- **Prometheus**ï¼šæŒ‡æ ‡é€‚é…å™¨
- **Jaeger**ï¼šè¿½è¸ªé€‚é…å™¨
- **Fluentd**ï¼šæ—¥å¿—é€‚é…å™¨

### 4.3 ç¤ºä¾‹é…ç½®

```yaml
# Istio Adapter é…ç½®
apiVersion: config.istio.io/v1alpha2
kind: adapter
metadata:
  name: prometheus
spec:
  config:
    metrics:
      - name: requests_total
        type: COUNTER
```

## 5 å®¹å™¨è¿è¡Œæ—¶é€‚é…å™¨

### 5.1 CRI é€‚é…å™¨

**CRI (Container Runtime Interface)** æ˜¯ Kubernetes çš„å®¹å™¨è¿è¡Œæ—¶æ¥å£ï¼Œæä¾›ï¼š

- **containerd**ï¼šå®ç° CRI
- **CRI-O**ï¼šå¦ä¸€ä¸ª CRI å®ç°
- **Docker**ï¼šé€šè¿‡ containerd é€‚é…

### 5.2 RuntimeClass

**RuntimeClass** å…è®¸åœ¨ Pod çº§åˆ«é€‰æ‹©ä¸åŒçš„å®¹å™¨è¿è¡Œæ—¶ï¼š

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: my-pod
spec:
  runtimeClassName: kata
  containers:
    - name: my-container
      image: my-image
```

## 6 ç½‘ç»œé€‚é…å™¨

### 6.1 CNI é€‚é…å™¨

**CNI (Container Network Interface)** æ˜¯ Kubernetes çš„ç½‘ç»œæ¥å£ï¼Œæä¾›ï¼š

- **Calico**ï¼šç½‘ç»œç­–ç•¥
- **Flannel**ï¼šç®€å•ç½‘ç»œ
- **Cilium**ï¼šeBPF ç½‘ç»œ

### 6.2 ç½‘ç»œæ¡¥æ¥

**ç½‘ç»œæ¡¥æ¥**ç”¨äºè¿æ¥ä¸åŒçš„ç½‘ç»œï¼š

- **VXLAN**ï¼šè™šæ‹Ÿæ‰©å±•å±€åŸŸç½‘
- **Geneve**ï¼šé€šç”¨ç½‘ç»œè™šæ‹ŸåŒ–å°è£…
- **Bridge**ï¼šLinux æ¡¥æ¥

## 7 æœ€ä½³å®è·µ

### 7.1 é€‚é…å™¨è®¾è®¡åŸåˆ™

1. **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªé€‚é…å™¨åªè´Ÿè´£ä¸€ç§è½¬æ¢
2. **æ¥å£ç¨³å®š**ï¼šé€‚é…å™¨æ¥å£åº”è¯¥ç¨³å®š
3. **æ€§èƒ½ä¼˜åŒ–**ï¼šå‡å°‘è½¬æ¢å¼€é”€
4. **é”™è¯¯å¤„ç†**ï¼šä¼˜é›…å¤„ç†è½¬æ¢é”™è¯¯

### 7.2 æ¡¥æ¥è®¾è®¡åŸåˆ™

1. **æŠ½è±¡ä¸å®ç°åˆ†ç¦»**ï¼šæŠ½è±¡å±‚å’Œå®ç°å±‚åº”è¯¥ç‹¬ç«‹
2. **æ¥å£è®¾è®¡**ï¼šå®šä¹‰æ¸…æ™°çš„æ¥å£
3. **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒå¤šç§å®ç°
4. **æ€§èƒ½è€ƒè™‘**ï¼šå‡å°‘æ¡¥æ¥å¼€é”€

## 8 ç›¸å…³æ–‡æ¡£

### 8.1 ç»„åˆæ¨¡å¼æ–‡æ¡£

- **[ç»„åˆæ¨¡å¼æ–‡æ¡£é›†](README.md)** - ç»„åˆæ¨¡å¼æ–‡æ¡£é›†è¯´æ˜
- **[Adapter / Bridge æ¨¡å¼](./01-adapter-bridge.md)** - Adapter/Bridge æ¨¡å¼ï¼ˆæœ¬
  æ–‡ä»¶ï¼‰
- **[Service Aggregation æ¨¡å¼](./05-nsm-pattern.md#service-aggregation)** -
  Service Aggregation æ¨¡å¼ï¼ˆåœ¨æœ¬ç›®å½•ä¸­ï¼‰

### 8.2 å‚è€ƒèµ„æº

- **[REFERENCES.md](../../REFERENCES.md)** - å‚è€ƒæ ‡å‡†ã€æ¡†æ¶ã€å·¥å…·å’Œèµ„æº
- **[ACADEMIC-REFERENCES.md](../../ACADEMIC-REFERENCES.md)** - Wikipediaã€å¤§å­¦è¯¾
  ç¨‹ã€å­¦æœ¯è®ºæ–‡ç­‰å­¦æœ¯èµ„æº

## 9 æ€»ç»“

é€‚é…å™¨/æ¡¥æ¥æ¨¡å¼é€šè¿‡**è·¨æŠ€æœ¯è¾¹ç•Œ**å®ç°äº†ï¼š

1. **æ— ç¼é›†æˆ**ï¼šè®©ä¸åŒæŠ€æœ¯æ ˆçš„ç»„ä»¶èƒ½å¤Ÿåä½œ
2. **åè®®è½¬æ¢**ï¼šgRPC â†” RESTã€HTTP â†” WebSocket
3. **è¿è¡Œæ—¶é€‚é…**ï¼šå®¹å™¨è¿è¡Œæ—¶ã€ç½‘ç»œè¿è¡Œæ—¶
4. **Service Mesh é€‚é…**ï¼šEnvoyã€Istio é€‚é…å™¨
5. **å¯æ‰©å±•æ€§**ï¼šæ”¯æŒå¤šç§å®ç°å’Œè½¬æ¢

---

**æ›´æ–°æ—¶é—´**ï¼š2025-11-04 **ç‰ˆæœ¬**ï¼šv1.0 **å‚è€ƒ**ï¼š`architecture_view.md` ç¬¬
78-92 è¡Œï¼Œç»„åˆæ¨¡å¼éƒ¨åˆ†
