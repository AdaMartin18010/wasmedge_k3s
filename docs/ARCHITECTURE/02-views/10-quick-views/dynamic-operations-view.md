# åŠ¨æ€è¿ç»´æ¶æ„è§†è§’

**ç‰ˆæœ¬**ï¼šv1.0 **æœ€åæ›´æ–°**ï¼š2025-11-07 **ç»´æŠ¤è€…**ï¼šé¡¹ç›®å›¢é˜Ÿ

## ğŸ“‘ ç›®å½•

- [ğŸ“‘ ç›®å½•](#-ç›®å½•)
- [1. ç›®æ ‡ä¸è§†è§’](#1-ç›®æ ‡ä¸è§†è§’)
- [2. åŠ¨æ€è¿ç»´çš„ä¸‰å¤§æ”¯æŸ±](#2-åŠ¨æ€è¿ç»´çš„ä¸‰å¤§æ”¯æŸ±)
- [3. åŠ¨æ€è¿ç»´åœ¨å±‚æ¬¡æ¨¡å‹ä¸­çš„å®šä½](#3-åŠ¨æ€è¿ç»´åœ¨å±‚æ¬¡æ¨¡å‹ä¸­çš„å®šä½)
- [4. GitOpsï¼šä»£ç ä¸åŸºç¡€è®¾æ–½åŒæ­¥](#4-gitopsä»£ç ä¸åŸºç¡€è®¾æ–½åŒæ­¥)
- [5. Observabilityï¼šç»Ÿä¸€ç›‘æ§ã€æ—¥å¿—ã€è¿½è¸ª](#5-observabilityç»Ÿä¸€ç›‘æ§æ—¥å¿—è¿½è¸ª)
- [6. Autoscalingï¼šè‡ªåŠ¨æ‰©ç¼©å®¹](#6-autoscalingè‡ªåŠ¨æ‰©ç¼©å®¹)
- [7. åŠ¨æ€è¿ç»´ç»„åˆæ¨¡å¼](#7-åŠ¨æ€è¿ç»´ç»„åˆæ¨¡å¼)
- [8. åŠ¨æ€è¿ç»´æ¡ˆä¾‹ï¼šæ”¯ä»˜ç½‘å…³](#8-åŠ¨æ€è¿ç»´æ¡ˆä¾‹æ”¯ä»˜ç½‘å…³)
- [9. åŠ¨æ€è¿ç»´æœ€ä½³å®è·µ](#9-åŠ¨æ€è¿ç»´æœ€ä½³å®è·µ)
- [10. æ€»ç»“](#10-æ€»ç»“)
- [11. å‚è€ƒèµ„æº](#11-å‚è€ƒèµ„æº)

---

## 1. ç›®æ ‡ä¸è§†è§’

**ä»"æ¶æ„"è§’åº¦**æŠŠæ•´ä¸ª **è½¯ä»¶æ ˆ**æ‹†åˆ†ä¸º **å¯ç»„åˆã€å¯ç›‘æ§ã€å¯å¼¹æ€§** çš„å¤šå±‚ä½“ç³»ã€‚

> **åŠ¨æ€è¿ç»´**çš„ç›®æ ‡æ˜¯é€šè¿‡ **GitOpsã€Observabilityã€Autoscaling** ç­‰æŠ€æœ¯ï¼Œè®©æ•´ä¸ª
> ç³»ç»Ÿåœ¨ **è¿è¡Œæ—¶** è‡ªåŠ¨æ¼”åŒ–ï¼Œæ»¡è¶³ **å¼¹æ€§ã€å¯è§‚æµ‹ã€å®‰å…¨** çš„éœ€æ±‚ï¼Œä»è€Œå®ç°ä»
> **è®¾è®¡ â†’ æ„å»º â†’ è¿è¡Œ â†’ è¿­ä»£** çš„ç”Ÿå‘½å‘¨æœŸå®ç° **å…¨æµç¨‹å¯è¿½æº¯ã€å¯éªŒè¯**ã€‚

### æ ¸å¿ƒæ€æƒ³

1. **GitOps**ï¼šä»£ç ä¸åŸºç¡€è®¾æ–½åŒæ­¥ï¼Œé€šè¿‡ Git ä½œä¸ºå•ä¸€äº‹å®æ¥æº
2. **Observability**ï¼šç»Ÿä¸€ç›‘æ§ã€æ—¥å¿—ã€è¿½è¸ªï¼Œå½¢æˆå¯è§‚æµ‹é“¾
3. **Autoscaling**ï¼šè‡ªåŠ¨æ‰©ç¼©å®¹ï¼Œæ ¹æ®è´Ÿè½½åŠ¨æ€è°ƒæ•´èµ„æº

---

## 2. åŠ¨æ€è¿ç»´çš„ä¸‰å¤§æ”¯æŸ±

```text
åŠ¨æ€è¿ç»´ = GitOps + Observability + Autoscaling
           â”‚          â”‚              â”‚
           â”‚          â”‚              â””â”€ è‡ªåŠ¨æ‰©ç¼©å®¹
           â”‚          â””â”€ ç»Ÿä¸€ç›‘æ§ã€æ—¥å¿—ã€è¿½è¸ª
           â””â”€ ä»£ç ä¸åŸºç¡€è®¾æ–½åŒæ­¥
```

### 2.1 GitOpsï¼šä»£ç ä¸åŸºç¡€è®¾æ–½åŒæ­¥

| ç»´åº¦                    | å…³é”®æŠ€æœ¯                           | è¯´æ˜                        |
| ----------------------- | ---------------------------------- | --------------------------- |
| **æŒç»­é›†æˆ / æŒç»­äº¤ä»˜** | GitHub Actions, Argo CD            | è‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²      |
| **åŸºç¡€è®¾æ–½å³ä»£ç **      | Terraform, Helm, Kustomize, Pulumi | å£°æ˜å¼åŸºç¡€è®¾æ–½ç®¡ç†          |
| **ç‰ˆæœ¬æ§åˆ¶**            | Git (å•ä¸€äº‹å®æ¥æº)                 | æ‰€æœ‰å˜æ›´é€šè¿‡ Git æäº¤å’Œå®¡æŸ¥ |
| **è‡ªåŠ¨åŒ–éƒ¨ç½²**          | Argo CD, Flux, Jenkins X           | è‡ªåŠ¨æ£€æµ‹ Git å˜æ›´å¹¶éƒ¨ç½²     |
| **å›æ»šæœºåˆ¶**            | Git revert + è‡ªåŠ¨åŒ–å›æ»š            | å¿«é€Ÿå›æ»šåˆ°ä¹‹å‰çš„ç‰ˆæœ¬        |

### 2.2 Observabilityï¼šç»Ÿä¸€ç›‘æ§ã€æ—¥å¿—ã€è¿½è¸ª

| ç»´åº¦             | å…³é”®æŠ€æœ¯                                          | è¯´æ˜                       |
| ---------------- | ------------------------------------------------- | -------------------------- |
| **æŒ‡æ ‡ç›‘æ§**     | Prometheus, Grafana                               | æ—¶é—´åºåˆ—æŒ‡æ ‡æ”¶é›†å’Œå¯è§†åŒ–   |
| **æ—¥å¿—èšåˆ**     | Loki, ELK Stack (Elasticsearch, Logstash, Kibana) | é›†ä¸­å¼æ—¥å¿—æ”¶é›†å’Œåˆ†æ       |
| **åˆ†å¸ƒå¼è¿½è¸ª**   | OpenTelemetry, Jaeger, Tempo                      | è¯·æ±‚é“¾è·¯è¿½è¸ªå’Œæ€§èƒ½åˆ†æ     |
| **ç»Ÿä¸€é¥æµ‹**     | OpenTelemetry Collector                           | ç»Ÿä¸€çš„æ•°æ®æ”¶é›†å’Œå¯¼å‡º       |
| **å¯è§‚æµ‹æ€§åˆ†æ** | Grafana, Prometheus, Tempo                        | æŒ‡æ ‡ã€æ—¥å¿—ã€è¿½è¸ªçš„ç»Ÿä¸€åˆ†æ |

### 2.3 Autoscalingï¼šè‡ªåŠ¨æ‰©ç¼©å®¹

| ç»´åº¦                 | å…³é”®æŠ€æœ¯                               | è¯´æ˜                             |
| -------------------- | -------------------------------------- | -------------------------------- |
| **æ°´å¹³æ‰©ç¼©å®¹ (HPA)** | Kubernetes HPA, Argo Rollouts          | æ ¹æ® CPUã€å†…å­˜ç­‰æŒ‡æ ‡è‡ªåŠ¨æ‰©ç¼©å®¹   |
| **å‚ç›´æ‰©ç¼©å®¹ (VPA)** | Kubernetes VPA                         | æ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µè°ƒæ•´èµ„æºè¯·æ±‚     |
| **é›†ç¾¤æ‰©ç¼©å®¹ (CA)**  | Cluster Autoscaler                     | æ ¹æ® Pod éœ€æ±‚è‡ªåŠ¨è°ƒæ•´èŠ‚ç‚¹æ•°      |
| **åŸºäºäº‹ä»¶æ‰©ç¼©å®¹**   | Knative, KEDA                          | æ ¹æ®äº‹ä»¶ï¼ˆå¦‚æ¶ˆæ¯é˜Ÿåˆ—é•¿åº¦ï¼‰æ‰©ç¼©å®¹ |
| **è‡ªå®šä¹‰æ‰©ç¼©å®¹**     | Custom Metrics API, Prometheus Adapter | åŸºäºè‡ªå®šä¹‰æŒ‡æ ‡è¿›è¡Œæ‰©ç¼©å®¹         |

---

## 3. åŠ¨æ€è¿ç»´åœ¨å±‚æ¬¡æ¨¡å‹ä¸­çš„å®šä½

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Edge / Serverless                                        â”‚
â”‚  â””â”€ Knative + WasmEdge                                      â”‚
â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ åŠ¨æ€è¿ç»´å±‚ (GitOps + Observability)   â”‚
â”‚  â”‚  â”œâ”€ Argo CD (GitOps)                   â”‚
â”‚  â”‚  â”œâ”€ Prometheus + Grafana (Observability) â”‚
â”‚  â”‚  â”œâ”€ OpenTelemetry (Tracing)             â”‚
â”‚  â”‚  â”œâ”€ HPA / VPA (Autoscaling)             â”‚
â”‚  â”‚  â””â”€ Argo Rollouts (Progressive Delivery) â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ 2. Service Mesh / NSM (ç½‘ç»œæ²»ç†)      â”‚
â”‚  â”‚  â”œâ”€ Envoy / Istio sidecars            â”‚
â”‚  â”‚  â”œâ”€ vL3 + vWire (NSM)                 â”‚
â”‚  â”‚  â””â”€ ä¾§è½¦+OPA Policy Decisions         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ 3. Governance & Security (OPA)         â”‚
â”‚  â”‚  â”œâ”€ OPA Control Plane (OCP)           â”‚
â”‚  â”‚  â”œâ”€ Policyâ€‘asâ€‘code (Rego)             â”‚
â”‚  â”‚  â””â”€ Gatekeeper, Istio, Knative        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ 4. Runtime / Container Layer          â”‚
â”‚  â”‚  â”œâ”€ Kata, gVisor, Firecracker, WasmEdge â”‚
â”‚  â”‚  â””â”€ seccompâ€‘bpf / eBPF (Sandbox)      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ 5. Hypervisor / Kernel Layer          â”‚
â”‚  â”‚  â”œâ”€ KVM / Xen / Hyperâ€‘V               â”‚
â”‚  â”‚  â”œâ”€ Seccomp, eBPF for syscall filter â”‚
â”‚  â”‚  â””â”€ Namespaces, Cgroups              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ 6. Infrastructure / Hardware          â”‚
â”‚  â”‚  â”œâ”€ CPU, Memory, Storage              â”‚
â”‚  â”‚  â”œâ”€ SGX, TPM, microcode              â”‚
â”‚  â”‚  â””â”€ vNIC / vSwitch (VMâ€‘level)        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. GitOpsï¼šä»£ç ä¸åŸºç¡€è®¾æ–½åŒæ­¥

### 4.1 GitOps å·¥ä½œæµ

```text
å¼€å‘è€…æäº¤ä»£ç 
    â†“
Git ä»“åº“ (å•ä¸€äº‹å®æ¥æº)
    â†“
CI Pipeline (GitHub Actions / Jenkins)
    â”œâ”€ æ„å»ºé•œåƒ
    â”œâ”€ è¿è¡Œæµ‹è¯•
    â””â”€ æ¨é€é•œåƒåˆ° Registry
    â†“
GitOps æ§åˆ¶å™¨ (Argo CD / Flux)
    â”œâ”€ æ£€æµ‹ Git å˜æ›´
    â”œâ”€ æ‹‰å–æœ€æ–°é…ç½®
    â””â”€ éƒ¨ç½²åˆ° Kubernetes
    â†“
Kubernetes é›†ç¾¤
    â”œâ”€ åº”ç”¨å˜æ›´
    â””â”€ å¥åº·æ£€æŸ¥
```

### 4.2 GitOps å·¥å…·å¯¹æ¯”

| å·¥å…·          | ç‰¹ç‚¹                                      | é€‚ç”¨åœºæ™¯                    |
| ------------- | ----------------------------------------- | --------------------------- |
| **Argo CD**   | UI ç•Œé¢ã€å¤šé›†ç¾¤æ”¯æŒã€åº”ç”¨å¥åº·çŠ¶æ€ç›‘æ§     | ä¼ä¸šçº§å¤šé›†ç¾¤ GitOps         |
| **Flux**      | è½»é‡çº§ã€å£°æ˜å¼ã€Git åŸç”Ÿ                  | å•é›†ç¾¤æˆ–å°è§„æ¨¡éƒ¨ç½²          |
| **Jenkins X** | å®Œæ•´çš„ CI/CD æµæ°´çº¿ï¼Œå†…ç½® GitOps          | éœ€è¦å®Œæ•´ CI/CD æµç¨‹çš„é¡¹ç›®   |
| **Tekton**    | äº‘åŸç”Ÿ CI/CD æ¡†æ¶ï¼Œä¸ Kubernetes æ·±åº¦é›†æˆ | éœ€è¦é«˜åº¦å®šåˆ¶åŒ–çš„ CI/CD æµç¨‹ |

### 4.3 GitOps æœ€ä½³å®è·µ

1. **å•ä¸€äº‹å®æ¥æº**ï¼šæ‰€æœ‰é…ç½®å­˜å‚¨åœ¨ Git ä»“åº“ä¸­
2. **å£°æ˜å¼é…ç½®**ï¼šä½¿ç”¨ YAML/JSON æè¿°æœŸæœ›çŠ¶æ€
3. **è‡ªåŠ¨åŒ–éƒ¨ç½²**ï¼šè‡ªåŠ¨æ£€æµ‹ Git å˜æ›´å¹¶éƒ¨ç½²
4. **ç‰ˆæœ¬æ§åˆ¶**ï¼šæ‰€æœ‰å˜æ›´é€šè¿‡ Git æäº¤å’Œå®¡æŸ¥
5. **å›æ»šæœºåˆ¶**ï¼šå¿«é€Ÿå›æ»šåˆ°ä¹‹å‰çš„ç‰ˆæœ¬

---

## 5. Observabilityï¼šç»Ÿä¸€ç›‘æ§ã€æ—¥å¿—ã€è¿½è¸ª

### 5.1 OpenTelemetry ç»Ÿä¸€é¥æµ‹

```text
åº”ç”¨ / æœåŠ¡
    â†“
OpenTelemetry SDK (è‡ªåŠ¨æ³¨å…¥)
    â”œâ”€ æŒ‡æ ‡ (Metrics)
    â”œâ”€ æ—¥å¿— (Logs)
    â””â”€ è¿½è¸ª (Traces)
    â†“
OpenTelemetry Collector
    â”œâ”€ æ¥æ”¶
    â”œâ”€ å¤„ç†
    â””â”€ å¯¼å‡º
    â†“
åç«¯å­˜å‚¨
    â”œâ”€ Prometheus (æŒ‡æ ‡)
    â”œâ”€ Loki (æ—¥å¿—)
    â””â”€ Tempo / Jaeger (è¿½è¸ª)
    â†“
Grafana (ç»Ÿä¸€å¯è§†åŒ–)
```

### 5.2 å¯è§‚æµ‹æ€§ä¸‰å¤§æ”¯æŸ±

#### 5.2.1 æŒ‡æ ‡ (Metrics)

- **æ—¶é—´åºåˆ—æ•°æ®**ï¼šCPUã€å†…å­˜ã€è¯·æ±‚æ•°ã€é”™è¯¯ç‡ç­‰
- **å·¥å…·**ï¼šPrometheus, Grafana
- **ç”¨é€”**ï¼šæ€§èƒ½ç›‘æ§ã€å‘Šè­¦ã€å®¹é‡è§„åˆ’

#### 5.2.2 æ—¥å¿— (Logs)

- **ç»“æ„åŒ–æ—¥å¿—**ï¼šJSON æ ¼å¼ï¼ŒåŒ…å«æ—¶é—´æˆ³ã€çº§åˆ«ã€æ¶ˆæ¯ç­‰
- **å·¥å…·**ï¼šLoki, ELK Stack
- **ç”¨é€”**ï¼šæ•…éšœæ’æŸ¥ã€å®¡è®¡ã€åˆè§„

#### 5.2.3 è¿½è¸ª (Traces)

- **åˆ†å¸ƒå¼è¿½è¸ª**ï¼šè¯·æ±‚åœ¨å¾®æœåŠ¡é—´çš„å®Œæ•´è·¯å¾„
- **å·¥å…·**ï¼šOpenTelemetry, Jaeger, Tempo
- **ç”¨é€”**ï¼šæ€§èƒ½åˆ†æã€ä¾èµ–å…³ç³»åˆ†æ

### 5.3 Observability æœ€ä½³å®è·µ

1. **ç»Ÿä¸€é¥æµ‹**ï¼šä½¿ç”¨ OpenTelemetry ç»Ÿä¸€æ”¶é›†æŒ‡æ ‡ã€æ—¥å¿—ã€è¿½è¸ª
2. **ç»“æ„åŒ–æ—¥å¿—**ï¼šä½¿ç”¨ JSON æ ¼å¼ï¼ŒåŒ…å«ä¸°å¯Œçš„ä¸Šä¸‹æ–‡ä¿¡æ¯
3. **åˆ†å¸ƒå¼è¿½è¸ª**ï¼šåœ¨æœåŠ¡é—´ä¼ æ’­è¿½è¸ªä¸Šä¸‹æ–‡
4. **æŒ‡æ ‡æ ‡ç­¾**ï¼šä½¿ç”¨æ ‡ç­¾ï¼ˆlabelsï¼‰è¿›è¡Œå¤šç»´åˆ†æ
5. **å‘Šè­¦è§„åˆ™**ï¼šè®¾ç½®åˆç†çš„å‘Šè­¦é˜ˆå€¼å’Œé€šçŸ¥æœºåˆ¶

---

## 6. Autoscalingï¼šè‡ªåŠ¨æ‰©ç¼©å®¹

### 6.1 Kubernetes æ‰©ç¼©å®¹æœºåˆ¶

#### 6.1.1 æ°´å¹³æ‰©ç¼©å®¹ (HPA)

```yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: orders-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: orders
  minReplicas: 2
  maxReplicas: 10
  metrics:
    - type: Resource
      resource:
        name: cpu
        target:
          type: Utilization
          averageUtilization: 70
    - type: Resource
      resource:
        name: memory
        target:
          type: Utilization
          averageUtilization: 80
```

#### 6.1.2 å‚ç›´æ‰©ç¼©å®¹ (VPA)

```yaml
apiVersion: autoscaling.k8s.io/v1
kind: VerticalPodAutoscaler
metadata:
  name: orders-vpa
spec:
  targetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: orders
  updatePolicy:
    updateMode: "Auto"
```

#### 6.1.3 é›†ç¾¤æ‰©ç¼©å®¹ (CA)

```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: cluster-autoscaler-status
  namespace: kube-system
data:
  nodes: "3-10"
  scale-down-enabled: "true"
```

### 6.2 åŸºäºäº‹ä»¶çš„æ‰©ç¼©å®¹

#### 6.2.1 KEDA (Kubernetes Event-Driven Autoscaling)

```yaml
apiVersion: keda.sh/v1alpha1
kind: ScaledObject
metadata:
  name: orders-scaler
spec:
  scaleTargetRef:
    name: orders
  minReplicaCount: 1
  maxReplicaCount: 100
  triggers:
    - type: prometheus
      metadata:
        serverAddress: http://prometheus:9090
        metricName: http_requests_per_second
        threshold: "100"
```

### 6.3 Autoscaling æœ€ä½³å®è·µ

1. **åˆç†è®¾ç½®é˜ˆå€¼**ï¼šæ ¹æ®å®é™…è´Ÿè½½è®¾ç½®æ‰©ç¼©å®¹é˜ˆå€¼
2. **é¢„çƒ­æœºåˆ¶**ï¼šæ–° Pod å¯åŠ¨åè¿›è¡Œé¢„çƒ­ï¼Œé¿å…å†·å¯åŠ¨å½±å“
3. **ä¼˜é›…å…³é—­**ï¼šPod å…³é—­æ—¶ç­‰å¾…è¯·æ±‚å®Œæˆ
4. **ç›‘æ§æ‰©ç¼©å®¹äº‹ä»¶**ï¼šè®°å½•æ‰©ç¼©å®¹äº‹ä»¶ï¼Œåˆ†ææ‰©ç¼©å®¹æ¨¡å¼
5. **æˆæœ¬ä¼˜åŒ–**ï¼šåœ¨ä¿è¯æ€§èƒ½çš„å‰æä¸‹ï¼Œå°½é‡ä½¿ç”¨è¾ƒå°‘çš„èµ„æº

---

## 7. åŠ¨æ€è¿ç»´ç»„åˆæ¨¡å¼

### 7.1 GitOps + Observability

```text
Git å˜æ›´
    â†“
Argo CD éƒ¨ç½²
    â†“
åº”ç”¨å¯åŠ¨
    â†“
OpenTelemetry æ”¶é›†æŒ‡æ ‡/æ—¥å¿—/è¿½è¸ª
    â†“
Prometheus / Loki / Tempo å­˜å‚¨
    â†“
Grafana å¯è§†åŒ–
    â†“
å‘Šè­¦è§¦å‘
    â†“
è‡ªåŠ¨ä¿®å¤æˆ–é€šçŸ¥
```

### 7.2 Observability + Autoscaling

```text
Prometheus æ”¶é›†æŒ‡æ ‡
    â†“
HPA æ§åˆ¶å™¨è¯»å–æŒ‡æ ‡
    â†“
è®¡ç®—ç›®æ ‡å‰¯æœ¬æ•°
    â†“
è°ƒæ•´ Deployment å‰¯æœ¬æ•°
    â†“
æ–° Pod å¯åŠ¨
    â†“
OpenTelemetry æ”¶é›†æ–° Pod æŒ‡æ ‡
    â†“
å¾ªç¯ç›‘æ§
```

### 7.3 GitOps + Autoscaling + Observability

```text
å®Œæ•´çš„åŠ¨æ€è¿ç»´é—­ç¯ï¼š
Git å˜æ›´ â†’ CI/CD â†’ éƒ¨ç½² â†’ ç›‘æ§ â†’ æ‰©ç¼©å®¹ â†’ å›æ»šï¼ˆå¦‚æœéœ€è¦ï¼‰
```

---

## 8. åŠ¨æ€è¿ç»´æ¡ˆä¾‹ï¼šæ”¯ä»˜ç½‘å…³

### 8.1 åœºæ™¯æè¿°

- **ä¸šåŠ¡éœ€æ±‚**ï¼šæ”¯ä»˜ç½‘å…³éœ€è¦å¤„ç†é«˜å¹¶å‘è¯·æ±‚ï¼Œä¿è¯ 99.99% å¯ç”¨æ€§
- **æŠ€æœ¯æŒ‘æˆ˜**ï¼šæµé‡æ³¢åŠ¨å¤§ï¼Œéœ€è¦è‡ªåŠ¨æ‰©ç¼©å®¹ï¼›æ•…éšœéœ€è¦å¿«é€Ÿæ£€æµ‹å’Œæ¢å¤

### 8.2 æŠ€æœ¯å®ç°

#### 8.2.1 GitOps

```yaml
# payment-gateway.yaml
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: payment-gateway
spec:
  source:
    repoURL: https://github.com/company/payment-gateway
    path: k8s/
    targetRevision: main
  destination:
    server: https://kubernetes.default.svc
    namespace: payment
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
```

#### 8.2.2 Observability

```yaml
# OpenTelemetry é…ç½®
apiVersion: v1
kind: ConfigMap
metadata:
  name: otel-collector-config
data:
  config.yaml: |
    receivers:
      otlp:
        protocols:
          grpc:
            endpoint: 0.0.0.0:4317
    exporters:
      prometheus:
        endpoint: prometheus:9090
      loki:
        endpoint: loki:3100
      tempo:
        endpoint: tempo:4317
```

#### 8.2.3 Autoscaling

```yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: payment-gateway-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: payment-gateway
  minReplicas: 3
  maxReplicas: 50
  metrics:
    - type: Resource
      resource:
        name: cpu
        target:
          type: Utilization
          averageUtilization: 70
    - type: Pods
      pods:
        metric:
          name: http_requests_per_second
        target:
          type: AverageValue
          averageValue: "100"
```

### 8.3 æ•ˆæœ

- **è‡ªåŠ¨æ‰©ç¼©å®¹**ï¼šæ ¹æ®æµé‡è‡ªåŠ¨è°ƒæ•´ Pod æ•°é‡ï¼Œä» 3 ä¸ªæ‰©å±•åˆ° 50 ä¸ª
- **å¿«é€Ÿæ•…éšœæ£€æµ‹**ï¼šé€šè¿‡ Prometheus å’Œ Grafana å®æ—¶ç›‘æ§ï¼ŒP99 å»¶è¿Ÿ < 100ms
- **è‡ªåŠ¨æ¢å¤**ï¼šArgo CD è‡ªåŠ¨æ£€æµ‹é…ç½®å˜æ›´å¹¶éƒ¨ç½²ï¼Œæ•…éšœè‡ªåŠ¨æ¢å¤

---

## 9. åŠ¨æ€è¿ç»´æœ€ä½³å®è·µ

| ç»´åº¦              | æœ€ä½³å®è·µ                                            |
| ----------------- | --------------------------------------------------- |
| **GitOps**        | ä½¿ç”¨å•ä¸€ Git ä»“åº“ä½œä¸ºäº‹å®æ¥æºï¼›æ‰€æœ‰å˜æ›´é€šè¿‡ PR å®¡æŸ¥ |
| **Observability** | ä½¿ç”¨ OpenTelemetry ç»Ÿä¸€é¥æµ‹ï¼›è®¾ç½®åˆç†çš„å‘Šè­¦è§„åˆ™     |
| **Autoscaling**   | è®¾ç½®åˆç†çš„æ‰©ç¼©å®¹é˜ˆå€¼ï¼›ä½¿ç”¨é¢„çƒ­æœºåˆ¶é¿å…å†·å¯åŠ¨        |
| **ç›‘æ§**          | ç›‘æ§å…³é”®æŒ‡æ ‡ï¼ˆå»¶è¿Ÿã€é”™è¯¯ç‡ã€ååé‡ï¼‰ï¼›è®¾ç½®å‘Šè­¦      |
| **æ—¥å¿—**          | ä½¿ç”¨ç»“æ„åŒ–æ—¥å¿—ï¼›é›†ä¸­å¼æ—¥å¿—æ”¶é›†å’Œåˆ†æ                |
| **è¿½è¸ª**          | åœ¨æœåŠ¡é—´ä¼ æ’­è¿½è¸ªä¸Šä¸‹æ–‡ï¼›åˆ†æå…³é”®è·¯å¾„çš„æ€§èƒ½          |
| **æˆæœ¬ä¼˜åŒ–**      | åœ¨ä¿è¯æ€§èƒ½çš„å‰æä¸‹ï¼Œå°½é‡ä½¿ç”¨è¾ƒå°‘çš„èµ„æº              |

---

## 10. æ€»ç»“

### æ ¸å¿ƒä»·å€¼

1. **GitOps**ï¼šä»£ç ä¸åŸºç¡€è®¾æ–½åŒæ­¥ï¼Œå®ç°å£°æ˜å¼è¿ç»´
2. **Observability**ï¼šç»Ÿä¸€ç›‘æ§ã€æ—¥å¿—ã€è¿½è¸ªï¼Œå½¢æˆå¯è§‚æµ‹é“¾
3. **Autoscaling**ï¼šè‡ªåŠ¨æ‰©ç¼©å®¹ï¼Œæ ¹æ®è´Ÿè½½åŠ¨æ€è°ƒæ•´èµ„æº

### ä¸€å¥è¯å½’çº³

> **åŠ¨æ€è¿ç»´é€šè¿‡ GitOpsã€Observabilityã€Autoscaling ä¸‰å¤§æ”¯æŸ±ï¼Œè®©æ•´ä¸ªç³»ç»Ÿåœ¨è¿è¡Œæ—¶
> è‡ªåŠ¨æ¼”åŒ–ï¼Œå®ç°ä»è®¾è®¡ â†’ æ„å»º â†’ è¿è¡Œ â†’ è¿­ä»£çš„å…¨æµç¨‹å¯è¿½æº¯ã€å¯éªŒè¯**ã€‚

---

## 11. å‚è€ƒèµ„æº

- **Argo CD**ï¼š<https://argoproj.github.io/argo-cd>
- **Flux**ï¼š<https://fluxcd.io>
- **Prometheus**ï¼š<https://prometheus.io>
- **OpenTelemetry**ï¼š<https://opentelemetry.io>
- **Grafana**ï¼š<https://grafana.com>

### ç›¸å…³æ–‡æ¡£

#### è¯¦ç»†æ–‡æ¡£ï¼ˆæ¨èï¼‰

å¦‚éœ€æ·±å…¥äº†è§£åŠ¨æ€è¿ç»´çš„è¯¦ç»†å†…å®¹ï¼Œè¯·è®¿é—®ï¼š

- **[åŠ¨æ€è¿ç»´è¯¦ç»†æ–‡æ¡£é›†](../07-dynamic-operations/)** - åŒ…å«
  GitOpsã€å¯è§‚æµ‹æ€§ã€å¼¹æ€§ä¼¸ç¼©ã€CI/CDã€æ··æ²Œå·¥ç¨‹ç­‰è¯¦ç»†å†…å®¹
  - [GitOps](../07-dynamic-operations/01-gitops.md)
  - [å¯è§‚æµ‹æ€§](../07-dynamic-operations/02-observability.md)
  - [å¼¹æ€§ä¼¸ç¼©](../07-dynamic-operations/03-autoscaling.md)
  - [CI/CD](../07-dynamic-operations/04-ci-cd.md)
  - [æ··æ²Œå·¥ç¨‹](../07-dynamic-operations/05-chaos-engineering.md)

#### å®ç°ç»†èŠ‚

- **[GitOps å®ç°ç»†èŠ‚](../01-implementation/04-service-mesh/)** - GitOps å’Œ CI/CD
  æŠ€æœ¯å®ç°ç»†èŠ‚

### å­¦æœ¯èµ„æº

- **[ACADEMIC-REFERENCES.md](../ACADEMIC-REFERENCES.md)** - Wikipediaã€å¤§å­¦è¯¾ç¨‹
  ã€å­¦æœ¯è®ºæ–‡ç­‰å­¦æœ¯èµ„æº
- **[REFERENCES.md](../REFERENCES.md)** - å‚è€ƒæ ‡å‡†ã€æ¡†æ¶ã€å·¥å…·å’Œèµ„æº

---

**æ›´æ–°æ—¶é—´**ï¼š2025-11-04 **ç‰ˆæœ¬**ï¼šv1.0 **å‚è€ƒ**ï¼š`architecture_view.md` åŠ¨æ€è¿
ç»´éƒ¨åˆ†
