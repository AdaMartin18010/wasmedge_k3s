# 文档结构规范

## 📋 规范目标

统一所有文档的目录结构、标题编号系统，确保：

1. **目录格式一致**：所有文档都有统一的目录格式
2. **标题编号一致**：所有标题都使用统一的编号系统
3. **编号连续性**：编号连续，无跳号
4. **层级一致性**：标题层级和编号层级对应

## 📐 统一规范

### 1. 目录格式

**标准格式**：

```markdown
## 📑 目录

- [1. 第一级标题](#1-第一级标题)
  - [1.1 第二级标题](#11-第二级标题)
    - [1.1.1 第三级标题](#111-第三级标题)
- [2. 第一级标题](#2-第一级标题)
  - [2.1 第二级标题](#21-第二级标题)
```

**规则**：

- ✅ 使用 `## 📑 目录` 作为目录标题（带 emoji）
- ✅ 目录中的链接使用编号格式：`[1. 标题](#1-标题)`
- ✅ 子标题缩进两个空格
- ✅ 目录与正文之间用 `---` 分隔

### 2. 标题编号

**标准格式**：

```markdown
## 1. 第一级标题

### 1.1 第二级标题

#### 1.1.1 第三级标题
```

**规则**：

- ✅ 所有一级标题（`##`）必须带编号：`## 1. 标题`
- ✅ 所有二级标题（`###`）必须带编号：`### 1.1 标题`
- ✅ 所有三级标题（`####`）必须带编号：`#### 1.1.1 标题`
- ✅ 编号从 1 开始，连续递增
- ✅ 编号格式：`1.`, `1.1`, `1.1.1`（点号后有一个空格）

### 3. 编号层级

**层级对应关系**：

| Markdown 层级 | 编号格式  | 示例                 |
| ------------- | --------- | -------------------- |
| `##` (H2)     | `N.`      | `## 1. 标题`         |
| `###` (H3)    | `N.M`     | `### 1.1 标题`       |
| `####` (H4)   | `N.M.P`   | `#### 1.1.1 标题`    |
| `#####` (H5)  | `N.M.P.Q` | `##### 1.1.1.1 标题` |

**规则**：

- ✅ 一级标题编号：`1.`, `2.`, `3.`, ...
- ✅ 二级标题编号：`1.1`, `1.2`, ..., `2.1`, `2.2`, ...
- ✅ 三级标题编号：`1.1.1`, `1.1.2`, ..., `1.2.1`, ...
- ✅ 编号必须连续，不能跳号

### 4. 特殊情况处理

#### 4.1 目录中的 emoji

**规则**：

- ✅ 目录标题可以使用 emoji：`## 📑 目录`
- ✅ 目录链接中可以包含 emoji：`[📑 目录](#-目录)`
- ✅ 但正文标题编号不应包含 emoji（除非是标题的一部分）

#### 4.2 无编号标题

**规则**：

- ❌ 不允许有无编号的标题（除了文档标题 `#`）
- ✅ 所有 `##` 及以下层级标题都必须有编号

#### 4.3 编号重置

**规则**：

- ✅ 编号在文档内全局连续，不重置
- ✅ 如果某个章节被删除，后续编号需要调整

## 🔍 检查清单

每个文档必须满足以下条件：

- [ ] 有目录（`## 📑 目录`）
- [ ] 目录格式正确（带编号和链接）
- [ ] 所有一级标题（`##`）都有编号
- [ ] 所有二级标题（`###`）都有编号
- [ ] 所有三级标题（`####`）都有编号
- [ ] 编号连续，无跳号
- [ ] 目录中的编号与正文标题编号一致
- [ ] 目录链接正确（能正确跳转）

## 📝 示例

### ✅ 正确示例

```markdown
# 文档标题

## 📑 目录

- [1. 概述](#1-概述)
  - [1.1 核心思想](#11-核心思想)
  - [1.2 形式化描述](#12-形式化描述)
- [2. 详细说明](#2-详细说明)
  - [2.1 第一点](#21-第一点)
    - [2.1.1 子点](#211-子点)
  - [2.2 第二点](#22-第二点)
- [3. 总结](#3-总结)

---

## 1. 概述

### 1.1 核心思想

核心思想内容...

### 1.2 形式化描述

形式化描述内容...

## 2. 详细说明

### 2.1 第一点

#### 2.1.1 子点

子点内容...

### 2.2 第二点

第二点内容...

## 3. 总结

总结内容...
```

### ❌ 错误示例

```markdown
# 文档标题

## 目录

- [概述](#概述) <!-- ❌ 缺少编号 -->
- [详细说明](#详细说明) <!-- ❌ 缺少编号 -->

---

## 概述 <!-- ❌ 缺少编号 -->

### 核心思想 <!-- ❌ 缺少编号 -->

## 详细说明 <!-- ❌ 缺少编号 -->

### 第一点 <!-- ❌ 缺少编号 -->
```

## 🛠️ 修复指南

### 修复步骤

1. **添加目录**（如果缺失）

   - 在文档标题后添加 `## 📑 目录`
   - 列出所有标题及其编号

2. **添加标题编号**（如果缺失）

   - 为所有 `##` 标题添加编号：`## 1. 标题`
   - 为所有 `###` 标题添加编号：`### 1.1 标题`
   - 为所有 `####` 标题添加编号：`#### 1.1.1 标题`

3. **修复编号连续性**（如果跳号）

   - 检查所有编号是否连续
   - 调整跳号的编号

4. **同步目录和正文**（如果不一致）

   - 确保目录中的编号与正文标题编号一致
   - 确保目录链接正确

5. **验证链接**（最后检查）
   - 检查所有目录链接是否能正确跳转
   - 修复错误的链接

## 📊 当前状态

### 已检查的文件

- [ ] `docs/ARCHITECTURE/09-november-2025-special/03-concepts-relations/comprehensive-concept-relations.md`
- [ ] `docs/ARCHITECTURE/09-november-2025-special/01-core-themes/01-architecture-decomposition-composition.md`
- [ ] `docs/ARCHITECTURE/09-november-2025-special/02-formal-proofs/01-induction-proof-complete.md`
- [ ] `docs/ARCHITECTURE/03-composition/composition-patterns.md`
- [ ] `docs/ARCHITECTURE/09-november-2025-special/INDEX.md`

### 发现的问题

1. **目录格式不一致**：

   - 有些用 `## 📑 目录`（带 emoji）
   - 有些用 `## 目录`（不带 emoji）
   - 有些没有目录

2. **标题编号不一致**：

   - 有些文件正文标题有编号
   - 有些文件正文标题没有编号
   - 有些文件目录和正文编号不一致

3. **编号连续性**：

   - `composition-patterns.md` 中 10 之后直接跳到 12

4. **子标题层级**：
   - 层级不统一

---

**更新时间**：2025-11-05 **版本**：v1.0 **维护者**：文档规范工作组
