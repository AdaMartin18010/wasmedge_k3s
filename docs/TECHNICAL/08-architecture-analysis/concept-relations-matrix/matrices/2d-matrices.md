# 二维关系矩阵

## 📑 目录

- [二维关系矩阵](#二维关系矩阵)
  - [📑 目录](#-目录)
  - [30.4.1 技术栈层级矩阵](#3041-技术栈层级矩阵)
  - [30.4.2 功能关系矩阵](#3042-功能关系矩阵)
  - [30.4.3 依赖关系矩阵](#3043-依赖关系矩阵)
  - [30.4.4 兼容性矩阵](#3044-兼容性矩阵)

---

**最后更新**: 2025-11-06 **维护者**: 项目团队

> 📋 **主文档链
> 接**：[30.4 二维关系矩阵](../concept-relations-matrix.md#304-二维关系矩阵)

## 30.4.1 技术栈层级矩阵

| 概念         | L-0 硬件 | L-1 全虚拟 | L-2 半虚拟 | L-3 容器 | L-4 沙盒 |
| ------------ | -------- | ---------- | ---------- | -------- | -------- |
| **KVM**      | ✅ 依赖  | ✅ 实现    | ⚠️ 可选    | ❌ 无关  | ❌ 无关  |
| **virtio**   | ✅ 依赖  | ✅ 可选    | ✅ 实现    | ⚠️ 可选  | ❌ 无关  |
| **runc**     | ✅ 依赖  | ⚠️ 可选    | ⚠️ 可选    | ✅ 实现  | ❌ 无关  |
| **crun**     | ✅ 依赖  | ❌ 无关    | ❌ 无关    | ✅ 实现  | ⚠️ 可选  |
| **WasmEdge** | ✅ 依赖  | ❌ 无关    | ❌ 无关    | ✅ 可选  | ✅ 实现  |
| **gVisor**   | ✅ 依赖  | ❌ 无关    | ❌ 无关    | ✅ 可选  | ✅ 实现  |

**图例**：

- ✅ 直接依赖/实现
- ⚠️ 可选依赖/实现
- ❌ 无关系

## 30.4.2 功能关系矩阵

| 功能            | K3s     | WasmEdge | OPA     | Gatekeeper | CNI     | CSI     |
| --------------- | ------- | -------- | ------- | ---------- | ------- | ------- |
| **容器编排**    | ✅ 核心 | ❌       | ❌      | ❌         | ⚠️ 扩展 | ⚠️ 扩展 |
| **Wasm 运行时** | ⚠️ 支持 | ✅ 核心  | ❌      | ❌         | ❌      | ❌      |
| **策略决策**    | ❌      | ❌       | ✅ 核心 | ✅ 核心    | ❌      | ❌      |
| **网络管理**    | ⚠️ 支持 | ❌       | ❌      | ❌         | ✅ 核心 | ❌      |
| **存储管理**    | ⚠️ 支持 | ❌       | ❌      | ❌         | ❌      | ✅ 核心 |
| **服务发现**    | ✅ 内置 | ❌       | ❌      | ❌         | ⚠️ 扩展 | ❌      |

## 30.4.3 依赖关系矩阵

| 技术           | K3s     | containerd | crun    | WasmEdge | OPA     | Gatekeeper |
| -------------- | ------- | ---------- | ------- | -------- | ------- | ---------- |
| **K3s**        | -       | ✅ 依赖    | ⚠️ 可选 | ⚠️ 可选  | ⚠️ 可选 | ⚠️ 可选    |
| **containerd** | ⚠️ 可选 | -          | ✅ 依赖 | ⚠️ 可选  | ❌      | ❌         |
| **crun**       | ⚠️ 可选 | ✅ 集成    | -       | ✅ 支持  | ❌      | ❌         |
| **WasmEdge**   | ⚠️ 可选 | ⚠️ 可选    | ✅ 集成 | -        | ❌      | ❌         |
| **OPA**        | ⚠️ 可选 | ❌         | ❌      | ❌       | -       | ✅ 依赖    |
| **Gatekeeper** | ✅ 依赖 | ❌         | ❌      | ❌       | ✅ 依赖 | -          |

## 30.4.4 兼容性矩阵

| 技术                  | K8s 1.30+ | K3s 1.30+ | containerd | crun    | WasmEdge 0.14 |
| --------------------- | --------- | --------- | ---------- | ------- | ------------- |
| **RuntimeClass=wasm** | ✅ 原生   | ✅ 原生   | ✅ 支持    | ✅ 支持 | ✅ 支持       |
| **OPA-Wasm**          | ✅ 支持   | ✅ 支持   | ❌         | ❌      | ❌            |
| **Gatekeeper v3.15**  | ✅ 支持   | ✅ 支持   | ❌         | ❌      | ❌            |
| **CNI 插件**          | ✅ 标准   | ✅ 标准   | ✅ 标准    | ❌      | ❌            |
| **CSI 插件**          | ✅ 标准   | ✅ 标准   | ✅ 标准    | ❌      | ❌            |

---

**最后更新**：2025-11-06 **维护者**：项目团队
