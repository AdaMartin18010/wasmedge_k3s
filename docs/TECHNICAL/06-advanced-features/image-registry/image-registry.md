# 21. é•œåƒä»“åº“å’Œé•œåƒç®¡ç†ï¼šå…¨é¢æ¢³ç†

## ğŸ“‘ ç›®å½•

- [21. é•œåƒä»“åº“å’Œé•œåƒç®¡ç†ï¼šå…¨é¢æ¢³ç†](#21-é•œåƒä»“åº“å’Œé•œåƒç®¡ç†å…¨é¢æ¢³ç†)
  - [ğŸ“‘ ç›®å½•](#-ç›®å½•)
  - [21.1 æ–‡æ¡£å®šä½](#211-æ–‡æ¡£å®šä½)
  - [21.2 é•œåƒä»“åº“æŠ€æœ¯æ ˆå…¨æ™¯](#212-é•œåƒä»“åº“æŠ€æœ¯æ ˆå…¨æ™¯)
    - [21.2.1 é•œåƒä»“åº“å±‚æ¬¡ç»“æ„](#2121-é•œåƒä»“åº“å±‚æ¬¡ç»“æ„)
    - [21.2.2 æŠ€æœ¯ç»„ä»¶çŸ©é˜µ](#2122-æŠ€æœ¯ç»„ä»¶çŸ©é˜µ)
    - [21.2.3 æŠ€æœ¯æ ˆç»„åˆ](#2123-æŠ€æœ¯æ ˆç»„åˆ)
  - [21.3 é•œåƒä»“åº“æŠ€æœ¯è§„æ ¼](#213-é•œåƒä»“åº“æŠ€æœ¯è§„æ ¼)
    - [21.3.1 Docker Registry è§„æ ¼](#2131-docker-registry-è§„æ ¼)
    - [21.3.2 Harbor è§„æ ¼](#2132-harbor-è§„æ ¼)
    - [21.3.3 Nexus Repository è§„æ ¼](#2133-nexus-repository-è§„æ ¼)
    - [21.3.4 Quay è§„æ ¼](#2134-quay-è§„æ ¼)
    - [21.3.5 äº‘é•œåƒä»“åº“è§„æ ¼](#2135-äº‘é•œåƒä»“åº“è§„æ ¼)
    - [21.3.6 é•œåƒä»“åº“å¯¹æ¯”](#2136-é•œåƒä»“åº“å¯¹æ¯”)
  - [21.4 é•œåƒç®¡ç†æŠ€æœ¯è§„æ ¼](#214-é•œåƒç®¡ç†æŠ€æœ¯è§„æ ¼)
    - [21.4.1 é•œåƒç‰ˆæœ¬ç®¡ç†](#2141-é•œåƒç‰ˆæœ¬ç®¡ç†)
    - [21.4.2 é•œåƒæ ‡ç­¾ç­–ç•¥](#2142-é•œåƒæ ‡ç­¾ç­–ç•¥)
    - [21.4.3 é•œåƒç”Ÿå‘½å‘¨æœŸç®¡ç†](#2143-é•œåƒç”Ÿå‘½å‘¨æœŸç®¡ç†)
    - [21.4.4 é•œåƒæ¸…ç†ç­–ç•¥](#2144-é•œåƒæ¸…ç†ç­–ç•¥)
    - [21.4.5 é•œåƒåƒåœ¾å›æ”¶](#2145-é•œåƒåƒåœ¾å›æ”¶)
  - [21.5 é•œåƒå®‰å…¨æŠ€æœ¯è§„æ ¼](#215-é•œåƒå®‰å…¨æŠ€æœ¯è§„æ ¼)
    - [21.5.1 é•œåƒæ‰«æ](#2151-é•œåƒæ‰«æ)
    - [21.5.2 é•œåƒç­¾å](#2152-é•œåƒç­¾å)
    - [21.5.3 é•œåƒéªŒè¯](#2153-é•œåƒéªŒè¯)
    - [21.5.4 è®¿é—®æ§åˆ¶](#2154-è®¿é—®æ§åˆ¶)
  - [21.6 é•œåƒåˆ†å‘æŠ€æœ¯è§„æ ¼](#216-é•œåƒåˆ†å‘æŠ€æœ¯è§„æ ¼)
    - [21.6.1 é•œåƒæ‹‰å–ç­–ç•¥](#2161-é•œåƒæ‹‰å–ç­–ç•¥)
    - [21.6.2 é•œåƒç¼“å­˜](#2162-é•œåƒç¼“å­˜)
    - [21.6.3 é•œåƒåŒæ­¥](#2163-é•œåƒåŒæ­¥)
    - [21.6.4 é•œåƒä»£ç†](#2164-é•œåƒä»£ç†)
  - [21.7 é•œåƒä»“åº“æŠ€æœ¯æ ˆç»„åˆæ–¹æ¡ˆ](#217-é•œåƒä»“åº“æŠ€æœ¯æ ˆç»„åˆæ–¹æ¡ˆ)
    - [21.7.1 å°è§„æ¨¡é›†ç¾¤ç»„åˆ](#2171-å°è§„æ¨¡é›†ç¾¤ç»„åˆ)
    - [21.7.2 å¤§è§„æ¨¡é›†ç¾¤ç»„åˆ](#2172-å¤§è§„æ¨¡é›†ç¾¤ç»„åˆ)
    - [21.7.3 å¤šé›†ç¾¤ç»„åˆ](#2173-å¤šé›†ç¾¤ç»„åˆ)
    - [21.7.4 è¾¹ç¼˜è®¡ç®—ç»„åˆ](#2174-è¾¹ç¼˜è®¡ç®—ç»„åˆ)
  - [21.8 é•œåƒç®¡ç†æœ€ä½³å®è·µ](#218-é•œåƒç®¡ç†æœ€ä½³å®è·µ)
    - [21.8.1 é•œåƒå‘½åè§„èŒƒ](#2181-é•œåƒå‘½åè§„èŒƒ)
    - [21.8.2 é•œåƒç‰ˆæœ¬ç­–ç•¥](#2182-é•œåƒç‰ˆæœ¬ç­–ç•¥)
    - [21.8.3 é•œåƒå®‰å…¨ç­–ç•¥](#2183-é•œåƒå®‰å…¨ç­–ç•¥)
    - [21.8.4 é•œåƒä¼˜åŒ–ç­–ç•¥](#2184-é•œåƒä¼˜åŒ–ç­–ç•¥)
  - [21.9 å®é™…éƒ¨ç½²æ¡ˆä¾‹](#219-å®é™…éƒ¨ç½²æ¡ˆä¾‹)
    - [21.9.1 æ¡ˆä¾‹ 1ï¼šHarbor é«˜å¯ç”¨éƒ¨ç½²](#2191-æ¡ˆä¾‹-1harbor-é«˜å¯ç”¨éƒ¨ç½²)
    - [21.9.2 æ¡ˆä¾‹ 2ï¼šé•œåƒæ¸…ç†è‡ªåŠ¨åŒ–è„šæœ¬](#2192-æ¡ˆä¾‹-2é•œåƒæ¸…ç†è‡ªåŠ¨åŒ–è„šæœ¬)
    - [21.9.3 æ¡ˆä¾‹ 3ï¼šé•œåƒåŒæ­¥åˆ°è¾¹ç¼˜èŠ‚ç‚¹](#2193-æ¡ˆä¾‹-3é•œåƒåŒæ­¥åˆ°è¾¹ç¼˜èŠ‚ç‚¹)
    - [21.9.4 æ¡ˆä¾‹ 4ï¼šé•œåƒæ‰«æå’Œç­¾åé›†æˆ](#2194-æ¡ˆä¾‹-4é•œåƒæ‰«æå’Œç­¾åé›†æˆ)
  - [21.10 é•œåƒä»“åº“æ£€æŸ¥æ¸…å•](#2110-é•œåƒä»“åº“æ£€æŸ¥æ¸…å•)
  - [21.11 é•œåƒä»“åº“æ•…éšœæ’æŸ¥](#2111-é•œåƒä»“åº“æ•…éšœæ’æŸ¥)
    - [21.11.1 å¸¸è§é—®é¢˜](#21111-å¸¸è§é—®é¢˜)
  - [21.12 å‚è€ƒ](#2112-å‚è€ƒ)
    - [21.12.1 2025 å¹´æœ€æ–°æ›´æ–°ï¼ˆ2025-11-06ï¼‰](#21121-2025-å¹´æœ€æ–°æ›´æ–°2025-11-06)
    - [21.12.2 éš”ç¦»æ ˆç›¸å…³æ–‡æ¡£](#21122-éš”ç¦»æ ˆç›¸å…³æ–‡æ¡£)
    - [21.12.3 é•œåƒä»“åº“ç›¸å…³æ–‡æ¡£](#21123-é•œåƒä»“åº“ç›¸å…³æ–‡æ¡£)
    - [21.12.3 ç½‘ç»œå’Œå­˜å‚¨ç›¸å…³æ–‡æ¡£](#21123-ç½‘ç»œå’Œå­˜å‚¨ç›¸å…³æ–‡æ¡£)
    - [21.12.4 å¤–éƒ¨å‚è€ƒ](#21124-å¤–éƒ¨å‚è€ƒ)

---

## 21.1 æ–‡æ¡£å®šä½

æœ¬æ–‡æ¡£å…¨é¢æ¢³ç†äº‘åŸç”Ÿå®¹å™¨æŠ€æœ¯æ ˆä¸­çš„é•œåƒä»“åº“å’Œé•œåƒç®¡ç†æŠ€æœ¯ã€è§„æ ¼å’Œæœ€ä½³å®è·µï¼ŒåŒ…æ‹¬é•œ
åƒä»“åº“ï¼ˆDocker Registryã€Harborã€Nexusã€Quayã€äº‘é•œåƒä»“åº“ï¼‰ã€é•œåƒç‰ˆæœ¬ç®¡ç†ã€é•œåƒç”Ÿ
å‘½å‘¨æœŸç®¡ç†ã€é•œåƒå®‰å…¨ã€é•œåƒåˆ†å‘ç­‰æŠ€æœ¯ã€‚

**æ–‡æ¡£ç»“æ„**ï¼š

- **é•œåƒä»“åº“æŠ€æœ¯æ ˆå…¨æ™¯**ï¼šé•œåƒä»“åº“å±‚æ¬¡ç»“æ„ã€æŠ€æœ¯ç»„ä»¶çŸ©é˜µã€æŠ€æœ¯æ ˆç»„åˆ
- **é•œåƒä»“åº“æŠ€æœ¯è§„æ ¼**ï¼šDocker Registryã€Harborã€Nexusã€Quayã€äº‘é•œåƒä»“åº“è¯¦ç»†è§„æ ¼
- **é•œåƒç®¡ç†æŠ€æœ¯è§„æ ¼**ï¼šé•œåƒç‰ˆæœ¬ç®¡ç†ã€æ ‡ç­¾ç­–ç•¥ã€ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€æ¸…ç†ç­–ç•¥ã€åƒåœ¾å›æ”¶
- **é•œåƒå®‰å…¨æŠ€æœ¯è§„æ ¼**ï¼šé•œåƒæ‰«æã€é•œåƒç­¾åã€é•œåƒéªŒè¯ã€è®¿é—®æ§åˆ¶
- **é•œåƒåˆ†å‘æŠ€æœ¯è§„æ ¼**ï¼šé•œåƒæ‹‰å–ç­–ç•¥ã€é•œåƒç¼“å­˜ã€é•œåƒåŒæ­¥ã€é•œåƒä»£ç†
- **é•œåƒä»“åº“æŠ€æœ¯æ ˆç»„åˆæ–¹æ¡ˆ**ï¼šä¸åŒåœºæ™¯çš„é•œåƒä»“åº“æŠ€æœ¯æ ˆç»„åˆ
- **é•œåƒç®¡ç†æœ€ä½³å®è·µ**ï¼šé•œåƒå‘½åè§„èŒƒã€ç‰ˆæœ¬ç­–ç•¥ã€å®‰å…¨ç­–ç•¥ã€ä¼˜åŒ–ç­–ç•¥

## 21.2 é•œåƒä»“åº“æŠ€æœ¯æ ˆå…¨æ™¯

### 21.2.1 é•œåƒä»“åº“å±‚æ¬¡ç»“æ„

**é•œåƒä»“åº“å±‚æ¬¡ç»“æ„**ï¼š

```mermaid
graph TB
    A[é•œåƒæ„å»ºå±‚] --> B[é•œåƒæ¨é€]
    B --> C[é•œåƒä»“åº“<br/>Registry]
    C --> D[é•œåƒå­˜å‚¨å±‚<br/>Storage Backend]
    C --> E[é•œåƒç®¡ç†å±‚<br/>Management]

    D --> D1[æœ¬åœ°å­˜å‚¨<br/>Local Storage]
    D --> D2[å¯¹è±¡å­˜å‚¨<br/>Object Storage]
    D --> D3[äº‘å­˜å‚¨<br/>Cloud Storage]

    E --> E1[ç‰ˆæœ¬ç®¡ç†<br/>Versioning]
    E --> E2[ç”Ÿå‘½å‘¨æœŸ<br/>Lifecycle]
    E --> E3[å®‰å…¨æ‰«æ<br/>Security]
    E --> E4[è®¿é—®æ§åˆ¶<br/>Access Control]

    C --> F[é•œåƒæ‹‰å–å±‚]
    F --> G[é•œåƒç¼“å­˜<br/>Cache]
    F --> H[é•œåƒä»£ç†<br/>Proxy]

    style A fill:#e1f5ff
    style C fill:#fff4e1
    style D fill:#e6ffe6
    style E fill:#ffe6e6
    style F fill:#f0e1ff
```

**é•œåƒä»“åº“å±‚æ¬¡å®šä¹‰**ï¼š

| å±‚æ¬¡       | å®šä¹‰     | æŠ€æœ¯                       | åŠŸèƒ½               |
| ---------- | -------- | -------------------------- | ------------------ |
| **æ„å»ºå±‚** | é•œåƒæ„å»º | Dockerfileã€BuildKit       | é•œåƒæ„å»ºå’Œæ¨é€     |
| **ä»“åº“å±‚** | é•œåƒä»“åº“ | Docker Registryã€Harbor    | é•œåƒå­˜å‚¨å’Œç®¡ç†     |
| **å­˜å‚¨å±‚** | å­˜å‚¨åç«¯ | æœ¬åœ°å­˜å‚¨ã€å¯¹è±¡å­˜å‚¨ã€äº‘å­˜å‚¨ | å®é™…é•œåƒå­˜å‚¨       |
| **ç®¡ç†å±‚** | é•œåƒç®¡ç† | ç‰ˆæœ¬ç®¡ç†ã€ç”Ÿå‘½å‘¨æœŸç®¡ç†     | é•œåƒç‰ˆæœ¬å’Œç”Ÿå‘½å‘¨æœŸ |
| **æ‹‰å–å±‚** | é•œåƒæ‹‰å– | é•œåƒç¼“å­˜ã€é•œåƒä»£ç†         | é•œåƒåˆ†å‘å’Œä¼˜åŒ–     |

### 21.2.2 æŠ€æœ¯ç»„ä»¶çŸ©é˜µ

**é•œåƒä»“åº“æŠ€æœ¯ç»„ä»¶çŸ©é˜µ**ï¼š

| ç»„ä»¶ç±»åˆ«     | æŠ€æœ¯                  | å®šä½                 | æˆç†Ÿåº¦     | ç”Ÿäº§éªŒè¯   |
| ------------ | --------------------- | -------------------- | ---------- | ---------- |
| **é•œåƒä»“åº“** | Docker Registry       | åŸºç¡€é•œåƒä»“åº“         | â­â­â­â­â­ | â­â­â­â­â­ |
|              | Harbor                | ä¼ä¸šçº§é•œåƒä»“åº“       | â­â­â­â­â­ | â­â­â­â­â­ |
|              | Nexus Repository      | å¤šæ ¼å¼ä»“åº“ï¼ˆå«å®¹å™¨ï¼‰ | â­â­â­â­â­ | â­â­â­â­â­ |
|              | Quay                  | Red Hat é•œåƒä»“åº“     | â­â­â­â­â­ | â­â­â­â­â­ |
|              | AWS ECR               | AWS å®¹å™¨é•œåƒä»“åº“     | â­â­â­â­â­ | â­â­â­â­â­ |
|              | Azure ACR             | Azure å®¹å™¨é•œåƒä»“åº“   | â­â­â­â­â­ | â­â­â­â­â­ |
|              | GCP Artifact Registry | GCP é•œåƒä»“åº“         | â­â­â­â­â­ | â­â­â­â­â­ |
|              | Alibaba ACR           | é˜¿é‡Œäº‘å®¹å™¨é•œåƒä»“åº“   | â­â­â­â­â­ | â­â­â­â­â­ |
| **é•œåƒæ‰«æ** | Trivy                 | å¼€æºé•œåƒæ‰«æå·¥å…·     | â­â­â­â­â­ | â­â­â­â­â­ |
|              | Clair                 | CoreOS é•œåƒæ‰«æ      | â­â­â­â­   | â­â­â­â­   |
|              | Aqua                  | å•†ä¸šé•œåƒæ‰«æ         | â­â­â­â­â­ | â­â­â­â­â­ |
|              | Snyk                  | å¼€æºå®‰å…¨æ‰«æ         | â­â­â­â­â­ | â­â­â­â­â­ |
| **é•œåƒç­¾å** | Cosign                | CNCF é•œåƒç­¾åå·¥å…·    | â­â­â­â­â­ | â­â­â­â­â­ |
|              | Notary                | Docker é•œåƒç­¾å      | â­â­â­â­   | â­â­â­â­   |
| **é•œåƒç®¡ç†** | Skopeo                | é•œåƒå¤åˆ¶å’Œç®¡ç†å·¥å…·   | â­â­â­â­â­ | â­â­â­â­â­ |
|              | Crane                 | Google é•œåƒç®¡ç†å·¥å…·  | â­â­â­â­   | â­â­â­â­   |

### 21.2.3 æŠ€æœ¯æ ˆç»„åˆ

**é•œåƒä»“åº“æŠ€æœ¯æ ˆç»„åˆæ–¹æ¡ˆ**ï¼š

| åœºæ™¯           | é•œåƒä»“åº“               | é•œåƒæ‰«æ    | é•œåƒç­¾å | ç‰¹ç‚¹               |
| -------------- | ---------------------- | ----------- | -------- | ------------------ |
| **å°è§„æ¨¡é›†ç¾¤** | Docker Registry        | Trivy       | Cosign   | ç®€å•æ˜“ç”¨ã€æˆæœ¬ä½   |
| **ä¼ä¸šç¯å¢ƒ**   | Harbor                 | Trivy/Clair | Cosign   | åŠŸèƒ½ä¸°å¯Œã€å®‰å…¨å¯é  |
| **å¤šäº‘ç¯å¢ƒ**   | Harbor + äº‘ä»“åº“        | Trivy       | Cosign   | æ··åˆäº‘æ”¯æŒã€å®‰å…¨   |
| **äº‘åŸç”Ÿç¯å¢ƒ** | äº‘é•œåƒä»“åº“             | äº‘æ‰«æ      | äº‘ç­¾å   | ä¸äº‘å¹³å°æ·±åº¦é›†æˆ   |
| **è¾¹ç¼˜è®¡ç®—**   | Docker Registry + åŒæ­¥ | Trivy       | Cosign   | è½»é‡çº§ã€ç¦»çº¿æ”¯æŒ   |

## 21.3 é•œåƒä»“åº“æŠ€æœ¯è§„æ ¼

### 21.3.1 Docker Registry è§„æ ¼

**Docker Registry è§„æ ¼**ï¼š

**å®šä¹‰**ï¼šDocker Registry æ˜¯å¼€æºçš„é•œåƒä»“åº“å®ç°ï¼Œç¬¦åˆ OCI Distribution è§„èŒƒã€‚

**æŠ€æœ¯ç‰¹ç‚¹**ï¼š

- âœ… ç¬¦åˆ OCI Distribution è§„èŒƒ
- âœ… ç®€å•æ˜“éƒ¨ç½²
- âœ… æ”¯æŒå¤šç§å­˜å‚¨åç«¯
- âœ… è½»é‡çº§
- âš ï¸ åŠŸèƒ½ç›¸å¯¹åŸºç¡€

**ç‰ˆæœ¬ä¿¡æ¯**ï¼š

- **æœ€æ–°ç‰ˆæœ¬**ï¼šv2.8.3+ï¼ˆ2024ï¼‰
- **GitHub Stars**ï¼š7K+
- **ç”Ÿäº§éªŒè¯**ï¼šâœ… å¹¿æ³›ä½¿ç”¨

**å­˜å‚¨åç«¯æ”¯æŒ**ï¼š

- **æ–‡ä»¶ç³»ç»Ÿ**ï¼šæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ
- **S3**ï¼šAWS S3ã€MinIO
- **Azure**ï¼šAzure Blob Storage
- **GCS**ï¼šGoogle Cloud Storage
- **Swift**ï¼šOpenStack Swift

**é…ç½®ç¤ºä¾‹**ï¼š

```yaml
version: 0.1
storage:
  filesystem:
    rootdirectory: /var/lib/registry
  s3:
    accesskey: YOUR_ACCESS_KEY
    secretkey: YOUR_SECRET_KEY
    region: us-east-1
    bucket: my-registry
http:
  addr: :5000
  headers:
    X-Content-Type-Options: [nosniff]
```

### 21.3.2 Harbor è§„æ ¼

**Harbor è§„æ ¼**ï¼š

**å®šä¹‰**ï¼šHarbor æ˜¯ CNCF çš„ä¼ä¸šçº§é•œåƒä»“åº“ï¼Œæä¾›å®Œæ•´çš„é•œåƒç®¡ç†åŠŸèƒ½ã€‚

**æŠ€æœ¯ç‰¹ç‚¹**ï¼š

- âœ… ä¼ä¸šçº§åŠŸèƒ½
- âœ… å®‰å…¨æ‰«æé›†æˆ
- âœ… RBAC æƒé™ç®¡ç†
- âœ… é•œåƒå¤åˆ¶ï¼ˆå¤šä»“åº“åŒæ­¥ï¼‰
- âœ… é•œåƒç”Ÿå‘½å‘¨æœŸç®¡ç†
- âœ… ä¸ Kubernetes é›†æˆ
- âœ… CNCF é¡¹ç›®

**ç‰ˆæœ¬ä¿¡æ¯**ï¼š

- **æœ€æ–°ç‰ˆæœ¬**ï¼šv2.11.0+ï¼ˆ2024ï¼‰
- **GitHub Stars**ï¼š22K+
- **ç”Ÿäº§éªŒè¯**ï¼šâœ… å¤§è§„æ¨¡ç”Ÿäº§ä½¿ç”¨
- **CNCF é¡¹ç›®**ï¼šâœ… æ¯•ä¸šé¡¹ç›®

**æ ¸å¿ƒç»„ä»¶**ï¼š

1. **Registry**ï¼šé•œåƒä»“åº“ï¼ˆDocker Registryï¼‰
2. **Core**ï¼šæ ¸å¿ƒæœåŠ¡ï¼ˆAPIã€UIï¼‰
3. **Job Service**ï¼šä»»åŠ¡æœåŠ¡ï¼ˆæ‰«æã€å¤åˆ¶ï¼‰
4. **Trivy/Clair**ï¼šå®‰å…¨æ‰«æ
5. **Chart Museum**ï¼šHelm Chart ä»“åº“ï¼ˆå¯é€‰ï¼‰
6. **Notary**ï¼šé•œåƒç­¾åï¼ˆå¯é€‰ï¼‰

**åŠŸèƒ½ç‰¹æ€§**ï¼š

- âœ… é•œåƒç®¡ç†ï¼ˆç‰ˆæœ¬ã€æ ‡ç­¾ã€åˆ é™¤ï¼‰
- âœ… å®‰å…¨æ‰«æï¼ˆCVE æ¼æ´æ‰«æï¼‰
- âœ… é•œåƒç­¾åï¼ˆNotary é›†æˆï¼‰
- âœ… é•œåƒå¤åˆ¶ï¼ˆå¤šä»“åº“åŒæ­¥ï¼‰
- âœ… è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰
- âœ… é¡¹ç›®ç®¡ç†ï¼ˆå¤šç§Ÿæˆ·ï¼‰
- âœ… ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆè‡ªåŠ¨æ¸…ç†ï¼‰
- âœ… Webhook é€šçŸ¥

### 21.3.3 Nexus Repository è§„æ ¼

**Nexus Repository è§„æ ¼**ï¼š

**å®šä¹‰**ï¼šNexus Repository æ˜¯ Sonatype çš„ä»“åº“ç®¡ç†å™¨ï¼Œæ”¯æŒå¤šç§æ ¼å¼
ï¼ˆMavenã€Dockerã€npm ç­‰ï¼‰ã€‚

**æŠ€æœ¯ç‰¹ç‚¹**ï¼š

- âœ… å¤šæ ¼å¼æ”¯æŒï¼ˆMavenã€Dockerã€npmã€PyPI ç­‰ï¼‰
- âœ… ä»£ç†ä»“åº“ï¼ˆProxy Repositoryï¼‰
- âœ… ç§æœ‰ä»“åº“ï¼ˆHosted Repositoryï¼‰
- âœ… ä»“åº“ç»„ï¼ˆRepository Groupï¼‰
- âœ… å­˜å‚¨ç®¡ç†
- âš ï¸ å•†ä¸šç‰ˆåŠŸèƒ½æ›´ä¸°å¯Œ

**ç‰ˆæœ¬ä¿¡æ¯**ï¼š

- **æœ€æ–°ç‰ˆæœ¬**ï¼šNexus 3.65.0+ï¼ˆ2024ï¼‰
- **GitHub Stars**ï¼š1K+
- **ç”Ÿäº§éªŒè¯**ï¼šâœ… ä¼ä¸šç¯å¢ƒå¹¿æ³›ä½¿ç”¨

**Docker ä»“åº“ç±»å‹**ï¼š

- **Hosted Repository**ï¼šç§æœ‰ä»“åº“
- **Proxy Repository**ï¼šä»£ç†ä»“åº“
- **Repository Group**ï¼šä»“åº“ç»„

### 21.3.4 Quay è§„æ ¼

**Quay è§„æ ¼**ï¼š

**å®šä¹‰**ï¼šQuay æ˜¯ Red Hat çš„ä¼ä¸šçº§é•œåƒä»“åº“ã€‚

**æŠ€æœ¯ç‰¹ç‚¹**ï¼š

- âœ… ä¼ä¸šçº§åŠŸèƒ½
- âœ… å®‰å…¨æ‰«æï¼ˆClairï¼‰
- âœ… é•œåƒç­¾å
- âœ… é•œåƒå¤åˆ¶
- âœ… è®¿é—®æ§åˆ¶
- âœ… ä¸ OpenShift é›†æˆ
- âš ï¸ å•†ä¸šäº§å“ï¼ˆæœ‰å¼€æºç‰ˆæœ¬ï¼‰

**ç‰ˆæœ¬ä¿¡æ¯**ï¼š

- **æœ€æ–°ç‰ˆæœ¬**ï¼šv3.12.0+ï¼ˆ2024ï¼‰
- **GitHub Stars**ï¼š2K+
- **ç”Ÿäº§éªŒè¯**ï¼šâœ… Red Hat ç¯å¢ƒå¹¿æ³›ä½¿ç”¨

### 21.3.5 äº‘é•œåƒä»“åº“è§„æ ¼

**äº‘é•œåƒä»“åº“è§„æ ¼**ï¼š

**AWS ECRï¼ˆElastic Container Registryï¼‰**ï¼š

**æŠ€æœ¯ç‰¹ç‚¹**ï¼š

- âœ… ä¸ AWS æ·±åº¦é›†æˆ
- âœ… è‡ªåŠ¨é•œåƒæ‰«æ
- âœ… IAM æƒé™æ§åˆ¶
- âœ… ç”Ÿå‘½å‘¨æœŸç®¡ç†
- âœ… åŠ å¯†å­˜å‚¨

**ç‰ˆæœ¬ä¿¡æ¯**ï¼š

- **æœ€æ–°ç‰ˆæœ¬**ï¼šæŒç»­æ›´æ–°ï¼ˆ2024ï¼‰
- **ç”Ÿäº§éªŒè¯**ï¼šâœ… AWS ç¯å¢ƒå¹¿æ³›ä½¿ç”¨

**Azure ACRï¼ˆAzure Container Registryï¼‰**ï¼š

**æŠ€æœ¯ç‰¹ç‚¹**ï¼š

- âœ… ä¸ Azure æ·±åº¦é›†æˆ
- âœ… è‡ªåŠ¨é•œåƒæ‰«æ
- âœ… Azure AD æƒé™æ§åˆ¶
- âœ… ç”Ÿå‘½å‘¨æœŸç®¡ç†
- âœ… åŠ å¯†å­˜å‚¨

**ç‰ˆæœ¬ä¿¡æ¯**ï¼š

- **æœ€æ–°ç‰ˆæœ¬**ï¼šæŒç»­æ›´æ–°ï¼ˆ2024ï¼‰
- **ç”Ÿäº§éªŒè¯**ï¼šâœ… Azure ç¯å¢ƒå¹¿æ³›ä½¿ç”¨

**GCP Artifact Registry**ï¼š

**æŠ€æœ¯ç‰¹ç‚¹**ï¼š

- âœ… ä¸ GCP æ·±åº¦é›†æˆ
- âœ… è‡ªåŠ¨é•œåƒæ‰«æ
- âœ… IAM æƒé™æ§åˆ¶
- âœ… ç”Ÿå‘½å‘¨æœŸç®¡ç†
- âœ… åŠ å¯†å­˜å‚¨

**ç‰ˆæœ¬ä¿¡æ¯**ï¼š

- **æœ€æ–°ç‰ˆæœ¬**ï¼šæŒç»­æ›´æ–°ï¼ˆ2024ï¼‰
- **ç”Ÿäº§éªŒè¯**ï¼šâœ… GCP ç¯å¢ƒå¹¿æ³›ä½¿ç”¨

**Alibaba ACR**ï¼š

**æŠ€æœ¯ç‰¹ç‚¹**ï¼š

- âœ… ä¸é˜¿é‡Œäº‘æ·±åº¦é›†æˆ
- âœ… è‡ªåŠ¨é•œåƒæ‰«æ
- âœ… RAM æƒé™æ§åˆ¶
- âœ… ç”Ÿå‘½å‘¨æœŸç®¡ç†
- âœ… åŠ å¯†å­˜å‚¨

**ç‰ˆæœ¬ä¿¡æ¯**ï¼š

- **æœ€æ–°ç‰ˆæœ¬**ï¼šæŒç»­æ›´æ–°ï¼ˆ2024ï¼‰
- **ç”Ÿäº§éªŒè¯**ï¼šâœ… é˜¿é‡Œäº‘ç¯å¢ƒå¹¿æ³›ä½¿ç”¨

### 21.3.6 é•œåƒä»“åº“å¯¹æ¯”

**é•œåƒä»“åº“å¯¹æ¯”çŸ©é˜µ**ï¼š

| é•œåƒä»“åº“                  | å®šä½             | åŠŸèƒ½ä¸°å¯Œåº¦ | æ˜“ç”¨æ€§     | å®‰å…¨æ€§     | æˆç†Ÿåº¦     | æ¨èåœºæ™¯       |
| ------------------------- | ---------------- | ---------- | ---------- | ---------- | ---------- | -------------- |
| **Docker Registry**       | åŸºç¡€é•œåƒä»“åº“     | â­â­â­     | â­â­â­â­â­ | â­â­â­     | â­â­â­â­â­ | ç®€å•åœºæ™¯ã€å¼€å‘ |
| **Harbor**                | ä¼ä¸šçº§é•œåƒä»“åº“   | â­â­â­â­â­ | â­â­â­â­   | â­â­â­â­â­ | â­â­â­â­â­ | ä¼ä¸šç¯å¢ƒã€ç”Ÿäº§ |
| **Nexus Repository**      | å¤šæ ¼å¼ä»“åº“       | â­â­â­â­   | â­â­â­â­   | â­â­â­â­   | â­â­â­â­â­ | å¤šæ ¼å¼éœ€æ±‚     |
| **Quay**                  | Red Hat é•œåƒä»“åº“ | â­â­â­â­â­ | â­â­â­â­   | â­â­â­â­â­ | â­â­â­â­â­ | Red Hat ç¯å¢ƒ   |
| **AWS ECR**               | AWS é•œåƒä»“åº“     | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | AWS äº‘åŸç”Ÿ     |
| **Azure ACR**             | Azure é•œåƒä»“åº“   | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | Azure äº‘åŸç”Ÿ   |
| **GCP Artifact Registry** | GCP é•œåƒä»“åº“     | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | GCP äº‘åŸç”Ÿ     |
| **Alibaba ACR**           | é˜¿é‡Œäº‘é•œåƒä»“åº“   | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | é˜¿é‡Œäº‘ç¯å¢ƒ     |

## 21.4 é•œåƒç®¡ç†æŠ€æœ¯è§„æ ¼

> **ğŸ’¡ éš”ç¦»å±‚æ¬¡å…³è”**ï¼šé•œåƒç®¡ç†æ¶‰åŠ L-3 å®¹å™¨åŒ–å±‚ï¼ˆDocker/OCI é•œåƒï¼‰å’Œ L-4 æ²™ç›’åŒ–
> å±‚ï¼ˆWasm é•œåƒï¼‰ï¼Œä¸åŒéš”ç¦»å±‚æ¬¡çš„é•œåƒæ ¼å¼å’Œç‰¹æ€§ä¸åŒã€‚è¯¦ç»†çš„æŠ€æœ¯è§£æè¯·å‚è€ƒï¼š
>
> - **[29. éš”ç¦»æ ˆ](../29-isolation-stack/isolation-stack.md)** - å®Œæ•´çš„éš”ç¦»æ ˆæŠ€
>   æœ¯è§£æ
> - **[L-3 å®¹å™¨åŒ–å±‚](../29-isolation-stack/layers/L-3-containerization.md)** -
>   å®¹å™¨é•œåƒè¯¦ç»†æ–‡æ¡£
> - **[L-4 æ²™ç›’åŒ–å±‚](../29-isolation-stack/layers/L-4-sandboxing.md)** - WASM é•œ
>   åƒè¯¦ç»†æ–‡æ¡£
> - **[éš”ç¦»å±‚æ¬¡å¯¹æ¯”æ–‡æ¡£](../29-isolation-stack/layers/isolation-comparison.md)** -
>   é•œåƒæ ¼å¼å¯¹æ¯”å’ŒæŠ€æœ¯é€‰å‹

### 21.4.1 é•œåƒç‰ˆæœ¬ç®¡ç†

**é•œåƒç‰ˆæœ¬ç®¡ç†è§„æ ¼**ï¼š

**ç‰ˆæœ¬ç­–ç•¥**ï¼š

| ç­–ç•¥           | è¯´æ˜                | ç¤ºä¾‹             | é€‚ç”¨åœºæ™¯ |
| -------------- | ------------------- | ---------------- | -------- |
| **è¯­ä¹‰åŒ–ç‰ˆæœ¬** | ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬å·    | `myapp:1.0.0`    | ç”Ÿäº§ç¯å¢ƒ |
| **Git SHA**    | ä½¿ç”¨ Git Commit SHA | `myapp:abc123`   | å¼€å‘ç¯å¢ƒ |
| **åˆ†æ”¯å**     | ä½¿ç”¨åˆ†æ”¯åç§°        | `myapp:main`     | æŒç»­é›†æˆ |
| **æ—¥æœŸæ—¶é—´æˆ³** | ä½¿ç”¨æ—¥æœŸæ—¶é—´æˆ³      | `myapp:20240101` | ä¸´æ—¶ç‰ˆæœ¬ |

**æœ€ä½³å®è·µ**ï¼š

- âœ… ç”Ÿäº§ç¯å¢ƒä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬
- âœ… å¼€å‘ç¯å¢ƒä½¿ç”¨ Git SHA
- âœ… é¿å…ä½¿ç”¨ `latest` æ ‡ç­¾
- âœ… æ”¯æŒå¤šç‰ˆæœ¬å¹¶å­˜

### 21.4.2 é•œåƒæ ‡ç­¾ç­–ç•¥

**é•œåƒæ ‡ç­¾ç­–ç•¥è§„æ ¼**ï¼š

**æ ‡ç­¾ç­–ç•¥**ï¼š

- **å›ºå®šæ ‡ç­¾**ï¼š`v1.0.0`ã€`v1.1.0`
- **æµ®åŠ¨æ ‡ç­¾**ï¼š`latest`ã€`stable`ã€`dev`
- **å¤šæ ‡ç­¾**ï¼šåŒä¸€é•œåƒå¤šä¸ªæ ‡ç­¾ï¼ˆ`v1.0.0`ã€`v1.0`ã€`v1`ã€`latest`ï¼‰

**æ ‡ç­¾ç¤ºä¾‹**ï¼š

```bash
# æ„å»ºé•œåƒ
docker build -t myapp:v1.0.0 -t myapp:v1.0 -t myapp:v1 -t myapp:latest .

# æ¨é€å¤šæ ‡ç­¾
docker push myapp:v1.0.0
docker push myapp:v1.0
docker push myapp:v1
docker push myapp:latest
```

### 21.4.3 é•œåƒç”Ÿå‘½å‘¨æœŸç®¡ç†

**é•œåƒç”Ÿå‘½å‘¨æœŸç®¡ç†è§„æ ¼**ï¼š

**ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ**ï¼š

1. **å¼€å‘é˜¶æ®µ**ï¼šé¢‘ç¹æ„å»ºå’Œæ¨é€
2. **æµ‹è¯•é˜¶æ®µ**ï¼šæµ‹è¯•å’ŒéªŒè¯
3. **å‘å¸ƒé˜¶æ®µ**ï¼šæ­£å¼å‘å¸ƒç‰ˆæœ¬
4. **å½’æ¡£é˜¶æ®µ**ï¼šæ—§ç‰ˆæœ¬å½’æ¡£
5. **æ¸…ç†é˜¶æ®µ**ï¼šåˆ é™¤ä¸å†ä½¿ç”¨çš„é•œåƒ

**ç”Ÿå‘½å‘¨æœŸç­–ç•¥**ï¼š

- âœ… ä¿ç•™æœ€è¿‘ N ä¸ªç‰ˆæœ¬
- âœ… ä¿ç•™æœ€è¿‘ N å¤©ç‰ˆæœ¬
- âœ… è‡ªåŠ¨åˆ é™¤æœªä½¿ç”¨çš„é•œåƒ
- âœ… æ‰‹åŠ¨å½’æ¡£é‡è¦ç‰ˆæœ¬

### 21.4.4 é•œåƒæ¸…ç†ç­–ç•¥

**é•œåƒæ¸…ç†ç­–ç•¥è§„æ ¼**ï¼š

**æ¸…ç†è§„åˆ™**ï¼š

- **æŒ‰æ—¶é—´æ¸…ç†**ï¼šåˆ é™¤è¶…è¿‡ N å¤©çš„é•œåƒ
- **æŒ‰æ•°é‡æ¸…ç†**ï¼šåªä¿ç•™æœ€è¿‘ N ä¸ªç‰ˆæœ¬
- **æŒ‰ä½¿ç”¨æƒ…å†µæ¸…ç†**ï¼šåˆ é™¤æœªä½¿ç”¨çš„é•œåƒ
- **æŒ‰æ ‡ç­¾æ¸…ç†**ï¼šåˆ é™¤ç‰¹å®šæ ‡ç­¾çš„é•œåƒ

**Harbor æ¸…ç†ç­–ç•¥ç¤ºä¾‹**ï¼š

```yaml
apiVersion: v1
kind: CronJob
metadata:
  name: harbor-cleanup
spec:
  schedule: "0 2 * * *" # æ¯å¤©å‡Œæ™¨ 2 ç‚¹
  jobTemplate:
    spec:
      template:
        spec:
          containers:
            - name: cleanup
              image: goharbor/harbor-jobservice
              command:
                - /harbor/cleanup.sh
              args:
                - --dry-run=false
                - --keep-days=30
                - --keep-tags=10
```

### 21.4.5 é•œåƒåƒåœ¾å›æ”¶

**é•œåƒåƒåœ¾å›æ”¶è§„æ ¼**ï¼š

**åƒåœ¾å›æ”¶ç­–ç•¥**ï¼š

- âœ… åˆ é™¤æœªå¼•ç”¨çš„ Blob
- âœ… åˆ é™¤æœªä½¿ç”¨çš„ Manifest
- âœ… å‹ç¼©å­˜å‚¨ç©ºé—´
- âœ… å®šæœŸæ‰§è¡Œåƒåœ¾å›æ”¶

**Docker Registry åƒåœ¾å›æ”¶**ï¼š

```bash
# åƒåœ¾å›æ”¶
docker exec registry registry garbage-collect /etc/docker/registry/config.yml

# é¢„è§ˆåƒåœ¾å›æ”¶
docker exec registry registry garbage-collect --dry-run /etc/docker/registry/config.yml
```

**Harbor åƒåœ¾å›æ”¶**ï¼š

- âœ… é€šè¿‡ Web UI è§¦å‘
- âœ… é€šè¿‡ API è§¦å‘
- âœ… å®šæ—¶ä»»åŠ¡æ‰§è¡Œ

## 21.5 é•œåƒå®‰å…¨æŠ€æœ¯è§„æ ¼

### 21.5.1 é•œåƒæ‰«æ

**é•œåƒæ‰«æè§„æ ¼**ï¼š

**æ‰«æå·¥å…·**ï¼š

| å·¥å…·      | å®šä½         | CVE æ•°æ®åº“ | æ€§èƒ½       | æˆç†Ÿåº¦     | æ¨èåœºæ™¯     |
| --------- | ------------ | ---------- | ---------- | ---------- | ------------ |
| **Trivy** | å¼€æºæ‰«æå·¥å…· | âœ…         | â­â­â­â­â­ | â­â­â­â­â­ | å¤§å¤šæ•°åœºæ™¯   |
| **Clair** | CoreOS æ‰«æ  | âœ…         | â­â­â­â­   | â­â­â­â­   | Harbor é›†æˆ  |
| **Aqua**  | å•†ä¸šæ‰«æ     | âœ…         | â­â­â­â­â­ | â­â­â­â­â­ | ä¼ä¸šå®‰å…¨éœ€æ±‚ |
| **Snyk**  | å¼€æºæ‰«æ     | âœ…         | â­â­â­â­   | â­â­â­â­â­ | å¼€å‘ç¯å¢ƒ     |

**Trivy è§„æ ¼**ï¼š

**æŠ€æœ¯ç‰¹ç‚¹**ï¼š

- âœ… å¿«é€Ÿæ‰«æï¼ˆ< 10sï¼‰
- âœ… æ”¯æŒå¤šç§é•œåƒæ ¼å¼ï¼ˆDockerã€OCIï¼‰
- âœ… ä¸°å¯Œçš„æ¼æ´æ•°æ®åº“
- âœ… CI/CD é›†æˆ
- âœ… Kubernetes é›†æˆ

**ç‰ˆæœ¬ä¿¡æ¯**ï¼š

- **æœ€æ–°ç‰ˆæœ¬**ï¼šv0.51.0+ï¼ˆ2024ï¼‰
- **GitHub Stars**ï¼š20K+
- **ç”Ÿäº§éªŒè¯**ï¼šâœ… å¹¿æ³›ä½¿ç”¨

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```bash
# æ‰«æé•œåƒ
trivy image myapp:v1.0.0

# CI/CD é›†æˆ
trivy image --exit-code 1 --severity CRITICAL,HIGH myapp:v1.0.0

# Kubernetes é›†æˆ
trivy k8s cluster --report summary
```

### 21.5.2 é•œåƒç­¾å

**é•œåƒç­¾åè§„æ ¼**ï¼š

**ç­¾åå·¥å…·**ï¼š

| å·¥å…·       | å®šä½            | æ ‡å‡†æ”¯æŒ | æˆç†Ÿåº¦     | æ¨èåœºæ™¯    |
| ---------- | --------------- | -------- | ---------- | ----------- |
| **Cosign** | CNCF é•œåƒç­¾å   | âœ… OCI   | â­â­â­â­â­ | äº‘åŸç”Ÿç¯å¢ƒ  |
| **Notary** | Docker é•œåƒç­¾å | âš ï¸ æ—§ç‰ˆ  | â­â­â­â­   | Docker ç¯å¢ƒ |

**Cosign è§„æ ¼**ï¼š

**æŠ€æœ¯ç‰¹ç‚¹**ï¼š

- âœ… CNCF é¡¹ç›®
- âœ… OCI æ ‡å‡†æ”¯æŒ
- âœ… ä¸ä¾›åº”é“¾å·¥å…·é›†æˆ
- âœ… å¤šç§å¯†é’¥ç±»å‹æ”¯æŒ

**ç‰ˆæœ¬ä¿¡æ¯**ï¼š

- **æœ€æ–°ç‰ˆæœ¬**ï¼šv2.2.0+ï¼ˆ2024ï¼‰
- **GitHub Stars**ï¼š4K+
- **ç”Ÿäº§éªŒè¯**ï¼šâœ… å¹¿æ³›ä½¿ç”¨

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```bash
# ç­¾åé•œåƒ
cosign sign --key cosign.key myapp:v1.0.0

# éªŒè¯ç­¾å
cosign verify --key cosign.pub myapp:v1.0.0

# å¯†é’¥å¯¹ç”Ÿæˆ
cosign generate-key-pair
```

### 21.5.3 é•œåƒéªŒè¯

**é•œåƒéªŒè¯è§„æ ¼**ï¼š

**éªŒè¯ç­–ç•¥**ï¼š

- âœ… ç­¾åéªŒè¯ï¼ˆCosignï¼‰
- âœ… æ‰«æéªŒè¯ï¼ˆTrivyï¼‰
- âœ… ç­–ç•¥éªŒè¯ï¼ˆOPAã€Kyvernoï¼‰
- âœ… å‡†å…¥æ§åˆ¶ï¼ˆAdmission Webhookï¼‰

**å‡†å…¥æ§åˆ¶ç¤ºä¾‹**ï¼š

```yaml
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: image-validation
webhooks:
  - name: image-validation.example.com
    rules:
      - operations: ["CREATE", "UPDATE"]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["pods"]
    clientConfig:
      service:
        name: image-validator
        namespace: default
        path: /validate
```

### 21.5.4 è®¿é—®æ§åˆ¶

**è®¿é—®æ§åˆ¶è§„æ ¼**ï¼š

**è®¿é—®æ§åˆ¶ç­–ç•¥**ï¼š

- âœ… åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰
- âœ… é¡¹ç›®çº§åˆ«çš„è®¿é—®æ§åˆ¶
- âœ… ä»“åº“çº§åˆ«çš„è®¿é—®æ§åˆ¶
- âœ… æ ‡ç­¾çº§åˆ«çš„è®¿é—®æ§åˆ¶

**Harbor RBAC ç¤ºä¾‹**ï¼š

- **é¡¹ç›®ç®¡ç†å‘˜**ï¼šå®Œå…¨æ§åˆ¶é¡¹ç›®
- **å¼€å‘è€…**ï¼šæ¨é€å’Œæ‹‰å–é•œåƒ
- **è®¿å®¢**ï¼šåªè¯»è®¿é—®

## 21.6 é•œåƒåˆ†å‘æŠ€æœ¯è§„æ ¼

### 21.6.1 é•œåƒæ‹‰å–ç­–ç•¥

**é•œåƒæ‹‰å–ç­–ç•¥è§„æ ¼**ï¼š

**æ‹‰å–ç­–ç•¥**ï¼š

| ç­–ç•¥             | è¯´æ˜             | é€‚ç”¨åœºæ™¯         |
| ---------------- | ---------------- | ---------------- |
| **Always**       | æ€»æ˜¯æ‹‰å–æœ€æ–°é•œåƒ | å¼€å‘ç¯å¢ƒ         |
| **IfNotPresent** | æœ¬åœ°ä¸å­˜åœ¨æ—¶æ‹‰å– | ç”Ÿäº§ç¯å¢ƒï¼ˆæ¨èï¼‰ |
| **Never**        | åªä½¿ç”¨æœ¬åœ°é•œåƒ   | ç¦»çº¿ç¯å¢ƒ         |

**é…ç½®ç¤ºä¾‹**ï¼š

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: myapp
spec:
  containers:
    - name: app
      image: myapp:v1.0.0
      imagePullPolicy: IfNotPresent
```

### 21.6.2 é•œåƒç¼“å­˜

**é•œåƒç¼“å­˜è§„æ ¼**ï¼š

**ç¼“å­˜ç­–ç•¥**ï¼š

- âœ… èŠ‚ç‚¹çº§åˆ«ç¼“å­˜
- âœ… é›†ç¾¤çº§åˆ«ç¼“å­˜
- âœ… ä»£ç†ç¼“å­˜

**ç¼“å­˜å·¥å…·**ï¼š

- **Docker Layer Caching**ï¼šDocker æœ¬åœ°ç¼“å­˜
- **Registry Mirror**ï¼šé•œåƒä»“åº“é•œåƒ
- **Harbor Proxy Cache**ï¼šHarbor ä»£ç†ç¼“å­˜

### 21.6.3 é•œåƒåŒæ­¥

**é•œåƒåŒæ­¥è§„æ ¼**ï¼š

**åŒæ­¥ç­–ç•¥**ï¼š

- âœ… å¤šä»“åº“åŒæ­¥
- âœ… è·¨é›†ç¾¤åŒæ­¥
- âœ… è¾¹ç¼˜èŠ‚ç‚¹åŒæ­¥

**Harbor é•œåƒå¤åˆ¶**ï¼š

- âœ… æ¨é€æ¨¡å¼ï¼ˆPushï¼‰
- âœ… æ‹‰å–æ¨¡å¼ï¼ˆPullï¼‰
- âœ… å®šæ—¶åŒæ­¥
- âœ… äº‹ä»¶è§¦å‘åŒæ­¥

### 21.6.4 é•œåƒä»£ç†

**é•œåƒä»£ç†è§„æ ¼**ï¼š

**ä»£ç†ç­–ç•¥**ï¼š

- âœ… ä»£ç†å…¬å…±ä»“åº“ï¼ˆDocker Hubã€gcr.ioï¼‰
- âœ… ç¼“å­˜ä»£ç†
- âœ… è®¿é—®æ§åˆ¶

**Docker Registry ä»£ç†é…ç½®**ï¼š

```yaml
version: 0.1
proxy:
  remoteurl: https://registry-1.docker.io
  username: YOUR_USERNAME
  password: YOUR_PASSWORD
```

## 21.7 é•œåƒä»“åº“æŠ€æœ¯æ ˆç»„åˆæ–¹æ¡ˆ

### 21.7.1 å°è§„æ¨¡é›†ç¾¤ç»„åˆ

**å°è§„æ¨¡é›†ç¾¤é•œåƒä»“åº“ç»„åˆ**ï¼š

**æŠ€æœ¯æ ˆ**ï¼š

- **é•œåƒä»“åº“**ï¼šDocker Registry
- **é•œåƒæ‰«æ**ï¼šTrivyï¼ˆCI/CD é›†æˆï¼‰
- **é•œåƒç­¾å**ï¼šCosignï¼ˆå¯é€‰ï¼‰
- **è®¿é—®æ§åˆ¶**ï¼šåŸºç¡€è®¤è¯

**ç‰¹ç‚¹**ï¼š

- âœ… ç®€å•æ˜“ç”¨
- âœ… èµ„æºå ç”¨ä½
- âœ… æˆæœ¬ä½

### 21.7.2 å¤§è§„æ¨¡é›†ç¾¤ç»„åˆ

**å¤§è§„æ¨¡é›†ç¾¤é•œåƒä»“åº“ç»„åˆ**ï¼š

**æŠ€æœ¯æ ˆ**ï¼š

- **é•œåƒä»“åº“**ï¼šHarbor
- **é•œåƒæ‰«æ**ï¼šTrivy/Clairï¼ˆHarbor é›†æˆï¼‰
- **é•œåƒç­¾å**ï¼šCosignï¼ˆHarbor é›†æˆï¼‰
- **è®¿é—®æ§åˆ¶**ï¼šHarbor RBAC
- **é•œåƒå¤åˆ¶**ï¼šHarbor é•œåƒå¤åˆ¶

**ç‰¹ç‚¹**ï¼š

- âœ… åŠŸèƒ½ä¸°å¯Œ
- âœ… å®‰å…¨å¯é 
- âœ… ä¼ä¸šçº§åŠŸèƒ½

### 21.7.3 å¤šé›†ç¾¤ç»„åˆ

**å¤šé›†ç¾¤é•œåƒä»“åº“ç»„åˆ**ï¼š

**æŠ€æœ¯æ ˆ**ï¼š

- **ä¸­å¿ƒä»“åº“**ï¼šHarbor
- **è¾¹ç¼˜ä»“åº“**ï¼šDocker Registry + Harbor åŒæ­¥
- **é•œåƒåŒæ­¥**ï¼šHarbor é•œåƒå¤åˆ¶
- **é•œåƒæ‰«æ**ï¼šTrivy
- **é•œåƒç­¾å**ï¼šCosign

**ç‰¹ç‚¹**ï¼š

- âœ… å¤šé›†ç¾¤ç®¡ç†
- âœ… é•œåƒåŒæ­¥
- âœ… è¾¹ç¼˜æ”¯æŒ

### 21.7.4 è¾¹ç¼˜è®¡ç®—ç»„åˆ

**è¾¹ç¼˜è®¡ç®—é•œåƒä»“åº“ç»„åˆ**ï¼š

**æŠ€æœ¯æ ˆ**ï¼š

- **ä¸­å¿ƒä»“åº“**ï¼šHarbor
- **è¾¹ç¼˜ä»“åº“**ï¼šDocker Registryï¼ˆè½»é‡çº§ï¼‰
- **é•œåƒåŒæ­¥**ï¼šHarbor é•œåƒå¤åˆ¶ + ç¦»çº¿åŒæ­¥
- **é•œåƒç¼“å­˜**ï¼šè¾¹ç¼˜èŠ‚ç‚¹ç¼“å­˜
- **é•œåƒæ‰«æ**ï¼šTrivyï¼ˆä¸­å¿ƒï¼‰

**ç‰¹ç‚¹**ï¼š

- âœ… è½»é‡çº§éƒ¨ç½²
- âœ… ç¦»çº¿æ”¯æŒ
- âœ… è¾¹ç¼˜ç¼“å­˜

## 21.8 é•œåƒç®¡ç†æœ€ä½³å®è·µ

### 21.8.1 é•œåƒå‘½åè§„èŒƒ

**é•œåƒå‘½åè§„èŒƒ**ï¼š

**å‘½åæ ¼å¼**ï¼š

```text
<registry>/<namespace>/<image>:<tag>
```

**å‘½åè§„åˆ™**ï¼š

- âœ… ä½¿ç”¨å°å†™å­—æ¯å’Œæ•°å­—
- âœ… ä½¿ç”¨è¿å­—ç¬¦åˆ†éš”ï¼ˆä¸ä½¿ç”¨ä¸‹åˆ’çº¿ï¼‰
- âœ… æ¸…æ™°çš„å‘½åç©ºé—´
- âœ… è¯­ä¹‰åŒ–æ ‡ç­¾

**å‘½åç¤ºä¾‹**ï¼š

```text
registry.example.com/myteam/myapp:v1.0.0
registry.example.com/myteam/myapp:v1.0.0-alpha.1
registry.example.com/myteam/myapp:abc123
```

### 21.8.2 é•œåƒç‰ˆæœ¬ç­–ç•¥

**é•œåƒç‰ˆæœ¬ç­–ç•¥**ï¼š

**ç‰ˆæœ¬ç­–ç•¥**ï¼š

- âœ… ç”Ÿäº§ç¯å¢ƒä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆ`v1.0.0`ï¼‰
- âœ… å¼€å‘ç¯å¢ƒä½¿ç”¨ Git SHAï¼ˆ`abc123`ï¼‰
- âœ… é¿å…ä½¿ç”¨ `latest` æ ‡ç­¾
- âœ… æ”¯æŒå¤šæ ‡ç­¾ï¼ˆ`v1.0.0`ã€`v1.0`ã€`v1`ï¼‰

### 21.8.3 é•œåƒå®‰å…¨ç­–ç•¥

**é•œåƒå®‰å…¨ç­–ç•¥**ï¼š

**å®‰å…¨ç­–ç•¥**ï¼š

- âœ… å¼ºåˆ¶é•œåƒæ‰«æï¼ˆCI/CDï¼‰
- âœ… å¼ºåˆ¶é•œåƒç­¾åï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- âœ… å‡†å…¥æ§åˆ¶ï¼ˆKubernetesï¼‰
- âœ… å®šæœŸæ›´æ–°åŸºç¡€é•œåƒ
- âœ… æœ€å°æƒé™åŸåˆ™

### 21.8.4 é•œåƒä¼˜åŒ–ç­–ç•¥

**é•œåƒä¼˜åŒ–ç­–ç•¥**ï¼š

**ä¼˜åŒ–ç­–ç•¥**ï¼š

- âœ… å¤šé˜¶æ®µæ„å»ºï¼ˆMulti-stage Buildï¼‰
- âœ… ä½¿ç”¨ .dockerignore
- âœ… å±‚ç¼“å­˜ä¼˜åŒ–
- âœ… åŸºç¡€é•œåƒä¼˜åŒ–ï¼ˆAlpineã€Distrolessï¼‰
- âœ… é•œåƒå‹ç¼©

## 21.9 å®é™…éƒ¨ç½²æ¡ˆä¾‹

### 21.9.1 æ¡ˆä¾‹ 1ï¼šHarbor é«˜å¯ç”¨éƒ¨ç½²

**åœºæ™¯**ï¼šç”Ÿäº§ç¯å¢ƒéƒ¨ç½²é«˜å¯ç”¨ Harbor é•œåƒä»“åº“

**éƒ¨ç½²æ­¥éª¤**ï¼š

```bash
# 1. å‡†å¤‡ PostgreSQL æ•°æ®åº“ï¼ˆå¤–éƒ¨ï¼‰
# ä½¿ç”¨äº‘æ•°æ®åº“æˆ–è‡ªå»ºæ•°æ®åº“

# 2. å‡†å¤‡ Redisï¼ˆå¤–éƒ¨ï¼‰
# ä½¿ç”¨äº‘ Redis æˆ–è‡ªå»º Redis

# 3. éƒ¨ç½² Harborï¼ˆHelm Chartï¼‰
helm repo add harbor https://helm.goharbor.io
helm repo update

helm install harbor harbor/harbor \
  --namespace harbor-system \
  --create-namespace \
  --set externalURL=https://harbor.example.com \
  --set persistence.enabled=true \
  --set persistence.size=500Gi \
  --set database.type=external \
  --set database.external.host=postgres.example.com \
  --set database.external.port=5432 \
  --set database.external.username=harbor \
  --set database.external.password=yourpassword \
  --set redis.type=external \
  --set redis.external.host=redis.example.com \
  --set redis.external.port=6379 \
  --set trivy.enabled=true \
  --set notary.enabled=true
```

**Harbor é…ç½®ç¤ºä¾‹**ï¼š

```yaml
# values.yaml
exposure:
  type: ingress
  tls:
    enabled: true
    certSource: secret
    secret:
      secretName: harbor-tls

persistence:
  enabled: true
  resourcePolicy: "keep"
  persistentVolumeClaim:
    registry:
      size: 500Gi
      storageClass: "fast-ssd"

trivy:
  enabled: true
  image:
    repository: aquasec/trivy
    tag: "0.42.0"

notary:
  enabled: true
```

### 21.9.2 æ¡ˆä¾‹ 2ï¼šé•œåƒæ¸…ç†è‡ªåŠ¨åŒ–è„šæœ¬

**åœºæ™¯**ï¼šå®šæœŸæ¸…ç†æ—§é•œåƒå’Œæœªä½¿ç”¨çš„é•œåƒ

**æ¸…ç†è„šæœ¬**ï¼š

```bash
#!/bin/bash
# cleanup-images.sh

set -e

REGISTRY="harbor.example.com"
PROJECT="myproject"
KEEP_DAYS=30
DRY_RUN=${DRY_RUN:-false}

# è·å–æ‰€æœ‰æ ‡ç­¾
TAGS=$(curl -s -u "${REGISTRY_USER}:${REGISTRY_PASSWORD}" \
  "https://${REGISTRY}/api/v2.0/projects/${PROJECT}/repositories/myapp/artifacts" \
  | jq -r '.[].tags[].name')

# è®¡ç®—æˆªæ­¢æ—¥æœŸ
CUTOFF_DATE=$(date -d "${KEEP_DAYS} days ago" +%s)

for TAG in $TAGS; do
  # è·å–é•œåƒåˆ›å»ºæ—¶é—´
  CREATED=$(curl -s -u "${REGISTRY_USER}:${REGISTRY_PASSWORD}" \
    "https://${REGISTRY}/api/v2.0/projects/${PROJECT}/repositories/myapp/artifacts/${TAG}" \
    | jq -r '.push_time')

  CREATED_TIMESTAMP=$(date -d "$CREATED" +%s)

  if [ "$CREATED_TIMESTAMP" -lt "$CUTOFF_DATE" ]; then
    echo "Deleting tag: ${TAG} (created: ${CREATED})"

    if [ "$DRY_RUN" = "false" ]; then
      DIGEST=$(curl -s -u "${REGISTRY_USER}:${REGISTRY_PASSWORD}" \
        "https://${REGISTRY}/api/v2.0/projects/${PROJECT}/repositories/myapp/artifacts/${TAG}" \
        | jq -r '.digest')

      curl -X DELETE -u "${REGISTRY_USER}:${REGISTRY_PASSWORD}" \
        "https://${REGISTRY}/api/v2.0/projects/${PROJECT}/repositories/myapp/artifacts/${DIGEST}"
    fi
  fi
done
```

**å®šæ—¶ä»»åŠ¡é…ç½®**ï¼š

```yaml
# CronJob for image cleanup
apiVersion: batch/v1
kind: CronJob
metadata:
  name: image-cleanup
spec:
  schedule: "0 2 * * *" # æ¯å¤©å‡Œæ™¨ 2 ç‚¹
  jobTemplate:
    spec:
      template:
        spec:
          containers:
            - name: cleanup
              image: curlimages/curl:latest
              command:
                - /bin/sh
                - -c
                - |
                  DRY_RUN=false \
                  REGISTRY_USER=${REGISTRY_USER} \
                  REGISTRY_PASSWORD=${REGISTRY_PASSWORD} \
                  /scripts/cleanup-images.sh
              env:
                - name: REGISTRY_USER
                  valueFrom:
                    secretKeyRef:
                      name: registry-credentials
                      key: username
                - name: REGISTRY_PASSWORD
                  valueFrom:
                    secretKeyRef:
                      name: registry-credentials
                      key: password
          restartPolicy: OnFailure
```

### 21.9.3 æ¡ˆä¾‹ 3ï¼šé•œåƒåŒæ­¥åˆ°è¾¹ç¼˜èŠ‚ç‚¹

**åœºæ™¯**ï¼šå°†ä¸­å¿ƒ Harbor çš„é•œåƒåŒæ­¥åˆ°è¾¹ç¼˜ Docker Registry

**åŒæ­¥è„šæœ¬**ï¼š

```bash
#!/bin/bash
# sync-images-to-edge.sh

set -e

CENTER_REGISTRY="harbor.example.com"
EDGE_REGISTRY="edge-registry.example.com"
IMAGES=(
  "myapp:v1.0.0"
  "myapp:v1.1.0"
  "sidecar:v2.0.0"
)

for IMAGE in "${IMAGES[@]}"; do
  echo "Syncing ${IMAGE}..."

  # ä»ä¸­å¿ƒä»“åº“æ‹‰å–
  docker pull ${CENTER_REGISTRY}/${IMAGE}

  # æ ‡è®°ä¸ºè¾¹ç¼˜ä»“åº“
  docker tag ${CENTER_REGISTRY}/${IMAGE} ${EDGE_REGISTRY}/${IMAGE}

  # æ¨é€åˆ°è¾¹ç¼˜ä»“åº“
  docker push ${EDGE_REGISTRY}/${IMAGE}

  # æ¸…ç†æœ¬åœ°é•œåƒ
  docker rmi ${CENTER_REGISTRY}/${IMAGE} ${EDGE_REGISTRY}/${IMAGE}

  echo "Synced ${IMAGE}"
done
```

**ä½¿ç”¨ Harbor é•œåƒå¤åˆ¶**ï¼š

```yaml
# Harbor é•œåƒå¤åˆ¶è§„åˆ™
apiVersion: v1
kind: ConfigMap
metadata:
  name: harbor-replication-policy
data:
  policy.yaml: |
    replication:
      - name: sync-to-edge
        source:
          registry: harbor.example.com
          project: myproject
        destination:
          registry: edge-registry.example.com
          project: myproject
        filters:
          - tag: "v*"
        trigger:
          type: manual
```

### 21.9.4 æ¡ˆä¾‹ 4ï¼šé•œåƒæ‰«æå’Œç­¾åé›†æˆ

**åœºæ™¯**ï¼šCI/CD æµç¨‹ä¸­é›†æˆé•œåƒæ‰«æå’Œç­¾å

**CI/CD é›†æˆè„šæœ¬**ï¼š

```bash
#!/bin/bash
# build-scan-sign-push.sh

set -e

IMAGE="myapp"
VERSION="${1:-latest}"
REGISTRY="harbor.example.com"
PROJECT="myproject"

# 1. æ„å»ºé•œåƒ
docker build -t ${IMAGE}:${VERSION} .

# 2. æ‰«æé•œåƒ
echo "Scanning image..."
trivy image --exit-code 1 --severity HIGH,CRITICAL ${IMAGE}:${VERSION}

# 3. ç­¾åé•œåƒ
echo "Signing image..."
cosign sign --key cosign.key ${IMAGE}:${VERSION}

# 4. æ¨é€é•œåƒå’Œç­¾å
echo "Pushing image..."
docker tag ${IMAGE}:${VERSION} ${REGISTRY}/${PROJECT}/${IMAGE}:${VERSION}
docker push ${REGISTRY}/${PROJECT}/${IMAGE}:${VERSION}

cosign copy ${IMAGE}:${VERSION} ${REGISTRY}/${PROJECT}/${IMAGE}:${VERSION}
```

## 21.10 é•œåƒä»“åº“æ£€æŸ¥æ¸…å•

**é•œåƒä»“åº“éƒ¨ç½²æ£€æŸ¥**ï¼š

- [ ] é•œåƒä»“åº“å·²æ­£ç¡®å®‰è£…å’Œé…ç½®
- [ ] é•œåƒä»“åº“æœåŠ¡æ­£å¸¸è¿è¡Œï¼ˆkubectl get pods -n registryï¼‰
- [ ] é•œåƒä»“åº“å­˜å‚¨åç«¯é…ç½®æ­£ç¡®
- [ ] é•œåƒä»“åº“é«˜å¯ç”¨é…ç½®å®Œæˆï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] é•œåƒä»“åº“å¤‡ä»½ç­–ç•¥å·²åˆ¶å®š

**é•œåƒä»“åº“è®¿é—®æ£€æŸ¥**ï¼š

- [ ] é•œåƒä»“åº“è®¿é—®è®¤è¯é…ç½®æ­£ç¡®
- [ ] Docker/containerd å¯ä»¥æ­£å¸¸æ‹‰å–é•œåƒ
- [ ] Kubernetes å¯ä»¥æ­£å¸¸æ‹‰å–é•œåƒï¼ˆImagePullSecretsï¼‰
- [ ] é•œåƒä»“åº“è®¿é—®æƒé™é…ç½®æ­£ç¡®
- [ ] é•œåƒä»“åº“ç½‘ç»œè¿é€šæ€§æ­£å¸¸

**é•œåƒç®¡ç†æ£€æŸ¥**ï¼š

- [ ] é•œåƒå‘½åè§„èŒƒå·²åˆ¶å®šå’Œæ‰§è¡Œ
- [ ] é•œåƒç‰ˆæœ¬ç­–ç•¥å·²å®æ–½
- [ ] é•œåƒæ¸…ç†ç­–ç•¥å·²é…ç½®
- [ ] é•œåƒç”Ÿå‘½å‘¨æœŸç®¡ç†è‡ªåŠ¨åŒ–
- [ ] é•œåƒåƒåœ¾å›æ”¶å®šæœŸæ‰§è¡Œ

**é•œåƒå®‰å…¨æ£€æŸ¥**ï¼š

- [ ] é•œåƒæ‰«æå·²é…ç½®ï¼ˆTrivy/Grype/Snykï¼‰
- [ ] é•œåƒç­¾åå·²é…ç½®ï¼ˆCosign/Notaryï¼‰
- [ ] é•œåƒéªŒè¯ç­–ç•¥å·²å®æ–½
- [ ] é•œåƒæ¼æ´å‘Šè­¦å·²é…ç½®
- [ ] é•œåƒè®¿é—®æ§åˆ¶ç­–ç•¥å·²å®æ–½

**é•œåƒåˆ†å‘æ£€æŸ¥**ï¼š

- [ ] é•œåƒæ‹‰å–ç­–ç•¥é…ç½®åˆç†ï¼ˆAlways/IfNotPresent/Neverï¼‰
- [ ] é•œåƒç¼“å­˜é…ç½®å®Œæˆï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] é•œåƒåŒæ­¥ç­–ç•¥å·²é…ç½®ï¼ˆè¾¹ç¼˜èŠ‚ç‚¹ï¼‰
- [ ] é•œåƒä»£ç†é…ç½®å®Œæˆï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] é•œåƒåˆ†å‘æ€§èƒ½æ»¡è¶³éœ€æ±‚

**é•œåƒä»“åº“ç›‘æ§æ£€æŸ¥**ï¼š

- [ ] é•œåƒä»“åº“æŒ‡æ ‡æ­£å¸¸æ”¶é›†
- [ ] é•œåƒä»“åº“æ—¥å¿—æ­£å¸¸è®°å½•
- [ ] é•œåƒä»“åº“å‘Šè­¦è§„åˆ™å·²é…ç½®
- [ ] é•œåƒä»“åº“æ€§èƒ½ç›‘æ§é…ç½®å®Œæˆ
- [ ] é•œåƒä»“åº“å­˜å‚¨ä½¿ç”¨ç‡ç›‘æ§å®Œæˆ

---

## 21.11 é•œåƒä»“åº“æ•…éšœæ’æŸ¥

### 21.11.1 å¸¸è§é—®é¢˜

**é—®é¢˜ 1ï¼šé•œåƒæ‹‰å–å¤±è´¥ - "unauthorized"**:

```bash
# æ£€æŸ¥è®¤è¯é…ç½®
kubectl get secret -n default | grep docker-registry

# æ£€æŸ¥é•œåƒä»“åº“è®¿é—®
curl -u username:password https://registry.example.com/v2/

# æ›´æ–°è®¤è¯ä¿¡æ¯
kubectl create secret docker-registry regcred \
  --docker-server=registry.example.com \
  --docker-username=username \
  --docker-password=password \
  --docker-email=email@example.com \
  --dry-run=client -o yaml | kubectl apply -f -
```

**é—®é¢˜ 2ï¼šé•œåƒä»“åº“å­˜å‚¨ç©ºé—´ä¸è¶³**:

```bash
# æ£€æŸ¥ Harbor å­˜å‚¨ä½¿ç”¨
kubectl exec -n harbor-system deployment/harbor-core -- \
  df -h /storage

# æ¸…ç†æœªä½¿ç”¨çš„é•œåƒ
# ä½¿ç”¨ Harbor UI æˆ– API æ¸…ç†

# æ£€æŸ¥ Docker Registry å­˜å‚¨
docker exec registry du -sh /var/lib/registry/docker/registry/v2/

# æ‰§è¡Œåƒåœ¾å›æ”¶
docker exec registry registry garbage-collect /etc/docker/registry/config.yml
```

**é—®é¢˜ 3ï¼šé•œåƒæ‰«æå¤±è´¥**:

```bash
# æ£€æŸ¥ Trivy æ‰«æå™¨çŠ¶æ€
kubectl get pods -n harbor-system | grep trivy

# æ£€æŸ¥æ‰«ææ—¥å¿—
kubectl logs -n harbor-system deployment/harbor-trivy -f

# æ‰‹åŠ¨è§¦å‘æ‰«æ
curl -X POST -u admin:password \
  "https://harbor.example.com/api/v2.0/projects/myproject/repositories/myapp/artifacts/v1.0.0/scan" \
  -H "Content-Type: application/json"
```

## 21.12 å‚è€ƒ

### 21.12.1 2025 å¹´æœ€æ–°æ›´æ–°ï¼ˆ2025-11-06ï¼‰

- **[27. 2025 è¶‹åŠ¿ - 2025-11-06 æœ€æ–°æ›´æ–°](../27-2025-trends/2025-trends.md#2714-2025-å¹´-11-æœˆ-6-æ—¥æœ€æ–°æ›´æ–°)** -
  æŠ€æœ¯ç‰ˆæœ¬æ›´æ–°ã€ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µã€å·²çŸ¥é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ
  - **OCI Artifact v1.1**ï¼šWasm æ¨¡å—ç­¾åã€SBOM æ”¯æŒ
  - **Sigstore + Cosign CNCF æ¯•ä¸š**ï¼š2025 å¹´ 7 æœˆæˆä¸º CNCF æ¯•ä¸šé¡¹ç›®
  - **å¼ºåˆ¶ç­¾å**ï¼šwasm æ¨¡å—å¼ºåˆ¶ç­¾åå†™å…¥ Kubernetes 1.30 å®‰å…¨åŸºçº¿
  - **SBOM è¦æ±‚**ï¼šæ‰€æœ‰é•œåƒå¿…é¡»åŒ…å« SBOMï¼ˆSoftware Bill of Materialsï¼‰

> ğŸ“‹ **è¯¦ç»†æ–‡æ¡£**ï¼šOCI Artifact v1.1 çš„å®Œæ•´æ–°ç‰¹æ€§è¯´æ˜ã€ä»£ç ç¤ºä¾‹ã€æ€§èƒ½æå‡æ•°æ®å’Œ
> è¿ç§»æŒ‡å—ï¼Œè¯·å‚è€ƒï¼š
>
> - **[05.2.3 OCI Artifact v1.1 æ–°ç‰¹æ€§ï¼ˆ2025-11-07ï¼‰](../05-oci-supply-chain/oci-supply-chain.md#0523-oci-artifact-v11-æ–°ç‰¹æ€§2025-11-07)** -
>   Wasm æ¨¡å—ç­¾åã€SBOM å…³è”ã€å¢å¼ºå‘ç°æœºåˆ¶ã€æ‰¹é‡æ“ä½œã€å…ƒæ•°æ®æ‰©å±•ã€æ€§èƒ½æå‡ï¼ˆæ‰¹é‡
>   ç­¾å â†‘3Ã—ï¼Œå‘ç°æŸ¥è¯¢ â†‘5Ã—ï¼‰å’Œå…¼å®¹æ€§è¯´æ˜

**é•œåƒç®¡ç†æœ€ä½³å®è·µï¼ˆ2025-11-06ï¼‰**ï¼š

- **é•œåƒç­¾å**ï¼šæ‰€æœ‰é•œåƒå¿…é¡»ä½¿ç”¨ cosign ç­¾åéªŒè¯ï¼ˆSigstore CNCF æ¯•ä¸šï¼‰
- **Wasm æ¨¡å—ç­¾å**ï¼šwasm æ¨¡å—å¼ºåˆ¶ç­¾åå†™å…¥ Kubernetes 1.30 å®‰å…¨åŸºçº¿
- **SBOM è¦æ±‚**ï¼šæ‰€æœ‰é•œåƒå¿…é¡»åŒ…å« SBOMï¼Œæ”¯æŒæ¼æ´æ‰«æå’Œä¾èµ–è¿½è¸ª
- **é•œåƒæ‰«æ**ï¼šé›†æˆ Trivy ç­‰å·¥å…·è¿›è¡Œé•œåƒæ¼æ´æ‰«æ

### 21.12.2 éš”ç¦»æ ˆç›¸å…³æ–‡æ¡£

- **[29. éš”ç¦»æ ˆ](../29-isolation-stack/isolation-stack.md)** - å®Œæ•´çš„éš”ç¦»æ ˆæŠ€æœ¯
  è§£æï¼ŒåŒ…æ‹¬é•œåƒæ ¼å¼å’Œè¿è¡Œæ—¶
- **[L-3 å®¹å™¨åŒ–å±‚](../29-isolation-stack/layers/L-3-containerization.md)** - å®¹
  å™¨é•œåƒè¯¦ç»†æ–‡æ¡£
- **[L-4 æ²™ç›’åŒ–å±‚](../29-isolation-stack/layers/L-4-sandboxing.md)** - WASM é•œåƒ
  è¯¦ç»†æ–‡æ¡£
- **[éš”ç¦»å±‚æ¬¡å¯¹æ¯”æ–‡æ¡£](../29-isolation-stack/layers/isolation-comparison.md)** -
  é•œåƒæ ¼å¼å¯¹æ¯”å’ŒæŠ€æœ¯é€‰å‹

### 21.12.3 é•œåƒä»“åº“ç›¸å…³æ–‡æ¡£

- **[00. Docker](../00-docker/docker.md)** - Docker æŠ€æœ¯è§„èŒƒ
- **[05. OCI ä¾›åº”é“¾](../05-oci-supply-chain/oci-supply-chain.md)** - OCI æ ‡å‡†å’Œ
  ä¾›åº”é“¾å®‰å…¨
- **[09. å®‰å…¨åˆè§„](../09-security-compliance/security-compliance.md)** - é•œåƒç­¾
  åå’Œä¾›åº”é“¾å®‰å…¨æœ€ä½³å®è·µ
- **[10. å®‰è£…éƒ¨ç½²](../10-installation/installation.md)** - é•œåƒç­¾åå’Œæ¨é€æŒ‡å—

### 21.12.3 ç½‘ç»œå’Œå­˜å‚¨ç›¸å…³æ–‡æ¡£

- **[12. ç½‘ç»œæŠ€æœ¯è§„æ ¼](../12-network-stack/network-stack.md)** -
  CNIã€Serviceã€Ingress ç­‰æŠ€æœ¯è§„æ ¼
- **[è™šæ‹ŸåŒ–ä¸å®¹å™¨åŒ–ç½‘ç»œå¯¹æ¯”åˆ†æ](../12-network-stack/virtualization-comparison.md)** -
  ç½‘ç»œèŒƒå¼è½¬æ¢ã€æ¶æ„å¯¹æ¯”ã€æ€§èƒ½åˆ†æï¼ˆ2025-11-07ï¼‰
- **[15. å­˜å‚¨æŠ€æœ¯è§„æ ¼](../15-storage-stack/storage-stack.md)** - CSIã€PV/PVC ç­‰
  æŠ€æœ¯è§„æ ¼
- **[è™šæ‹ŸåŒ–ä¸å®¹å™¨åŒ–å­˜å‚¨å¯¹æ¯”åˆ†æ](../15-storage-stack/virtualization-comparison.md)** -
  å­˜å‚¨èŒƒå¼è½¬æ¢ã€æ¶æ„å¯¹æ¯”ã€æ€§èƒ½åˆ†æï¼ˆ2025-11-07ï¼‰

### 21.12.4 å¤–éƒ¨å‚è€ƒ

- [Docker Registry æ–‡æ¡£](https://docs.docker.com/registry/)
- [Harbor å®˜æ–¹æ–‡æ¡£](https://goharbor.io/docs/)
- [Trivy å®˜æ–¹æ–‡æ¡£](https://aquasecurity.github.io/trivy/)
- [Cosign å®˜æ–¹æ–‡æ¡£](https://docs.sigstore.dev/cosign/)
- [Sigstore å®˜æ–¹æ–‡æ¡£](https://www.sigstore.dev/) - é•œåƒç­¾åå’ŒéªŒè¯
- [OCI Distribution è§„èŒƒ](https://github.com/opencontainers/distribution-spec)
- [AWS ECR æ–‡æ¡£](https://docs.aws.amazon.com/ecr/)
- [Azure ACR æ–‡æ¡£](https://docs.microsoft.com/azure/container-registry/)
- [GCP Artifact Registry æ–‡æ¡£](https://cloud.google.com/artifact-registry/docs)
