# 边缘计算场景

**最后更新**: 2025-11-06 **维护者**: 项目团队

> 📋 **主文档链
> 接**：[30.13.1 边缘计算场景](../concept-relations-matrix.md#30131-边缘计算场景)

## 场景描述

工业 IoT 边缘节点，需要快速启动、低资源消耗、离线自治能力。

## 技术组合

```text
K3s (X=2, 边缘编排) + WasmEdge (Y=4, 沙盒隔离) + OPA (Z=3, 应用策略)
```

## 关系矩阵

| 维度       | 技术选择 | 理由                            |
| ---------- | -------- | ------------------------------- |
| **编排**   | K3s      | 单二进制、<100MB、边缘优化      |
| **运行时** | WasmEdge | <10ms 冷启动、<2MB 镜像、强隔离 |
| **策略**   | OPA-Wasm | 低延迟策略执行、离线自治        |

## 实际效果

- **冷启动时间**：<10ms（vs 容器 1-5s）
- **内存占用**：<5MB（vs 容器 10-50MB）
- **镜像大小**：<2MB（vs 容器 10-100MB）
- **策略延迟**：<1ms（vs OPA 原生 10-50ms）

## 三维坐标

- **X 轴（编排）**：X=2（轻量集群）
- **Y 轴（隔离）**：Y=4（沙盒隔离）
- **Z 轴（策略）**：Z=3（应用策略）

**坐标表示**：(2, 4, 3) - 边缘 Wasm 编排 + 沙盒隔离 + 应用策略

## 技术栈详情

### 编排层

- **K3s 1.30.4+k3s2**：单二进制部署，<100MB 资源占用
- **边缘优化**：内置 SQLite，支持离线运行

### 运行时层

- **WasmEdge 0.14.1**：毫秒级启动，强隔离
- **资源占用**：<5MB 内存，<2MB 镜像

### 策略层

- **OPA-Wasm**：策略编译为 Wasm，低延迟执行
- **离线自治**：策略热更新，无需重启

## 参考文档

- [02. K3s](../../02-k3s/k3s.md) - K3s 轻量级架构
- [03. WasmEdge](../../03-wasm-edge/wasmedge.md) - WasmEdge 技术规范
- [29. 隔离栈 - L-4 沙盒化层](../../29-isolation-stack/layers/L-4-sandboxing.md)
- [27.14.5.2 工业 IoT 离线自治案例](../../27-2025-trends/2025-trends.md#271452-工业-iot-离线自治案例)

---

**最后更新**：2025-11-06 **维护者**：项目团队
